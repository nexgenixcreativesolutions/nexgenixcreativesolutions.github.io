<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Service Dashboard | Nex Genix Creative Solutions</title>
  <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&family=Orbitron:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

  <style>
    /* =================== CSS VARIABLES =================== */
    :root {
      --neon: #39FF14;
      --neon-dim: rgba(57, 255, 20, 0.12);
      --neon-glow: rgba(57, 255, 20, 0.25);
      --yellow: #e8d44d;
      --yellow-dim: rgba(232, 212, 77, 0.12);
      --red: #ff4040;
      --bg: #060609;
      --surface: rgba(14, 18, 28, 0.85);
      --surface-2: rgba(20, 26, 40, 0.7);
      --border: rgba(57, 255, 20, 0.18);
      --border-dim: rgba(255,255,255,0.07);
      --text: #e2e8f0;
      --text-muted: #6b7280;
      --radius: 0.875rem;
      --radius-sm: 0.5rem;
    }

    /* =================== GLOBAL RESET & BASE =================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Montserrat Alternates', sans-serif;
      background-color: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
      line-height: 1.6;
    }

    /* =================== FLOATING CODE BACKGROUND =================== */
    .floating-code-container {
      position: fixed;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
      z-index: 0;
    }

    .code-line {
      position: absolute;
      white-space: nowrap;
      font-family: 'Courier New', monospace;
      font-size: 11px;
      color: rgba(57, 255, 20, 0.12);
      animation: floatCode linear infinite;
      opacity: 0;
    }

    @keyframes floatCode {
      0%   { transform: translateX(100vw); opacity: 0; }
      10%  { opacity: 1; }
      90%  { opacity: 1; }
      100% { transform: translateX(-100%); opacity: 0; }
    }

    /* =================== LAYOUT =================== */
    .dashboard-wrapper {
      display: flex;
      min-height: 100vh;
    }

    /* =================== SIDEBAR =================== */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 260px;
      height: 100vh;
      background: linear-gradient(180deg, #080b12 0%, #04060a 100%);
      border-right: 1px solid var(--border);
      box-shadow: 4px 0 32px rgba(57, 255, 20, 0.07);
      padding: 1.75rem 1.25rem;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      z-index: 100;
      overflow-y: auto;
      transition: transform 0.3s ease;
    }

    .sidebar-logo {
      width: 130px;
      margin-bottom: 2rem;
    }

    .sidebar-menu {
      list-style: none;
      flex: 1;
    }

    .sidebar-menu li {
      padding: 0.8rem 1rem;
      margin-bottom: 0.35rem;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all 0.25s ease;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.82rem;
      font-weight: 500;
      letter-spacing: 0.04em;
      color: var(--text-muted);
      border: 1px solid transparent;
    }

    .sidebar-menu li:hover {
      background: var(--neon-dim);
      border-color: var(--border);
      color: var(--text);
      transform: translateX(4px);
    }

    .sidebar-menu li.active {
      background: var(--neon-dim);
      border-color: var(--neon);
      color: var(--neon);
      box-shadow: inset 3px 0 0 var(--neon);
    }

    .sidebar-footer {
      font-size: 0.65rem;
      color: var(--text-muted);
      text-align: center;
      padding-top: 1rem;
      border-top: 1px solid var(--border-dim);
      font-family: 'Courier New', monospace;
      opacity: 0.6;
    }

    /* =================== MAIN CONTENT =================== */
    .main-content {
      margin-left: 260px;
      flex: 1;
      padding: 1.75rem 2rem;
      position: relative;
      z-index: 1;
      width: 100%;
      max-width: 100vw;
    }

    /* =================== TOP NAVIGATION =================== */
    .top-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      padding: 1rem 1.25rem;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      backdrop-filter: blur(12px);
      flex-wrap: wrap;
      gap: 0.75rem;
    }

    .datetime {
      font-size: 0.82rem;
      color: var(--text-muted);
      font-family: 'Courier New', monospace;
      letter-spacing: 0.04em;
    }

    .top-nav-buttons {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .nav-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.6rem 1.1rem;
      border-radius: var(--radius-sm);
      border: 1px solid;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s ease;
      font-family: 'Montserrat Alternates', sans-serif;
      font-size: 0.85rem;
      text-decoration: none;
      white-space: nowrap;
      letter-spacing: 0.02em;
    }

    .home-btn {
      position: relative;
      border-color: rgba(232, 212, 77, 0.5);
      color: var(--yellow);
      background: var(--yellow-dim);
    }

    .home-btn:hover {
      background: var(--yellow);
      color: #000;
      border-color: var(--yellow);
      box-shadow: 0 4px 16px rgba(232, 212, 77, 0.25);
    }

    .logout-btn {
      border-color: rgba(255, 64, 64, 0.4);
      color: var(--red);
      background: rgba(255, 64, 64, 0.07);
    }

    .logout-btn:hover {
      background: var(--red);
      color: #fff;
      border-color: var(--red);
      box-shadow: 0 4px 16px rgba(255, 64, 64, 0.25);
    }

    .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown-menu {
      position: absolute;
      top: 110%;
      right: 0;
      min-width: 260px;
      background: #0c1018;
      border: 1px solid rgba(232, 212, 77, 0.3);
      border-radius: var(--radius-sm);
      padding: 0.4rem;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-8px);
      transition: all 0.25s ease;
      z-index: 1000;
      backdrop-filter: blur(12px);
    }

    .dropdown:hover .dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .dropdown-menu a {
      display: block;
      padding: 0.75rem 1rem;
      color: var(--text);
      text-decoration: none;
      border-radius: 0.35rem;
      transition: all 0.2s ease;
      font-size: 0.88rem;
    }

    .dropdown-menu a:hover {
      background: var(--yellow-dim);
      color: var(--yellow);
    }

    /* =================== CONTENT SECTIONS =================== */
    .content-section { display: none; }
    .content-section.active { display: block; }

    .welcome-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 1.75rem;
      background: linear-gradient(90deg, #ff5555 0%, var(--yellow) 50%, var(--neon) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-align: center;
      letter-spacing: 0.03em;
    }

    .content-box {
      background: var(--surface);
      border: 1px solid var(--border-dim);
      padding: 1.75rem;
      border-radius: var(--radius);
      margin-bottom: 1.5rem;
      backdrop-filter: blur(8px);
    }

    .content-box h2 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.25rem;
      color: var(--neon);
      margin-bottom: 1.25rem;
      text-align: center;
    }

    /* =================== ORDER TYPE SELECTOR =================== */
    .order-type-selector {
      display: flex;
      gap: 0.875rem;
      justify-content: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }

    .order-type-btn {
      padding: 0.875rem 1.75rem;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border-dim);
      background: var(--surface-2);
      color: var(--text-muted);
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s ease;
      font-family: 'Orbitron', sans-serif;
      min-width: 180px;
      letter-spacing: 0.02em;
    }

    .order-type-btn:hover {
      border-color: var(--neon);
      background: var(--neon-dim);
      color: var(--text);
    }

    .order-type-btn.active {
      border-color: var(--neon);
      background: var(--neon-dim);
      color: var(--neon);
      box-shadow: 0 0 16px var(--neon-glow);
    }

    /* =================== PACKAGE CATEGORIES =================== */
    .package-category {
      margin-bottom: 2.5rem;
      transition: opacity 0.25s ease;
    }

    .package-category.hidden { display: none; }

    .category-header {
      background: linear-gradient(135deg, rgba(57, 255, 20, 0.1), rgba(0,0,0,0.4));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.25rem 1.5rem;
      margin-bottom: 1.25rem;
      text-align: center;
    }

    .category-header h3 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.35rem;
      color: var(--neon);
      margin-bottom: 0.3rem;
      letter-spacing: 0.02em;
    }

    .category-header p {
      color: var(--text-muted);
      font-size: 0.88rem;
    }

    /* =================== SERVICE CARDS =================== */
    .service-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
      gap: 1.25rem;
      margin-bottom: 1.5rem;
    }

    .service-card {
      background: var(--surface);
      border: 1px solid var(--border-dim);
      border-radius: var(--radius);
      padding: 1.5rem;
      transition: all 0.25s ease;
      position: relative;
      display: flex;
      flex-direction: column;
      height: 100%;
      backdrop-filter: blur(8px);
    }

    .service-card:hover {
      border-color: var(--border);
      transform: translateY(-4px);
      box-shadow: 0 12px 32px rgba(57, 255, 20, 0.12);
    }

    .service-card.selected {
      border-color: var(--neon);
      background: linear-gradient(135deg, rgba(57, 255, 20, 0.1), var(--surface));
      box-shadow: 0 0 24px var(--neon-glow);
    }

    .service-card h3 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1rem;
      color: var(--neon);
      margin-bottom: 0.4rem;
      line-height: 1.4;
      letter-spacing: 0.02em;
    }

    .service-card .price {
      font-size: 1.6rem;
      font-weight: 700;
      color: var(--yellow);
      margin: 0.75rem 0;
      font-family: 'Orbitron', sans-serif;
    }

    .service-card .price-info {
      color: var(--text-muted);
      font-size: 0.82rem;
      margin-bottom: 0.75rem;
      line-height: 1.5;
    }

    .service-card ul {
      list-style: none;
      margin-top: 0.75rem;
      flex-grow: 1;
    }

    .service-card ul li {
      padding: 0.4rem 0;
      font-size: 0.86rem;
      color: #b0bec5;
      line-height: 1.4;
    }

    .service-card ul li:before {
      content: "‚úì ";
      color: var(--neon);
      font-weight: bold;
      margin-right: 0.35rem;
    }

    .service-card ul li.excluded:before {
      content: "‚úó ";
      color: var(--red);
    }

    .service-card .best-for {
      color: var(--yellow);
      font-size: 0.82rem;
      margin-top: 0.875rem;
      padding-top: 0.875rem;
      border-top: 1px solid var(--border-dim);
    }

    .service-card .select-btn {
      width: 100%;
      background: var(--neon);
      color: #000;
      padding: 0.75rem 1.25rem;
      border: none;
      border-radius: var(--radius-sm);
      font-weight: 700;
      font-size: 0.88rem;
      cursor: pointer;
      transition: all 0.25s ease;
      font-family: 'Montserrat Alternates', sans-serif;
      text-transform: uppercase;
      margin-top: 0.875rem;
      letter-spacing: 0.06em;
    }

    .service-card .select-btn:hover {
      background: #5aff3a;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px var(--neon-glow);
    }

    .service-card.selected .select-btn {
      background: var(--yellow);
      color: #000;
    }

    /* =================== CUSTOMIZATION PANEL =================== */
    .customization-panel {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.75rem;
      margin-bottom: 1.5rem;
      backdrop-filter: blur(8px);
    }

    .customization-panel h2 {
      color: var(--neon);
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 1.25rem;
      text-align: center;
      font-size: 1.2rem;
      letter-spacing: 0.03em;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1.25rem;
      margin-bottom: 1.25rem;
    }

    .form-group { margin-bottom: 1.25rem; }

    .form-group label {
      display: block;
      margin-bottom: 0.4rem;
      font-weight: 600;
      color: var(--neon);
      font-size: 0.82rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .input, .select, textarea {
      width: 100%;
      padding: 0.85rem 1rem;
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid var(--border-dim);
      border-radius: var(--radius-sm);
      color: var(--text);
      font-family: 'Montserrat Alternates', sans-serif;
      font-size: 0.9rem;
      transition: all 0.25s ease;
    }

    textarea {
      resize: vertical;
      min-height: 90px;
    }

    .input:focus, .select:focus, textarea:focus {
      outline: none;
      border-color: var(--neon);
      box-shadow: 0 0 0 3px var(--neon-dim);
    }

    .checkbox-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 0.75rem;
      margin-top: 0.5rem;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.65rem 0.875rem;
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid var(--border-dim);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .checkbox-item:hover {
      border-color: var(--neon);
      background: var(--neon-dim);
    }

    .checkbox-item input[type="checkbox"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
      accent-color: var(--neon);
    }

    .checkbox-item label {
      color: var(--text);
      cursor: pointer;
      margin: 0;
      font-size: 0.87rem;
    }

    /* =================== INVOICE PREVIEW =================== */
    .invoice-preview {
      background: rgba(4, 6, 10, 0.95);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 2rem;
      box-shadow: 0 0 40px rgba(57, 255, 20, 0.08);
    }

    .invoice-header {
      border-bottom: 1px solid var(--border);
      padding-bottom: 1.25rem;
      margin-bottom: 1.75rem;
    }

    .invoice-header h2 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.6rem;
      color: var(--neon);
      text-shadow: 0 0 20px rgba(57, 255, 20, 0.3);
      text-align: center;
      letter-spacing: 0.08em;
    }

    .invoice-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 0.75rem;
      margin: 1.25rem 0;
      font-size: 0.9rem;
    }

    .invoice-info div { padding: 0.35rem; }
    .invoice-info strong { color: var(--yellow); }

    .invoice-table {
      width: 100%;
      margin-bottom: 1.5rem;
      border-collapse: collapse;
      overflow-x: auto;
      display: block;
    }

    .invoice-table table {
      width: 100%;
      min-width: 480px;
    }

    .invoice-table thead {
      background: var(--neon-dim);
      border-bottom: 1px solid var(--border);
    }

    .invoice-table th {
      padding: 0.875rem 1rem;
      text-align: left;
      font-family: 'Orbitron', sans-serif;
      color: var(--neon);
      font-size: 0.78rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    .invoice-table td {
      padding: 0.875rem 1rem;
      border-bottom: 1px solid var(--border-dim);
      font-size: 0.88rem;
      color: var(--text);
    }

    .invoice-table tr:hover { background: rgba(57, 255, 20, 0.04); }

    .invoice-total {
      text-align: center;
      padding: 1.75rem;
      background: linear-gradient(135deg, rgba(57, 255, 20, 0.08), rgba(0,0,0,0.5));
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      margin-bottom: 1.5rem;
    }

    .invoice-total .total-label {
      font-size: 0.82rem;
      color: var(--yellow);
      font-weight: 700;
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 0.75rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    .invoice-total .total-amount {
      font-size: 2.25rem;
      color: var(--neon);
      font-weight: 800;
      font-family: 'Orbitron', sans-serif;
      text-shadow: 0 0 20px rgba(57, 255, 20, 0.4);
    }

    /* =================== BUTTONS =================== */
    .button {
      width: 100%;
      background: var(--neon);
      color: #000;
      padding: 0.875rem 1.25rem;
      border: none;
      border-radius: var(--radius-sm);
      font-weight: 700;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.25s ease;
      font-family: 'Montserrat Alternates', sans-serif;
      text-transform: uppercase;
      letter-spacing: 0.07em;
    }

    .button:hover:not(:disabled) {
      background: #5aff3a;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px var(--neon-glow);
    }

    .button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      transform: none;
    }

    .button-secondary {
      background: transparent;
      border: 1px solid rgba(232, 212, 77, 0.5);
      color: var(--yellow);
    }

    .button-secondary:hover:not(:disabled) {
      background: var(--yellow);
      color: #000;
      border-color: var(--yellow);
      box-shadow: 0 6px 20px rgba(232, 212, 77, 0.25);
    }

    .button-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 0.875rem;
      margin-top: 1.5rem;
    }

    .divider {
      border: none;
      height: 1px;
      background: var(--border-dim);
      margin: 1.75rem 0;
    }

    /* =================== SETTINGS =================== */
    .input:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    /* =================== SMART PAGE COUNTER =================== */
    .page-counter-wrap {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }

    .page-counter {
      display: flex;
      align-items: center;
      background: rgba(0,0,0,0.4);
      border: 1px solid var(--border-dim);
      border-radius: var(--radius-sm);
      overflow: hidden;
      transition: border-color 0.2s;
    }

    .page-counter:focus-within {
      border-color: var(--neon);
      box-shadow: 0 0 0 3px var(--neon-dim);
    }

    .page-counter.at-max { border-color: var(--yellow); }
    .page-counter.over-max { border-color: #ff6600; }

    .page-counter-btn {
      background: var(--neon-dim);
      border: none;
      color: var(--neon);
      font-size: 1.2rem;
      font-weight: 700;
      width: 42px;
      height: 44px;
      cursor: pointer;
      transition: background 0.15s;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .page-counter-btn:hover:not(:disabled) { background: rgba(57,255,20,0.2); }
    .page-counter-btn:disabled { opacity: 0.3; cursor: not-allowed; }

    .page-counter-input {
      flex: 1;
      background: transparent;
      border: none;
      color: var(--text);
      font-family: 'Orbitron', sans-serif;
      font-size: 1rem;
      font-weight: 700;
      text-align: center;
      outline: none;
      padding: 0;
      min-width: 0;
    }

    .page-counter-hint {
      font-size: 0.75rem;
      color: var(--text-muted);
      padding-left: 0.25rem;
      transition: color 0.2s;
    }

    .page-counter-hint.hint-included { color: var(--neon); }
    .page-counter-hint.hint-extra { color: var(--yellow); }
    .page-counter-hint.hint-overage { color: #ff6600; }
    .page-counter-hint.hint-fixed { color: var(--text-muted); font-style: italic; }

    /* =================== SERVICE TYPE BADGE =================== */
    .service-type-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.4rem 1rem;
      background: var(--neon-dim);
      border: 1px solid var(--border);
      border-radius: 999px;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.75rem;
      color: var(--neon);
      margin-bottom: 1.25rem;
      letter-spacing: 0.06em;
    }

    /* =================== BUSINESS QUESTIONNAIRE =================== */
    .biz-questionnaire {
      background: linear-gradient(135deg, rgba(57,255,20,0.04), rgba(0,0,0,0.3));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.25rem;
      margin-bottom: 1.25rem;
    }

    .biz-questionnaire h3 {
      font-family: 'Orbitron', sans-serif;
      font-size: 0.88rem;
      color: var(--yellow);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      letter-spacing: 0.04em;
    }

    .biz-tags-label {
      display: block;
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-bottom: 0.6rem;
      font-weight: 600;
    }

    .biz-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-bottom: 1rem;
    }

    .biz-tag {
      padding: 0.35rem 0.875rem;
      border-radius: 999px;
      border: 1px solid var(--border-dim);
      background: rgba(0,0,0,0.35);
      color: var(--text-muted);
      font-size: 0.78rem;
      cursor: pointer;
      transition: all 0.2s ease;
      user-select: none;
    }

    .biz-tag:hover {
      border-color: var(--border);
      color: var(--text);
    }

    .biz-tag.selected {
      border-color: var(--neon);
      background: var(--neon-dim);
      color: var(--neon);
      font-weight: 600;
    }

    .biz-tag.selected::before { content: '‚úì '; }

    /* =================== TOGGLE ITEMS =================== */
    .toggle-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(195px, 1fr));
      gap: 0.6rem;
      margin-top: 0.5rem;
    }

    .toggle-item {
      position: relative;
      display: flex;
      align-items: flex-start;
      gap: 0.65rem;
      padding: 0.75rem 0.875rem;
      background: rgba(0, 0, 0, 0.35);
      border: 1px solid var(--border-dim);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all 0.2s ease;
      user-select: none;
    }

    .toggle-item:hover {
      border-color: var(--border);
      background: var(--neon-dim);
    }

    .toggle-item.selected {
      border-color: var(--neon);
      background: var(--neon-dim);
    }

    .toggle-item input[type="checkbox"] { display: none; }

    .toggle-check {
      width: 18px;
      height: 18px;
      min-width: 18px;
      border-radius: 4px;
      border: 1.5px solid #555;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      margin-top: 1px;
    }

    .toggle-item.selected .toggle-check {
      background: var(--neon);
      border-color: var(--neon);
    }

    .toggle-check::after { content: ''; display: none; }

    .toggle-item.selected .toggle-check::after {
      content: '‚úì';
      display: block;
      color: #000;
      font-size: 11px;
      font-weight: 800;
      line-height: 1;
    }

    .toggle-text {
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
    }

    .toggle-name {
      font-size: 0.84rem;
      color: #c5cdd8;
      font-weight: 500;
      line-height: 1.3;
    }

    .toggle-item.selected .toggle-name { color: var(--text); }

    .toggle-price {
      font-size: 0.75rem;
      color: var(--neon);
      font-weight: 700;
    }

    .panel-section-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 0.72rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--text-muted);
      padding: 0.4rem 0 0.65rem;
      border-bottom: 1px solid var(--border-dim);
      margin-bottom: 1.1rem;
    }

    /* =================== SERVICE FILTER BAR =================== */
    /* =================== STANDALONE CURRENCY SELECTOR =================== */
    .currency-selector-standalone {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      padding: 1.25rem 1.5rem;
      background: linear-gradient(135deg, rgba(232, 212, 77, 0.08), rgba(0,0,0,0.4));
      border: 1px solid rgba(232, 212, 77, 0.3);
      border-radius: var(--radius);
      margin-bottom: 1.5rem;
      backdrop-filter: blur(8px);
    }

    .currency-selector-label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.82rem;
      color: var(--yellow);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-weight: 700;
    }

    .currency-dropdown-wrap {
      position: relative;
      display: flex;
      align-items: center;
    }

    .currency-dropdown {
      width: 100%;
      padding: 0.75rem 2.5rem 0.75rem 1rem;
      background: rgba(0,0,0,0.6);
      border: 1.5px solid rgba(232, 212, 77, 0.4);
      border-radius: var(--radius-sm);
      color: var(--yellow);
      font-family: 'Montserrat Alternates', sans-serif;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      appearance: none;
      -webkit-appearance: none;
      transition: all 0.2s ease;
      box-shadow: 0 0 12px rgba(232,212,77,0.1);
    }

    .currency-dropdown:hover, .currency-dropdown:focus {
      border-color: var(--yellow);
      outline: none;
      box-shadow: 0 0 20px rgba(232,212,77,0.25);
    }

    .currency-dropdown option {
      background: #0e1214;
      color: #e2e8f0;
      font-size: 0.9rem;
    }

    .currency-dropdown-arrow {
      position: absolute;
      right: 0.85rem;
      pointer-events: none;
      color: var(--yellow);
      font-size: 0.7rem;
    }

    .service-filter-bar {
      display: flex;
      gap: 0.6rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 2rem;
      padding: 1rem 1.25rem;
      background: var(--surface);
      border: 1px solid var(--border-dim);
      border-radius: var(--radius);
      backdrop-filter: blur(8px);
    }

    .service-filter-bar .filter-label {
      width: 100%;
      text-align: center;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.68rem;
      color: var(--text-muted);
      letter-spacing: 0.18em;
      text-transform: uppercase;
      margin-bottom: 0.4rem;
    }

    .filter-tab {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.55rem 1.1rem;
      border-radius: 999px;
      border: 1px solid var(--border-dim);
      background: rgba(0,0,0,0.4);
      color: var(--text-muted);
      font-size: 0.84rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: 'Montserrat Alternates', sans-serif;
      white-space: nowrap;
    }

    .filter-tab:hover {
      border-color: var(--border);
      color: var(--text);
      background: var(--neon-dim);
    }

    .filter-tab.active {
      border-color: var(--neon);
      background: var(--neon-dim);
      color: var(--neon);
      box-shadow: 0 0 14px rgba(57, 255, 20, 0.2);
    }

    .filter-tab .tab-icon { font-size: 0.95rem; }

    /* =================== INVOICE ENHANCEMENTS =================== */
    .invoice-client-edit {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      flex-wrap: wrap;
    }

    .invoice-client-edit input {
      background: var(--neon-dim);
      border: 1px solid var(--border);
      border-radius: 0.35rem;
      color: var(--text);
      font-family: 'Montserrat Alternates', sans-serif;
      font-size: 0.9rem;
      padding: 0.25rem 0.5rem;
      width: 190px;
      outline: none;
      transition: box-shadow 0.2s;
    }

    .invoice-client-edit input:focus {
      box-shadow: 0 0 0 2px var(--neon-dim);
    }

    .edit-icon {
      color: var(--neon);
      font-size: 0.8rem;
      cursor: default;
      opacity: 0.6;
    }

    /* Phone field with country code */
    .phone-input-group {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      flex-wrap: nowrap;
    }

    .phone-country-select {
      background: var(--neon-dim);
      border: 1px solid var(--border);
      border-radius: 0.35rem;
      color: var(--text);
      font-family: 'Montserrat Alternates', sans-serif;
      font-size: 0.82rem;
      padding: 0.25rem 0.3rem;
      width: 110px;
      outline: none;
      cursor: pointer;
      transition: box-shadow 0.2s;
      appearance: none;
      -webkit-appearance: none;
    }

    .phone-country-select:focus {
      box-shadow: 0 0 0 2px var(--neon-dim);
    }

    .phone-country-select option {
      background: #0e121a;
      color: var(--text);
    }

    .phone-number-input {
      background: var(--neon-dim);
      border: 1px solid var(--border);
      border-radius: 0.35rem;
      color: var(--text);
      font-family: 'Montserrat Alternates', sans-serif;
      font-size: 0.9rem;
      padding: 0.25rem 0.5rem;
      width: 135px;
      outline: none;
      transition: box-shadow 0.2s;
    }

    .phone-number-input:focus {
      box-shadow: 0 0 0 2px var(--neon-dim);
    }

    .whatsapp-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      background: rgba(37, 211, 102, 0.15);
      border: 1px solid rgba(37, 211, 102, 0.4);
      border-radius: 0.3rem;
      padding: 0.15rem 0.4rem;
      font-size: 0.7rem;
      color: #25D366;
      font-weight: 700;
      letter-spacing: 0.03em;
      white-space: nowrap;
    }

    /* Settings phone group */
    .settings-phone-group {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .settings-phone-group select {
      flex: 0 0 160px;
    }

    .settings-phone-group input {
      flex: 1;
    }

    @keyframes rowFlash {
      0%   { background: rgba(57, 255, 20, 0.15); }
      100% { background: transparent; }
    }

    .invoice-row-new { animation: rowFlash 0.8s ease-out forwards; }

    @keyframes totalPulse {
      0%   { text-shadow: 0 0 12px rgba(57, 255, 20, 0.9); }
      100% { text-shadow: 0 0 20px rgba(57, 255, 20, 0.4); }
    }

    .total-updating { animation: totalPulse 0.4s ease-out; }

    /* =================== MOBILE MENU TOGGLE =================== */
    .menu-toggle { display: none !important; }

    .sidebar-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.75);
      z-index: 99;
    }

    /* =================== RESPONSIVE DESIGN =================== */
    @media (max-width: 1024px) {
      .sidebar { width: 230px; }
      .main-content { margin-left: 230px; }
      .service-grid { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
    }

    @media (max-width: 768px) {
      .menu-toggle { display: block; }

      .sidebar { transform: translateX(-100%); width: 260px; }
      .sidebar.active { transform: translateX(0); }
      .sidebar-overlay.active { display: block; }

      .main-content { margin-left: 0; padding: 1rem; padding-top: 1.25rem; padding-bottom: 72px; }
      .welcome-title { font-size: 1.6rem; margin-top: 1rem; }
      .service-grid { grid-template-columns: 1fr; gap: 0.875rem; }
      .form-row { grid-template-columns: 1fr; }
      .checkbox-group { grid-template-columns: 1fr; }
      .invoice-info { grid-template-columns: 1fr; }
      .button-group { grid-template-columns: 1fr; }
      .order-type-selector { flex-direction: column; }
      .order-type-btn { width: 100%; }
      .top-nav { padding: 0.875rem; }
      .datetime { font-size: 0.72rem; width: 100%; text-align: center; }
      .top-nav-buttons { width: 100%; justify-content: center; }
      .nav-btn { padding: 0.55rem 0.875rem; font-size: 0.8rem; }
      .category-header h3 { font-size: 1.1rem; }
      .service-card h3 { font-size: 0.95rem; }
      .service-card .price { font-size: 1.4rem; }
      .invoice-header h2 { font-size: 1.3rem; }
      .invoice-total .total-amount { font-size: 1.8rem; }
      .content-box { padding: 1.25rem; }
      .customization-panel { padding: 1.25rem; }
      .invoice-preview { padding: 1.25rem; }
    }

    @media (max-width: 480px) {
      .welcome-title { font-size: 1.35rem; }
      .category-header { padding: 0.875rem; }
      .category-header h3 { font-size: 1rem; }
      .service-card { padding: 1rem; }
      .service-card .price { font-size: 1.25rem; }
      .invoice-total .total-amount { font-size: 1.6rem; }
      .button { padding: 0.75rem 1rem; font-size: 0.85rem; }
    }
    /* =================== BOTTOM NAVIGATION BAR =================== */
    .bottom-nav {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 64px;
      background: rgba(8, 11, 18, 0.97);
      border-top: 1px solid var(--border);
      backdrop-filter: blur(16px);
      z-index: 200;
      align-items: center;
      justify-content: space-around;
      padding: 0 0.25rem;
      box-shadow: 0 -4px 24px rgba(0,0,0,0.5);
    }

    .bottom-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 3px;
      flex: 1;
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      padding: 0.4rem 0.25rem;
      transition: all 0.2s ease;
      border-radius: var(--radius-sm);
      min-width: 0;
    }

    .bottom-nav-item span {
      font-size: 0.6rem;
      font-family: 'Orbitron', sans-serif;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .bottom-nav-icon {
      width: 22px;
      height: 22px;
      flex-shrink: 0;
    }

    .bottom-nav-item:hover {
      color: var(--text);
    }

    .bottom-nav-item.active {
      color: var(--neon);
    }

    .bottom-nav-item.active .bottom-nav-icon {
      filter: drop-shadow(0 0 6px rgba(57, 255, 20, 0.6));
    }

    /* The center + button */
    .bottom-nav-plus {
      width: 48px;
      height: 48px;
      min-width: 48px;
      background: var(--neon) !important;
      border-radius: 50% !important;
      color: #000 !important;
      box-shadow: 0 0 20px rgba(57, 255, 20, 0.5);
      flex: 0 0 auto;
      padding: 0;
      margin: 0 0.5rem;
      transition: all 0.2s ease;
    }

    .bottom-nav-plus:hover {
      transform: scale(1.08);
      box-shadow: 0 0 28px rgba(57, 255, 20, 0.7);
      color: #000 !important;
    }

    .bottom-nav-plus.active {
      color: #000 !important;
    }

    .bottom-nav-plus .bottom-nav-icon {
      width: 24px;
      height: 24px;
    }

    @media (max-width: 768px) {
      .bottom-nav { display: flex; }
      .main-content { padding-bottom: 72px !important; }
    }


  </style>
</head>

<body>
  <!-- Floating Code Background -->
  <div class="floating-code-container" id="floatingCodeContainer"></div>

  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

  <div class="dashboard-wrapper">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div>
        <img src="assets/images/dashboard-logo-no-bg.png" class="sidebar-logo" alt="Nex Genix">
        <ul class="sidebar-menu">
          <li onclick="showSection('order')" class="active">Order Service</li>
          <li onclick="showSection('my-orders')">My Orders</li>
          <li onclick="showSection('settings')">Account Settings</li>
        </ul>
      </div>
      <p class="sidebar-footer">&copy; 2026 NEX GENIX Creative Solutions</p>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Top Navigation -->
      <nav class="top-nav">
        <div id="datetime" class="datetime"></div>

        <div class="top-nav-buttons">
          <div class="dropdown">
            <button class="nav-btn home-btn">
              <span>üè†</span>
              <span>Home</span>
            </button>
            <div class="dropdown-menu">
              <a href="https://nexgenixbusinessschool.github.io" target="_blank">Nex Genix Business School</a>
              <a href="https://nexgenixcreativesolutions.github.io" target="_blank">Nex Genix Creative Solutions</a>
            </div>
          </div>

          <button onclick="logout()" class="nav-btn logout-btn">
            <span>üö™</span>
            <span>Logout</span>
          </button>
        </div>
      </nav>

      <!-- Order Service Section -->
      <div id="order" class="content-section active">
        <h1 class="welcome-title">Order Your Service</h1>

        <!-- Order Type Selector -->
        <div class="order-type-selector">
          <button class="order-type-btn active" id="newWebsiteBtn" onclick="selectOrderType('new')">
            üÜï New Website Order
          </button>
          <button class="order-type-btn" id="renewalBtn" onclick="selectOrderType('renewal')">
            üîÑ Renewal Service
          </button>
        </div>

        <!-- ‚òÖ CURRENCY SELECTOR ‚òÖ -->
        <div class="currency-selector-standalone">
          <div class="currency-selector-label">
            <span>üí±</span>
            <span>View Prices In:</span>
          </div>
          <div class="currency-dropdown-wrap">
            <select id="currencyDropdown" onchange="changeCurrencyFromDropdown(this)" class="currency-dropdown">
              <option value="USD" data-flag="üíµ">üíµ USD ‚Äî US Dollar ($)</option>
              <option value="PHP" data-flag="üáµüá≠">üáµüá≠ PHP ‚Äî Philippine Peso (‚Ç±)</option>
              <option value="EUR" data-flag="üá™üá∫">üá™üá∫ EUR ‚Äî Euro / Italy (‚Ç¨)</option>
              <option value="PLN" data-flag="üáµüá±">üáµüá± PLN ‚Äî Polish Z≈Çoty (z≈Ç)</option>
              <option value="GBP" data-flag="üá¨üáß">üá¨üáß GBP ‚Äî British Pound (¬£)</option>
              <option value="JPY" data-flag="üáØüáµ">üáØüáµ JPY ‚Äî Japanese Yen (¬•)</option>
              <option value="AUD" data-flag="üá¶üá∫">üá¶üá∫ AUD ‚Äî Australian Dollar (A$)</option>
              <option value="CAD" data-flag="üá®üá¶">üá®üá¶ CAD ‚Äî Canadian Dollar (C$)</option>
              <option value="SGD" data-flag="üá∏üá¨">üá∏üá¨ SGD ‚Äî Singapore Dollar (S$)</option>
              <option value="INR" data-flag="üáÆüá≥">üáÆüá≥ INR ‚Äî Indian Rupee (‚Çπ)</option>
              <option value="CNY" data-flag="üá®üá≥">üá®üá≥ CNY ‚Äî Chinese Yuan (¬•)</option>
              <option value="MXN" data-flag="üá≤üáΩ">üá≤üáΩ MXN ‚Äî Mexican Peso (MX$)</option>
              <option value="BRL" data-flag="üáßüá∑">üáßüá∑ BRL ‚Äî Brazilian Real (R$)</option>
              <option value="KRW" data-flag="üá∞üá∑">üá∞üá∑ KRW ‚Äî South Korean Won (‚Ç©)</option>
              <option value="CHF" data-flag="üá®üá≠">üá®üá≠ CHF ‚Äî Swiss Franc (Fr)</option>
              <option value="AED" data-flag="üá¶üá™">üá¶üá™ AED ‚Äî UAE Dirham (ÿØ.ÿ•)</option>
              <option value="SAR" data-flag="üá∏üá¶">üá∏üá¶ SAR ‚Äî Saudi Riyal (Ô∑º)</option>
            </select>
            <span class="currency-dropdown-arrow">‚ñº</span>
          </div>
        </div>

        <!-- ‚òÖ SERVICE TYPE FILTER BAR (only for new orders) -->
        <div class="service-filter-bar" id="serviceFilterBar">
          <div class="filter-label">Filter packages by service type</div>
          <button class="filter-tab active" id="tab-all" onclick="filterByServiceType('all', this)">
            <span class="tab-icon">üóÇÔ∏è</span> All Packages
          </button>
          <button class="filter-tab" id="tab-app-design" onclick="filterByServiceType('app-design', this)">
            <span class="tab-icon">üì±</span> App Design
          </button>
          <button class="filter-tab" id="tab-web-design" onclick="filterByServiceType('web-design', this)">
            <span class="tab-icon">üé®</span> Web Design
          </button>
          <button class="filter-tab" id="tab-web-development" onclick="filterByServiceType('web-development', this)">
            <span class="tab-icon">üåê</span> Web Development
          </button>
          <button class="filter-tab" id="tab-ui-ux" onclick="filterByServiceType('ui-ux-design', this)">
            <span class="tab-icon">üß©</span> UI/UX Design
          </button>
        </div>

        <!-- NEW WEBSITE PACKAGES -->
        <div id="newWebsitePackages">
          <!-- MULTI-PAGE WEBSITES WITH MAINTENANCE -->
          <div class="package-category" id="cat-maintenance" data-service-types="web-design web-development">
            <div class="category-header">
              <h3>üì± Multi-Page Websites (With Maintenance)</h3>
              <p>Professional websites with ongoing support and maintenance - Perfect for growing businesses</p>
            </div>
            <div class="content-box">
              <div class="service-grid" id="serviceGridMaintenance">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>

          <!-- TWO-PAGE WEBSITES -->
          <div class="package-category" id="cat-onepage" data-service-types="web-design web-development">
            <div class="category-header">
              <h3>‚ö° Two-Page Websites (Fast Launch)</h3>
              <p>Quick and efficient single-page solutions - Best for new businesses, promos, and landing pages</p>
            </div>
            <div class="content-box">
              <div class="service-grid" id="serviceGridOnePage">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>

          <!-- MULTI-PAGE WEBSITES WITHOUT MAINTENANCE -->
          <div class="package-category" id="cat-nomaintenance" data-service-types="web-design web-development">
            <div class="category-header">
              <h3>üåê Multi-Page Websites (No Maintenance)</h3>
              <p>One-time development with no ongoing costs - For businesses wanting a simple online presence</p>
            </div>
            <div class="content-box">
              <div class="service-grid" id="serviceGridNoMaintenance">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>

          <!-- APP DESIGN PACKAGES (shown only when App Design is filtered) -->
          <div class="package-category hidden" id="cat-app-design" data-service-types="app-design">
            <div class="category-header">
              <h3>üì± App Design Packages</h3>
              <p>Mobile app UI/UX design for iOS, Android, and cross-platform applications</p>
            </div>
            <div class="content-box">
              <div class="service-grid" id="serviceGridAppDesign">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>

          <!-- UI/UX DESIGN PACKAGES (shown only when UI/UX is filtered) -->
          <div class="package-category hidden" id="cat-uiux" data-service-types="ui-ux-design">
            <div class="category-header">
              <h3>üß© UI/UX Design Packages</h3>
              <p>Wireframes, prototypes, user research, and full design systems</p>
            </div>
            <div class="content-box">
              <div class="service-grid" id="serviceGridUiux">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>
        </div>

        <!-- RENEWAL SERVICES -->
        <div id="renewalPackages" style="display: none;">
          <!-- WEBSITE MANAGER SERVICES -->
          <div class="package-category">
            <div class="category-header">
              <h3>üîß Website Manager Services</h3>
              <p>Monthly or annual website maintenance and support</p>
            </div>
            <div class="content-box">
              <div style="background: var(--neon-dim); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 1.25rem; margin-bottom: 1.5rem;">
                <h4 style="color: var(--neon); font-size: 0.95rem; margin-bottom: 0.875rem; font-family: 'Orbitron', sans-serif; letter-spacing: 0.04em;">Website Manager Includes:</h4>
                <ul style="list-style: none; padding: 0;">
                  <li style="padding: 0.4rem 0; color: #b0bec5; font-size: 0.88rem;">‚úì Content updates (text/images)</li>
                  <li style="padding: 0.4rem 0; color: #b0bec5; font-size: 0.88rem;">‚úì Minor design changes</li>
                  <li style="padding: 0.4rem 0; color: #b0bec5; font-size: 0.88rem;">‚úì Plugin & security checks</li>
                  <li style="padding: 0.4rem 0; color: #b0bec5; font-size: 0.88rem;">‚úì Backup monitoring</li>
                  <li style="padding: 0.4rem 0; color: #b0bec5; font-size: 0.88rem;">‚úì Basic performance checks</li>
                </ul>
              </div>
              <div class="service-grid" id="serviceGridManager">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>

          <!-- ANNUAL RENEWAL INVOICE -->
          <div class="package-category">
            <div class="category-header">
              <h3>üìÖ Annual Website Renewal</h3>
              <p>Keep your website running with hosting, domain, and essential services</p>
            </div>
            <div class="content-box">
              <div class="service-grid" id="serviceGridRenewal">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>
        </div>

        <!-- Customization Panel -->
        <div class="customization-panel" id="customizationPanel" style="display: none;">
          <h2>Customize Your Order</h2>

          <!-- AUTO-DETECTED SERVICE TYPE BADGE -->
          <div style="text-align:center; margin-bottom:1.5rem;">
            <span class="service-type-badge" id="serviceTypeBadge">‚öôÔ∏è Select a package above</span>
          </div>

          <!-- ‚òÖ BUSINESS QUESTIONNAIRE (universal, always shown first) -->
          <div class="biz-questionnaire" id="bizQuestionnaire">
            <h3>üè¢ Tell us about your business</h3>

            <span class="biz-tags-label">What type of business or project is this for? <em style="color:#6b7280;">(select all that apply)</em></span>
            <div class="biz-tags" id="bizTypeTagsEl">
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Startup')">üöÄ Startup</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Small Business')">üè™ Small Business</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Corporate / Enterprise')">üè¢ Corporate / Enterprise</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Freelancer / Personal')">üë§ Freelancer / Personal</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Non-Profit / Organization')">ü§ù Non-Profit / Organization</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','E-Commerce / Online Store')">üõí E-Commerce / Online Store</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Restaurant / Food & Beverage')">üçΩÔ∏è Restaurant / F&B</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Health & Wellness')">üíä Health & Wellness</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Education / E-Learning')">üìö Education / E-Learning</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Real Estate')">üè† Real Estate</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Events / Entertainment')">üéâ Events / Entertainment</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Technology / SaaS')">üíª Technology / SaaS</span>
            </div>

            <span class="biz-tags-label">What is your goal with this project? <em style="color:#6b7280;">(select all that apply)</em></span>
            <div class="biz-tags" id="bizGoalTagsEl">
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Generate Leads / Inquiries')">üì© Generate Leads</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Sell Products / Services Online')">üí≥ Sell Online</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Build Brand Awareness')">‚ú® Brand Awareness</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Showcase Portfolio / Work')">üñºÔ∏è Showcase Portfolio</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Provide Information / Blog')">üì∞ Information / Blog</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','User Login & Dashboard')">üîê User Login / Dashboard</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Booking / Appointments')">üìÖ Booking / Appointments</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Community / Social')">üë• Community / Social</span>
            </div>

            <span class="biz-tags-label">What stage is your business/project currently in?</span>
            <div class="biz-tags" id="bizStageTagsEl" data-single="true">
              <span class="biz-tag" onclick="toggleBizTag(this,'stage','Just Starting Out')">üå± Just Starting Out</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'stage','Already Operating')">üîÑ Already Operating</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'stage','Rebranding / Redesign')">üîÅ Rebranding / Redesign</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'stage','Scaling Up')">üìà Scaling Up</span>
            </div>
          </div>

          <!-- ===== APP DESIGN OPTIONS ===== -->
          <div id="appDesignOptions" class="service-type-options" style="display:none;">
            <div class="panel-section-title">üì± App Design Configuration</div>
            <div class="form-row">
              <div class="form-group">
                <label>Platform *</label>
                <select id="appPlatform" class="select" onchange="updateInvoice()">
                  <option value="">Select platform</option>
                  <option value="iOS">iOS Only</option>
                  <option value="Android">Android Only</option>
                  <option value="Cross-Platform" data-extra="500">Cross-Platform (iOS + Android) +‚Ç±500</option>
                </select>
              </div>
              <div class="form-group">
                <label>App Category *</label>
                <select id="appCategory" class="select" onchange="updateInvoice()">
                  <option value="">Select category</option>
                  <option value="Business / Corporate">Business / Corporate</option>
                  <option value="E-Commerce / Shopping">E-Commerce / Shopping</option>
                  <option value="Social / Community">Social / Community</option>
                  <option value="Utility / Productivity">Utility / Productivity</option>
                  <option value="Food & Delivery">Food & Delivery</option>
                  <option value="Health & Fitness">Health & Fitness</option>
                  <option value="Education / E-Learning">Education / E-Learning</option>
                  <option value="Entertainment / Media">Entertainment / Media</option>
                  <option value="Finance / Banking">Finance / Banking</option>
                  <option value="Travel & Booking">Travel & Booking</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Number of Screens *</label>
                <select id="appScreens" class="select" onchange="updateInvoice()">
                  <option value="">Select range</option>
                  <option value="1‚Äì5 Screens">1‚Äì5 Screens</option>
                  <option value="6‚Äì10 Screens">6‚Äì10 Screens</option>
                  <option value="11‚Äì20 Screens">11‚Äì20 Screens</option>
                  <option value="20+ Screens">20+ Screens</option>
                </select>
              </div>
              <div class="form-group">
                <label>Prototype Type</label>
                <select id="appPrototype" class="select" onchange="updateInvoice()">
                  <option value="none">No prototype needed</option>
                  <option value="Static Mockup">Static Mockup (Figma Frames)</option>
                  <option value="Clickable Prototype" data-extra="800">Clickable Prototype +‚Ç±800</option>
                  <option value="Animated Prototype" data-extra="1500">Animated / Motion Prototype +‚Ç±1,500</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Design Tool Preference</label>
                <select id="appTool" class="select">
                  <option value="Figma">Figma (Recommended)</option>
                  <option value="Adobe XD">Adobe XD</option>
                  <option value="Sketch">Sketch</option>
                  <option value="No Preference">No Preference</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label>Additional App Features <span style="color:#6b7280;font-size:0.8rem;">(select multiple)</span></label>
              <div class="toggle-group">
                <div class="toggle-item" onclick="toggleFeature(this,'app-branding')"><input type="checkbox" id="app-branding" data-price="500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Branding / Logo Integration</span><span class="toggle-price">+‚Ç±500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'app-darkmode')"><input type="checkbox" id="app-darkmode" data-price="400" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Dark Mode Version</span><span class="toggle-price">+‚Ç±400</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'app-icon')"><input type="checkbox" id="app-icon" data-price="300" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">App Icon Design</span><span class="toggle-price">+‚Ç±300</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'app-onboarding')"><input type="checkbox" id="app-onboarding" data-price="600" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Onboarding Screens</span><span class="toggle-price">+‚Ç±600</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'app-designsystem')"><input type="checkbox" id="app-designsystem" data-price="900" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Design System / Style Guide</span><span class="toggle-price">+‚Ç±900</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'app-splash')"><input type="checkbox" id="app-splash" data-price="250" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Splash Screen Design</span><span class="toggle-price">+‚Ç±250</span></div></div>
              </div>
            </div>
          </div>

          <!-- ===== WEB DESIGN OPTIONS ===== -->
          <div id="webDesignOptions" class="service-type-options" style="display:none;">
            <div class="panel-section-title">üé® Web Design Configuration</div>
            <div class="form-row">
              <div class="form-group">
                <label>Website Type *</label>
                <select id="wdType" class="select" onchange="updateInvoice()">
                  <option value="">Select type</option>
                  <option value="Portfolio / Personal">Portfolio / Personal</option>
                  <option value="Corporate / Company">Corporate / Company</option>
                  <option value="Landing Page">Landing Page</option>
                  <option value="Blog / Magazine">Blog / Magazine</option>
                  <option value="E-Commerce">E-Commerce</option>
                  <option value="Non-Profit / Organization">Non-Profit / Organization</option>
                  <option value="Restaurant / Food">Restaurant / Food</option>
                  <option value="Event / Promo Site">Event / Promo Site</option>
                </select>
              </div>
              <div class="form-group">
                <label for="numPages">Number of Pages *</label>
                <div class="page-counter-wrap">
                  <div class="page-counter" id="numPagesCounter">
                    <button type="button" class="page-counter-btn" id="numPagesMinus" onclick="adjustPages('numPages',-1)">‚àí</button>
                    <input type="number" id="numPages" class="page-counter-input" min="1" readonly onchange="updateInvoice()">
                    <button type="button" class="page-counter-btn" id="numPagesPlus" onclick="adjustPages('numPages',1)">+</button>
                  </div>
                  <span class="page-counter-hint" id="numPagesHint">Select a package first</span>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Design Tool Preference</label>
                <select id="wdTool" class="select">
                  <option value="Figma">Figma (Recommended)</option>
                  <option value="Adobe XD">Adobe XD</option>
                  <option value="Photoshop">Photoshop</option>
                  <option value="No Preference">No Preference</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label>Additional Design Features <span style="color:#6b7280;font-size:0.8rem;">(select multiple)</span></label>
              <div class="toggle-group">
                <div class="toggle-item" onclick="toggleFeature(this,'wd-responsive')"><input type="checkbox" id="wd-responsive" data-price="500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Mobile Responsive Design</span><span class="toggle-price">+‚Ç±500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-illustrations')"><input type="checkbox" id="wd-illustrations" data-price="800" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Custom Illustrations</span><span class="toggle-price">+‚Ç±800</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-logo')"><input type="checkbox" id="wd-logo" data-price="600" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Logo Design</span><span class="toggle-price">+‚Ç±600</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-motion')"><input type="checkbox" id="wd-motion" data-price="700" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Animated / Motion Elements</span><span class="toggle-price">+‚Ç±700</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-brandguide')"><input type="checkbox" id="wd-brandguide" data-price="900" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Brand Style Guide</span><span class="toggle-price">+‚Ç±900</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-darkmode')"><input type="checkbox" id="wd-darkmode" data-price="400" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Dark Mode Design</span><span class="toggle-price">+‚Ç±400</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-prototype')"><input type="checkbox" id="wd-prototype" data-price="800" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Clickable Prototype</span><span class="toggle-price">+‚Ç±800</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-socialmedia')"><input type="checkbox" id="wd-socialmedia" data-price="500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Social Media Kit</span><span class="toggle-price">+‚Ç±500</span></div></div>
              </div>
            </div>
          </div>

          <!-- ===== WEB DEVELOPMENT OPTIONS ===== -->
          <div id="webDevOptions" class="service-type-options" style="display:none;">
            <div class="panel-section-title">üåê Web Development Configuration</div>
            <div class="form-row">
              <div class="form-group">
                <label>Tech Stack / Platform *</label>
                <select id="devStack" class="select" onchange="updateInvoice()">
                  <option value="">Select stack</option>
                  <option value="Custom HTML/CSS/JS">Custom HTML / CSS / JS</option>
                  <option value="WordPress" data-extra="500">WordPress +‚Ç±500</option>
                  <option value="React / Next.js" data-extra="1500">React / Next.js +‚Ç±1,500</option>
                  <option value="Vue.js / Nuxt" data-extra="1500">Vue.js / Nuxt +‚Ç±1,500</option>
                  <option value="Webflow" data-extra="800">Webflow +‚Ç±800</option>
                  <option value="Shopify" data-extra="2000">Shopify +‚Ç±2,000</option>
                  <option value="Laravel / PHP" data-extra="2000">Laravel / PHP Backend +‚Ç±2,000</option>
                </select>
              </div>
              <div class="form-group">
                <label for="numPagesdev">Number of Pages *</label>
                <div class="page-counter-wrap">
                  <div class="page-counter" id="numPagesdevCounter">
                    <button type="button" class="page-counter-btn" id="numPagesdevMinus" onclick="adjustPages('numPagesdev',-1)">‚àí</button>
                    <input type="number" id="numPagesdev" class="page-counter-input" min="1" readonly onchange="updateInvoice()">
                    <button type="button" class="page-counter-btn" id="numPagesdevPlus" onclick="adjustPages('numPagesdev',1)">+</button>
                  </div>
                  <span class="page-counter-hint" id="numPagesdevHint">Select a package first</span>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Maintenance Plan</label>
                <select id="devMaintenance" class="select" onchange="updateInvoice()">
                  <option value="none">No maintenance needed</option>
                  <option value="Monthly" data-extra="1500">Monthly Plan +‚Ç±1,500/mo</option>
                  <option value="Annual" data-extra="15000">Annual Plan +‚Ç±15,000/yr</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label>Additional Development Features <span style="color:#6b7280;font-size:0.8rem;">(select multiple)</span></label>
              <div class="toggle-group">
                <div class="toggle-item" onclick="toggleFeature(this,'dev-ecommerce')"><input type="checkbox" id="dev-ecommerce" data-price="3000" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">E-Commerce / Online Store</span><span class="toggle-price">+‚Ç±3,000</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-cms')"><input type="checkbox" id="dev-cms" data-price="1500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">CMS Integration</span><span class="toggle-price">+‚Ç±1,500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-forms')"><input type="checkbox" id="dev-forms" data-price="500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Contact Form / Email Setup</span><span class="toggle-price">+‚Ç±500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-seo')"><input type="checkbox" id="dev-seo" data-price="3000" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">SEO Optimization</span><span class="toggle-price">+‚Ç±3,000</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-analytics')"><input type="checkbox" id="dev-analytics" data-price="2000" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Analytics Integration</span><span class="toggle-price">+‚Ç±2,000</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-ssl')"><input type="checkbox" id="dev-ssl" data-price="1500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">SSL Certificate</span><span class="toggle-price">+‚Ç±1,500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-backup')"><input type="checkbox" id="dev-backup" data-price="2500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Automated Backups</span><span class="toggle-price">+‚Ç±2,500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-hosting')"><input type="checkbox" id="dev-hosting" data-price="1000" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Hosting & Domain Setup</span><span class="toggle-price">+‚Ç±1,000</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-livechat')"><input type="checkbox" id="dev-livechat" data-price="400" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Live Chat Integration</span><span class="toggle-price">+‚Ç±400</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-social')"><input type="checkbox" id="dev-social" data-price="350" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Social Media Integration</span><span class="toggle-price">+‚Ç±350</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-speed')"><input type="checkbox" id="dev-speed" data-price="600" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Speed Optimization</span><span class="toggle-price">+‚Ç±600</span></div></div>
              </div>
            </div>
          </div>

          <!-- ===== UI/UX DESIGN OPTIONS ===== -->
          <div id="uiuxOptions" class="service-type-options" style="display:none;">
            <div class="panel-section-title">üß© UI/UX Design Configuration</div>
            <div class="form-row">
              <div class="form-group">
                <label>Project Type *</label>
                <select id="uxProjectType" class="select" onchange="updateInvoice()">
                  <option value="">Select type</option>
                  <option value="Web App">Web App</option>
                  <option value="Mobile App">Mobile App</option>
                  <option value="Desktop Software">Desktop Software</option>
                  <option value="Dashboard / Admin Panel">Dashboard / Admin Panel</option>
                  <option value="SaaS Product">SaaS Product</option>
                </select>
              </div>
              <div class="form-group">
                <label>Deliverable Type *</label>
                <select id="uxDeliverable" class="select" onchange="updateInvoice()">
                  <option value="">Select deliverable</option>
                  <option value="Wireframes Only" data-extra="2000">Wireframes Only +‚Ç±2,000</option>
                  <option value="Wireframes + Hi-Fi Design" data-extra="5000">Wireframes + Hi-Fi Design +‚Ç±5,000</option>
                  <option value="Full Clickable Prototype" data-extra="7500">Full Clickable Prototype +‚Ç±7,500</option>
                  <option value="Design System" data-extra="9000">Design System / Component Library +‚Ç±9,000</option>
                  <option value="Complete UX Package" data-extra="12000">Complete UX Package +‚Ç±12,000</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Wireframe Fidelity</label>
                <select id="uxFidelity" class="select" onchange="updateInvoice()">
                  <option value="">Select fidelity</option>
                  <option value="Low-Fidelity (Sketch)">Low-Fidelity (Sketch)</option>
                  <option value="Mid-Fidelity (Greyscale)">Mid-Fidelity (Greyscale)</option>
                  <option value="High-Fidelity (Full Color)">High-Fidelity (Full Color)</option>
                </select>
              </div>
              <div class="form-group">
                <label>Number of Screens / Views *</label>
                <select id="uxScreens" class="select" onchange="updateInvoice()">
                  <option value="">Select range</option>
                  <option value="1‚Äì5 Screens">1‚Äì5 Screens</option>
                  <option value="6‚Äì15 Screens">6‚Äì15 Screens</option>
                  <option value="16‚Äì30 Screens">16‚Äì30 Screens</option>
                  <option value="30+ Screens">30+ Screens</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Design Tool Preference</label>
                <select id="uxTool" class="select">
                  <option value="Figma">Figma (Recommended)</option>
                  <option value="Adobe XD">Adobe XD</option>
                  <option value="Sketch">Sketch</option>
                  <option value="No Preference">No Preference</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label>Additional UI/UX Features <span style="color:#6b7280;font-size:0.8rem;">(select multiple)</span></label>
              <div class="toggle-group">
                <div class="toggle-item" onclick="toggleFeature(this,'ux-research')"><input type="checkbox" id="ux-research" data-price="2000" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">User Research & Personas</span><span class="toggle-price">+‚Ç±2,000</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-journey')"><input type="checkbox" id="ux-journey" data-price="1500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">User Journey Mapping</span><span class="toggle-price">+‚Ç±1,500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-ia')"><input type="checkbox" id="ux-ia" data-price="1000" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Information Architecture</span><span class="toggle-price">+‚Ç±1,000</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-usability')"><input type="checkbox" id="ux-usability" data-price="1800" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Usability Testing Plan</span><span class="toggle-price">+‚Ç±1,800</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-accessibility')"><input type="checkbox" id="ux-accessibility" data-price="1200" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Accessibility Audit (WCAG)</span><span class="toggle-price">+‚Ç±1,200</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-microinteraction')"><input type="checkbox" id="ux-microinteraction" data-price="900" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Micro-Interaction Design</span><span class="toggle-price">+‚Ç±900</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-handoff')"><input type="checkbox" id="ux-handoff" data-price="600" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Developer Handoff / Specs</span><span class="toggle-price">+‚Ç±600</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-brand')"><input type="checkbox" id="ux-brand" data-price="500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Brand Integration</span><span class="toggle-price">+‚Ç±500</span></div></div>
              </div>
            </div>
          </div>

          <!-- PROJECT DETAILS (always shown) -->
          <div id="projectDetailsSection" style="display:none;">
            <div class="panel-section-title">üìã Project Details</div>
            <div class="form-row">
              <div class="form-group">
                <label for="projectName">Project Name</label>
                <input type="text" id="projectName" class="input" placeholder="Enter project name">
              </div>
              <div class="form-group">
                <label for="deadline">Preferred Deadline</label>
                <input type="date" id="deadline" class="input">
              </div>
            </div>
            <div class="form-group">
              <label for="specialRequests">Special Requests / Notes</label>
              <textarea id="specialRequests" class="input" placeholder="Any special requirements or notes..."></textarea>
            </div>
          </div>
        </div>

        <!-- Invoice Preview -->
        <div class="content-box" id="invoiceSection" style="display: none;">
          <div class="invoice-preview">
            <div class="invoice-header">
              <h2>INVOICE PREVIEW</h2>
              <div class="invoice-info">
                <div><strong>Invoice No:</strong> <span id="invoiceNumber">NGCS-2026-001</span></div>
                <div><strong>Date:</strong> <span id="invoiceDate"></span></div>
                <div>
                  <strong>Client: </strong>
                  <span class="invoice-client-edit">
                    <input type="text" id="clientNameInput" value="Valued Client" placeholder="Enter client name" oninput="syncClientName()" />
                    <span class="edit-icon">‚úèÔ∏è</span>
                  </span>
                </div>
                <div style="margin-top:0.35rem;">
                  <strong>Email: </strong>
                  <span class="invoice-client-edit">
                    <input type="email" id="invoiceEmailInput" placeholder="your@email.com" oninput="syncInvoiceEmail()" />
                    <span class="edit-icon">‚úèÔ∏è</span>
                  </span>
                </div>
                <div style="margin-top:0.35rem;">
                  <strong>WhatsApp: </strong>
                  <span class="invoice-client-edit">
                    <span class="phone-input-group">
                      <select id="invoicePhoneCode" class="phone-country-select" oninput="syncInvoicePhone()">
                        <!-- populated by JS -->
                      </select>
                      <input type="tel" id="invoicePhoneNumber" class="phone-number-input" placeholder="9XX XXX XXXX" oninput="syncInvoicePhone()" maxlength="15" />
                    </span>
                    <span class="whatsapp-badge">
                      <svg width="11" height="11" viewBox="0 0 24 24" fill="#25D366"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                      WhatsApp
                    </span>
                  </span>
                </div>
                <div><strong>Issued By:</strong> Nex Genix Creative Solutions</div>
              </div>
            </div>

            <div class="invoice-table">
              <table>
                <thead>
                  <tr>
                    <th>Description</th>
                    <th style="text-align: right;">Amount (PHP)</th>
                  </tr>
                </thead>
                <tbody id="invoiceItems">
                  <!-- Dynamic invoice items -->
                </tbody>
              </table>
            </div>

            <div class="invoice-total">
              <div class="total-label">TOTAL AMOUNT DUE</div>
              <div class="total-amount" id="totalAmount">‚Ç±0.00</div>
            </div>

            <!-- Order Success Banner (hidden until order placed) -->
            <div id="orderSuccessBanner" style="display:none; margin-bottom:1rem; padding:1.1rem 1.25rem; background:rgba(57,255,20,0.10); border:1.5px solid var(--neon); border-radius:var(--radius); text-align:center;">
              <div style="font-family:'Orbitron',sans-serif; font-size:1rem; color:var(--neon); letter-spacing:0.06em; margin-bottom:0.4rem;">‚úÖ ORDER PLACED!</div>
              <div style="font-size:0.88rem; color:var(--text-muted);">Your order has been received. A confirmation email is on its way. Nex Genix will reach out shortly to process your payment.</div>
            </div>

            <div class="button-group">
              <button class="button" id="placeOrderBtn" onclick="submitOrder(event)">üõí Place Order</button>
              <button class="button button-secondary" onclick="downloadInvoice()">‚¨áÔ∏è Download Invoice</button>
            </div>
            <div style="margin-top:0.75rem; text-align:center;">
              <button class="button button-secondary" id="newPurchaseBtn" style="display:none; width:100%; background:rgba(232,212,77,0.12); border-color:var(--yellow); color:var(--yellow);" onclick="startNewPurchase()">‚ú® Make Another Purchase</button>
            </div>
          </div>
        </div>
      </div>

      <!-- My Orders Section -->
      <div id="my-orders" class="content-section">
        <h1 class="welcome-title">My Orders</h1>
        <div class="content-box">
          <div id="ordersContent">
            <p style="color: var(--text-muted); text-align: center; padding: 2.5rem; font-size: 0.95rem; letter-spacing: 0.02em;">No orders yet. Start by ordering a service!</p>
          </div>
        </div>
      </div>

      <!-- Settings Section -->
      <div id="settings" class="content-section">
        <h1 class="welcome-title">Account Settings</h1>
        <div class="content-box">
          <div class="form-group">
            <label for="displayNameInput">Display Name</label>
            <input id="displayNameInput" class="input" placeholder="Display Name" type="text">
          </div>
          <div class="form-group">
            <label for="usernameInput">Username</label>
            <input id="usernameInput" class="input" placeholder="Username" type="text">
          </div>
          <div class="form-group">
            <label for="phoneNumber">WhatsApp Number <span class="whatsapp-badge" style="font-size:0.68rem;vertical-align:middle;"><svg width="10" height="10" viewBox="0 0 24 24" fill="#25D366"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg> WhatsApp</span></label>
            <div class="settings-phone-group">
              <select id="phoneCode" class="input" style="flex:0 0 170px;padding:0.6rem 0.5rem;font-size:0.83rem;">
                <!-- populated by JS -->
              </select>
              <input id="phoneNumber" class="input" placeholder="9XX XXX XXXX" type="tel" maxlength="15" style="flex:1;">
            </div>
          </div>
          <div class="form-group">
            <label for="emailInput">Email Address</label>
            <input id="emailInput" class="input" placeholder="your@email.com" type="email" oninput="syncInvoiceEmailFromSettings()">
          </div>

          <hr class="divider">

          <div class="form-group">
            <label for="passwordInput">New Password</label>
            <input id="passwordInput" class="input" type="password" placeholder="New Password">
          </div>
          <button class="button" onclick="updatePassword()">Update Password</button>

          <div style="margin-top: 1rem;">
            <button class="button button-secondary" onclick="saveProfile()">Save Profile</button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- =================== BOTTOM NAVIGATION BAR =================== -->
  <nav class="bottom-nav">
    <button class="bottom-nav-item active" onclick="showSection('order'); setBottomActive(this)" title="Order">
      <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>
      </svg>
      <span>Home</span>
    </button>

    <button class="bottom-nav-item" onclick="showSection('order'); selectOrderType('new'); setBottomActive(this)" title="Services">
      <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/>
      </svg>
      <span>Services</span>
    </button>

    <button class="bottom-nav-item bottom-nav-plus" onclick="showSection('order'); setBottomActive(this)" title="New Order">
      <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
      </svg>
    </button>

    <button class="bottom-nav-item" onclick="showSection('my-orders'); setBottomActive(this)" title="My Orders">
      <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/>
      </svg>
      <span>Orders</span>
    </button>

    <button class="bottom-nav-item" onclick="showSection('settings'); setBottomActive(this)" title="Profile">
      <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/>
      </svg>
      <span>Profile</span>
    </button>
  </nav>

  <!-- =================== AI CHAT WIDGET =================== -->

  <script>
    // =================== EMAILJS CONFIGURATION ===================
    // Initialize EmailJS with your Public Key
    // IMPORTANT: Replace 'YOUR_PUBLIC_KEY' with your actual EmailJS Public Key
    // Get it from: https://dashboard.emailjs.com/admin/account
    (function() {
      emailjs.init('coUeJ01I7BIMQ-ABN'); // Public key
    })();

    // EmailJS Service Configuration
    const EMAILJS_CONFIG = {
      serviceID: 'service_ju84tjo',           // Gmail service ID
      adminTemplateID: 'template_7z9si7j',    // "Order Confirmation" template ‚Üí notifies NexGenix
      clientTemplateID: 'template_7z9si7j',   // "Order Confirmation" template ‚Üí confirms to client
      publicKey: 'coUeJ01I7BIMQ-ABN'          // Public key
    };

    // =================== CURRENCY CONVERSION ===================
    let currentCurrency = 'USD';
    const conversionRates = {
      'USD': 1,           // US Dollar
      'PHP': 56.50,       // Philippine Peso
      'EUR': 0.92,        // Euro (EU incl. Italy)
      'GBP': 0.79,        // British Pound
      'JPY': 149.50,      // Japanese Yen
      'AUD': 1.52,        // Australian Dollar
      'CAD': 1.39,        // Canadian Dollar
      'SGD': 1.34,        // Singapore Dollar
      'INR': 83.20,       // Indian Rupee
      'CNY': 7.24,        // Chinese Yuan
      'PLN': 3.98,        // Polish Z≈Çoty
      'MXN': 17.15,       // Mexican Peso
      'BRL': 4.97,        // Brazilian Real
      'KRW': 1325.00,     // South Korean Won
      'CHF': 0.89,        // Swiss Franc
      'AED': 3.67,        // UAE Dirham
      'SAR': 3.75         // Saudi Riyal
    };

    const currencySymbols = {
      'USD': '$',
      'PHP': '‚Ç±',
      'EUR': '‚Ç¨',
      'GBP': '¬£',
      'JPY': '¬•',
      'AUD': 'A$',
      'CAD': 'C$',
      'SGD': 'S$',
      'INR': '‚Çπ',
      'CNY': '¬•',
      'PLN': 'z≈Ç',
      'MXN': 'MX$',
      'BRL': 'R$',
      'KRW': '‚Ç©',
      'CHF': 'Fr',
      'AED': 'ÿØ.ÿ•',
      'SAR': 'Ô∑º'
    };

    const currencyNames = {
      'USD': 'US Dollar', 'PHP': 'Philippine Peso', 'EUR': 'Euro (Italy/EU)',
      'GBP': 'British Pound', 'JPY': 'Japanese Yen', 'AUD': 'Australian Dollar',
      'CAD': 'Canadian Dollar', 'SGD': 'Singapore Dollar', 'INR': 'Indian Rupee',
      'CNY': 'Chinese Yuan', 'PLN': 'Polish Z≈Çoty', 'MXN': 'Mexican Peso',
      'BRL': 'Brazilian Real', 'KRW': 'South Korean Won', 'CHF': 'Swiss Franc',
      'AED': 'UAE Dirham', 'SAR': 'Saudi Riyal'
    };

    const currencyFlags = {
      'USD': 'üíµ', 'PHP': 'üáµüá≠', 'EUR': 'üá™üá∫', 'GBP': 'üá¨üáß', 'JPY': 'üáØüáµ',
      'AUD': 'üá¶üá∫', 'CAD': 'üá®üá¶', 'SGD': 'üá∏üá¨', 'INR': 'üáÆüá≥', 'CNY': 'üá®üá≥',
      'PLN': 'üáµüá±', 'MXN': 'üá≤üáΩ', 'BRL': 'üáßüá∑', 'KRW': 'üá∞üá∑', 'CHF': 'üá®üá≠',
      'AED': 'üá¶üá™', 'SAR': 'üá∏üá¶'
    };

    function formatPrice(usdAmount) {
      const converted = usdAmount * conversionRates[currentCurrency];
      const symbol = currencySymbols[currentCurrency];

      // Format with proper decimal places
      if (['JPY', 'KRW', 'INR'].includes(currentCurrency)) {
        return symbol + Math.round(converted).toLocaleString();
      }
      return symbol + converted.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    function convertPHPToUSD(phpAmount) {
      // All prices in servicePackages are in PHP, convert to USD as base
      return phpAmount / 56.50;
    }

    function changeCurrency(currency) {
      currentCurrency = currency;

      // Sync dropdown
      const dropdown = document.getElementById('currencyDropdown');
      if (dropdown) dropdown.value = currency;

      // Reload services to update all prices
      loadServices();

      // Update invoice if visible
      if (selectedPackage) {
        updateInvoice();
      }
    }

    function changeCurrencyFromDropdown(select) {
      changeCurrency(select.value);
    }

    function changeCurrencyStandalone(btn, currency) {
      changeCurrency(currency);
    }

    // =================== SERVICE PACKAGES DATA (CATEGORIZED) ===================
    const servicePackages = {
      // CATEGORY 1: MULTI-PAGE WITH MAINTENANCE
      maintenance: {
        basic: {
          name: 'BASIC - Starter Business',
          price: 18000,
          basePages: 5,
          minPages: 3,
          maxPages: 5,
          pricePerPage: 1500,
          features: [
            '3-5 page website',
            'Mobile responsive',
            'Free domain (1 year)',
            'Hosting (1 year)',
            '1 professional email'
          ],
          excluded: [],
          bestFor: 'sari-sari, caf√©s, freelancers, startups'
        },
        pro: {
          name: 'PRO - Growing Business',
          price: 26000,
          basePages: 8,
          minPages: 5,
          maxPages: 8,
          pricePerPage: 2000,
          features: [
            '5-8 pages',
            'SQL database',
            'Contact forms',
            'Speed optimization',
            'Website Manager (1 month FREE)'
          ],
          excluded: [],
          bestFor: 'clinics, restaurants, agencies'
        },
        premium: {
          name: 'PREMIUM - Established/Corporate',
          price: 52500,
          basePages: 12,
          minPages: 8,
          maxPages: 12,
          pricePerPage: 3500,
          features: [
            'Custom UI/UX',
            'Advanced SQL & admin panel',
            'Multiple emails',
            'Priority support',
            'Dedicated Website Manager'
          ],
          excluded: [],
          bestFor: 'corporations, franchises, e-commerce'
        }
      },

      // CATEGORY 2: TWO-PAGE WEBSITES
      onePage: {
        starter: {
          name: 'TWO-PAGE Starter',
          price: 6500,
          basePages: 2,
          minPages: 2,
          maxPages: 2,
          pricePerPage: 1000,
          features: [
            '2 pages',
            'Mobile responsive',
            'Basic UI design',
            'Contact form (email notification)',
            'Hosted online',
            'FREE domain (1 year)',
            'Hosting (1 year)'
          ],
          excluded: ['No maintenance', 'No business email'],
          bestFor: 'freelancers, home-based sellers, promos'
        },
        pro: {
          name: 'TWO-PAGE Pro',
          price: 9500,
          basePages: 2,
          minPages: 2,
          maxPages: 2,
          pricePerPage: 1500,
          features: [
            'Everything in Starter',
            'Custom layout & branding',
            'SEO-ready structure',
            'Faster loading optimization',
            'Priority setup'
          ],
          excluded: ['No maintenance', 'No business email'],
          bestFor: 'caf√©s, startups, marketing campaigns'
        },
        premium: {
          name: 'TWO-PAGE Premium',
          price: 14000,
          basePages: 2,
          minPages: 2,
          maxPages: 2,
          pricePerPage: 2000,
          features: [
            'Custom-designed landing page',
            'Conversion-focused layout',
            'Call-to-action sections',
            'Google Map integration',
            'Analytics setup'
          ],
          excluded: ['No maintenance', 'No business email'],
          bestFor: 'product launches, agencies, corporate promos'
        }
      },

      // CATEGORY 3: MULTI-PAGE WITHOUT MAINTENANCE
      noMaintenance: {
        basic: {
          name: 'MULTI-PAGE Basic',
          price: 12000,
          basePages: 4,
          minPages: 3,
          maxPages: 4,
          pricePerPage: 1200,
          features: [
            '3-4 pages',
            'Mobile responsive',
            'FREE domain (1 year)',
            'Hosting (1 year)',
            'Contact form'
          ],
          excluded: ['No maintenance', 'No business email', 'No updates after turnover'],
          bestFor: 'small shops, sari-sari, service providers'
        },
        standard: {
          name: 'MULTI-PAGE Standard',
          price: 17000,
          basePages: 7,
          minPages: 5,
          maxPages: 7,
          pricePerPage: 1700,
          features: [
            '5-7 pages',
            'Improved UI design',
            'Speed optimization',
            'FREE domain (1 year)',
            'Hosting (1 year)'
          ],
          excluded: ['No maintenance', 'No business email'],
          bestFor: 'restaurants, clinics, schools'
        },
        advanced: {
          name: 'MULTI-PAGE Advanced',
          price: 25000,
          basePages: 12,
          minPages: 8,
          maxPages: 12,
          pricePerPage: 2500,
          features: [
            '8-12 pages',
            'Custom layout',
            'SQL database (if needed)',
            'FREE domain (1 year)',
            'Hosting (1 year)'
          ],
          excluded: ['No maintenance', 'No business email'],
          bestFor: 'large local businesses, organizations'
        }
      },

      // CATEGORY 4: WEBSITE MANAGER SERVICES
      manager: {
        monthly: {
          name: 'Website Manager (Monthly)',
          price: 800,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Content updates (text/images)',
            'Minor design changes',
            'Plugin & security checks',
            'Backup monitoring',
            'Basic performance checks',
            'Startup-friendly pricing'
          ],
          excluded: [],
          bestFor: 'businesses wanting flexible monthly support'
        },
        annual: {
          name: 'Website Manager (Annual)',
          price: 8000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'All monthly features',
            '2 months FREE',
            'Priority support',
            'Discounted rate',
            'Better value for long-term'
          ],
          excluded: [],
          bestFor: 'businesses committed to ongoing maintenance'
        }
      },

      // CATEGORY 5: ANNUAL RENEWAL
      renewal: {
        standard: {
          name: 'Annual Website Renewal',
          price: 20000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Hosting Renewal: ‚Ç±1,800',
            'Domain Renewal: ‚Ç±900',
            'Google Workspace Email Renewal (1 user): ‚Ç±6,800',
            'Website Manager Service (Annual): ‚Ç±8,000',
            'Technical Support & Vendor Handling Fee: ‚Ç±2,500'
          ],
          excluded: [],
          bestFor: 'existing clients renewing annual services'
        }
      },

      // CATEGORY 6: APP DESIGN
      appDesign: {
        starter: {
          name: 'APP DESIGN - Starter',
          price: 8000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Up to 8 screens',
            'iOS or Android',
            'Static Figma mockups',
            'Basic UI design',
            'Mobile-first layout'
          ],
          excluded: ['No prototype', 'No branding'],
          bestFor: 'small apps, MVPs, simple utilities'
        },
        pro: {
          name: 'APP DESIGN - Pro',
          price: 18000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Up to 20 screens',
            'iOS & Android',
            'Clickable prototype',
            'Custom branding & icon',
            'Onboarding screens'
          ],
          excluded: [],
          bestFor: 'startups, e-commerce apps, service apps'
        },
        premium: {
          name: 'APP DESIGN - Premium',
          price: 35000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Unlimited screens',
            'Cross-platform design',
            'Animated prototype',
            'Full design system',
            'Dark & light mode',
            'Developer handoff'
          ],
          excluded: [],
          bestFor: 'funded startups, enterprise apps, SaaS'
        }
      },

      // CATEGORY 7: UI/UX DESIGN
      uiuxDesign: {
        wireframe: {
          name: 'UI/UX - Wireframes',
          price: 5000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Up to 10 screens',
            'Low to mid-fidelity',
            'User flow diagrams',
            'Figma deliverables',
            'Revision rounds included'
          ],
          excluded: ['No visual design', 'No prototype'],
          bestFor: 'early-stage planning, concept validation'
        },
        prototype: {
          name: 'UI/UX - Full Prototype',
          price: 14000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Up to 25 screens',
            'High-fidelity design',
            'Clickable prototype',
            'User journey mapping',
            'Information architecture'
          ],
          excluded: [],
          bestFor: 'investor demos, usability testing, pitches'
        },
        system: {
          name: 'UI/UX - Design System',
          price: 28000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Complete component library',
            'Design tokens & variables',
            'Accessibility audit (WCAG)',
            'Developer handoff specs',
            'Documentation included'
          ],
          excluded: [],
          bestFor: 'product teams, SaaS platforms, enterprises'
        }
      }
    };

    // =================== FLOATING CODE BACKGROUND ===================
    const codeSnippets = [
      'const nexgenix = () => {',
      'function createSolution() {',
      'import { Innovation } from "future"',
      '<div className="digital">',
      'async function buildDreams() {',
      'export default Excellence;',
      'return <Success />;',
      'const vision = await design();',
      'npm install creativity',
      'git commit -m "launch"',
      'SELECT * FROM solutions;',
      'CREATE TABLE success;',
      '{ transform: "ideas" }',
      '.future { display: flex; }',
      'onClick={() => innovate()}',
      'useState(creativity);',
      'useEffect(() => grow());',
      'class Digital extends Tech {',
      'interface Vision { }',
      'type Success = Promise<Growth>;'
    ];

    function createFloatingCodeBackground() {
      const container = document.getElementById('floatingCodeContainer');
      for (let i = 0; i < 15; i++) {
        const codeLine = document.createElement('div');
        codeLine.className = 'code-line';
        const randomSnippet = codeSnippets[Math.floor(Math.random() * codeSnippets.length)];
        codeLine.textContent = randomSnippet;
        const yPosition = 5 + (i * 6);
        const duration = 15 + Math.random() * 10;
        const delay = Math.random() * 20;
        codeLine.style.top = `${yPosition}%`;
        codeLine.style.animationDuration = `${duration}s`;
        codeLine.style.animationDelay = `${delay}s`;
        container.appendChild(codeLine);
      }
    }

    // =================== DATE TIME UPDATE ===================
    function updateDateTime() {
      const now = new Date();
      const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      };
      document.getElementById('datetime').textContent = now.toLocaleDateString('en-US', options);
    }

    setInterval(updateDateTime, 1000);
    updateDateTime();

    // =================== SERVICE TYPE FILTER ===================
    let activeServiceFilter = 'all';

    function filterByServiceType(type, btn) {
      activeServiceFilter = type;

      // Update tab active states
      document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
      btn.classList.add('active');

      // Show/hide package categories based on data-service-types attribute
      document.querySelectorAll('#newWebsitePackages .package-category').forEach(cat => {
        const types = (cat.dataset.serviceTypes || '').split(' ');
        if (type === 'all' || types.includes(type)) {
          cat.classList.remove('hidden');
        } else {
          cat.classList.add('hidden');
        }
      });

      // Reset any selected package when filter changes
      if (selectedPackage) {
        selectedPackage = null;
        selectedCategory = null;
        document.querySelectorAll('.service-card').forEach(c => c.classList.remove('selected'));
        document.getElementById('customizationPanel').style.display = 'none';
        document.getElementById('invoiceSection').style.display = 'none';
      }

      // Pre-set activeServiceType to match the filter tab so when a card is clicked it's consistent
      const serviceTypeMap = {
        'app-design': 'app-design',
        'web-design': 'web-design',
        'web-development': 'web-development',
        'ui-ux-design': 'ui-ux-design'
      };
      if (type !== 'all' && serviceTypeMap[type]) {
        activeServiceType = serviceTypeMap[type];
      } else {
        activeServiceType = '';
      }
    }

    // =================== ORDER TYPE SELECTION ===================
    let currentOrderType = 'new';

    function selectOrderType(type) {
      currentOrderType = type;

      // Update button states
      document.getElementById('newWebsiteBtn').classList.toggle('active', type === 'new');
      document.getElementById('renewalBtn').classList.toggle('active', type === 'renewal');

      // Show/hide package sections
      document.getElementById('newWebsitePackages').style.display = type === 'new' ? 'block' : 'none';
      document.getElementById('renewalPackages').style.display = type === 'renewal' ? 'block' : 'none';
      document.getElementById('serviceFilterBar').style.display = type === 'new' ? 'flex' : 'none';

      // Hide customization and invoice
      document.getElementById('customizationPanel').style.display = 'none';
      document.getElementById('invoiceSection').style.display = 'none';

      // Clear selection
      selectedPackage = null;
      selectedCategory = null;
      document.querySelectorAll('.service-card').forEach(card => {
        card.classList.remove('selected');
      });
    }

    // =================== NAVIGATION ===================
    function showSection(sectionId) {
      const sections = document.querySelectorAll('.content-section');
      sections.forEach(section => {
        section.classList.remove('active');
      });

      const menuItems = document.querySelectorAll('.sidebar-menu li');
      menuItems.forEach(item => {
        item.classList.remove('active');
      });

      const section = document.getElementById(sectionId);
      if (section) {
        section.classList.add('active');
      }

      event.target.classList.add('active');

      // Close sidebar on mobile after selection
      if (window.innerWidth <= 768) {
        toggleSidebar();
      }
    }

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
      document.getElementById('sidebarOverlay').classList.toggle('active');
    }

    // =================== LOAD SERVICES BY CATEGORY ===================
    function loadServices() {
      // Load maintenance packages
      loadServiceCategory('serviceGridMaintenance', servicePackages.maintenance, 'maintenance');

      // Load one-page packages
      loadServiceCategory('serviceGridOnePage', servicePackages.onePage, 'onePage');

      // Load no maintenance packages
      loadServiceCategory('serviceGridNoMaintenance', servicePackages.noMaintenance, 'noMaintenance');

      // Load website manager packages
      loadServiceCategory('serviceGridManager', servicePackages.manager, 'manager');

      // Load renewal packages
      loadServiceCategory('serviceGridRenewal', servicePackages.renewal, 'renewal');

      // Load app design packages
      loadServiceCategory('serviceGridAppDesign', servicePackages.appDesign, 'appDesign');

      // Load UI/UX packages
      loadServiceCategory('serviceGridUiux', servicePackages.uiuxDesign, 'uiuxDesign');
    }

    function loadServiceCategory(gridId, packages, category) {
      const grid = document.getElementById(gridId);
      if (!grid) return;

      grid.innerHTML = '';

      for (const [key, pkg] of Object.entries(packages)) {
        const card = document.createElement('div');
        card.className = 'service-card';
        card.setAttribute('data-category', category);
        card.setAttribute('data-key', key);

        const featuresHTML = pkg.features.map(f => `<li>${f}</li>`).join('');
        const excludedHTML = pkg.excluded.map(f => `<li class="excluded">${f}</li>`).join('');

        // Convert prices from PHP (stored) to current currency
        const priceUSD = convertPHPToUSD(pkg.price);
        const pricePerPageUSD = convertPHPToUSD(pkg.pricePerPage);

        card.innerHTML = `
          <h3>${pkg.name}</h3>
          <div class="price">${formatPrice(priceUSD)}</div>
          ${pkg.basePages > 0 ? `
            <p class="price-info">
              ${pkg.basePages} pages included<br>
              ${formatPrice(pricePerPageUSD)} per additional page
            </p>
          ` : ''}
          <ul>
            ${featuresHTML}
            ${excludedHTML}
          </ul>
          <p class="best-for">
            üí° Best for: ${pkg.bestFor}
          </p>
          <button class="select-btn" onclick="selectService('${category}', '${key}')">Select Package</button>
        `;

        grid.appendChild(card);
      }
    }

    let selectedPackage = null;
    let selectedCategory = null;
    let prevInvoiceKeys = new Set();
    let activeServiceType = '';

    // Business questionnaire tag state
    const bizSelections = { type: [], goal: [], stage: [] };

    function toggleBizTag(el, group, value) {
      const container = el.closest('.biz-tags');
      const isSingle = container.dataset.single === 'true';

      if (isSingle) {
        // Deselect all siblings first
        container.querySelectorAll('.biz-tag').forEach(t => t.classList.remove('selected'));
        bizSelections[group] = [value];
        el.classList.add('selected');
      } else {
        if (el.classList.contains('selected')) {
          el.classList.remove('selected');
          bizSelections[group] = bizSelections[group].filter(v => v !== value);
        } else {
          el.classList.add('selected');
          bizSelections[group].push(value);
        }
      }
      updateInvoice();
    }

    // Toggle feature checkboxes (multi-select card toggles)
    function toggleFeature(toggleEl, checkboxId) {
      const cb = document.getElementById(checkboxId);
      if (!cb) return;
      cb.checked = !cb.checked;
      toggleEl.classList.toggle('selected', cb.checked);
      updateInvoice();
    }

    // =================== SMART PAGE COUNTER ===================
    function initPageCounter(inputId) {
      if (!selectedPackage || !selectedCategory) return;
      const pkg = servicePackages[selectedCategory][selectedPackage];

      const min = pkg.minPages || 1;
      const max = pkg.maxPages || 999;
      const fixed = (min === max);
      const input = document.getElementById(inputId);
      const hint  = document.getElementById(inputId + 'Hint');
      const wrap  = document.getElementById(inputId + 'Counter');
      const btnMinus = document.getElementById(inputId + 'Minus');
      const btnPlus  = document.getElementById(inputId + 'Plus');

      if (!input) return;

      // Set value to minimum (or fixed value)
      input.value = min;
      input.min = min;

      if (fixed) {
        // Locked ‚Äî two-page packages
        if (btnMinus) btnMinus.disabled = true;
        if (btnPlus)  btnPlus.disabled  = true;
        if (hint) {
          hint.textContent = `Fixed at ${min} page${min > 1 ? 's' : ''} ‚Äî included in package`;
          hint.className = 'page-counter-hint hint-fixed';
        }
        if (wrap) wrap.className = 'page-counter';
      } else {
        if (btnMinus) btnMinus.disabled = (min <= min); // starts at min so minus is disabled
        if (btnPlus)  btnPlus.disabled  = false;
        if (hint) {
          hint.textContent = `${min}‚Äì${max} pages included ‚Ä¢ beyond ${max}: +‚Ç±${pkg.pricePerPage.toLocaleString()}/page`;
          hint.className = 'page-counter-hint hint-included';
        }
        if (wrap) wrap.className = 'page-counter';
      }

      updateInvoice();
    }

    function adjustPages(inputId, delta) {
      if (!selectedPackage || !selectedCategory) return;
      const pkg = servicePackages[selectedCategory][selectedPackage];

      const min = pkg.minPages || 1;
      const max = pkg.maxPages || 999;
      const input = document.getElementById(inputId);
      const hint  = document.getElementById(inputId + 'Hint');
      const wrap  = document.getElementById(inputId + 'Counter');
      const btnMinus = document.getElementById(inputId + 'Minus');
      const btnPlus  = document.getElementById(inputId + 'Plus');

      if (!input) return;

      let current = parseInt(input.value) || min;
      current = Math.max(min, current + delta);  // never go below min

      input.value = current;

      // Update minus button state
      if (btnMinus) btnMinus.disabled = (current <= min);

      // Update hint and border colour
      if (current < min) {
        // shouldn't happen but safety
        if (hint) { hint.textContent = `Minimum is ${min} pages`; hint.className = 'page-counter-hint hint-extra'; }
        if (wrap) wrap.className = 'page-counter';
      } else if (current <= max) {
        const remaining = max - current;
        if (remaining === 0) {
          if (hint) { hint.textContent = `At package maximum (${max} pages) ‚Äî extra pages cost ‚Ç±${pkg.pricePerPage.toLocaleString()}/page`; hint.className = 'page-counter-hint hint-extra'; }
          if (wrap) wrap.className = 'page-counter at-max';
        } else {
          if (hint) { hint.textContent = `${current} page${current>1?'s':''} ‚Ä¢ ${remaining} more included free`; hint.className = 'page-counter-hint hint-included'; }
          if (wrap) wrap.className = 'page-counter';
        }
      } else {
        const over = current - max;
        const overCost = over * pkg.pricePerPage;
        if (hint) { hint.textContent = `${over} extra page${over>1?'s':''} beyond package ‚Üí +‚Ç±${overCost.toLocaleString()} added to invoice`; hint.className = 'page-counter-hint hint-overage'; }
        if (wrap) wrap.className = 'page-counter over-max';
      }

      updateInvoice();
    }

    // Map category ‚Üí service type label and icon
    const categoryServiceMap = {
      maintenance:    { type: 'web-development', label: 'üåê Web Development', badgeText: 'üåê WEB DEVELOPMENT' },
      onePage:        { type: 'web-development', label: 'üåê Web Development', badgeText: 'üåê WEB DEVELOPMENT' },
      noMaintenance:  { type: 'web-development', label: 'üåê Web Development', badgeText: 'üåê WEB DEVELOPMENT' },
      appDesign:      { type: 'app-design',       label: 'üì± App Design',      badgeText: 'üì± APP DESIGN' },
      uiuxDesign:     { type: 'ui-ux-design',     label: 'üß© UI/UX Design',    badgeText: 'üß© UI/UX DESIGN' },
      manager:        { type: '',                 label: 'üîß Maintenance',     badgeText: 'üîß WEBSITE MANAGER' },
      renewal:        { type: '',                 label: 'üìÖ Renewal',         badgeText: 'üìÖ ANNUAL RENEWAL' }
    };

    function selectService(category, packageKey) {
      selectedCategory = category;
      selectedPackage = packageKey;

      // Update visual selection on cards
      document.querySelectorAll('.service-card').forEach(card => card.classList.remove('selected'));
      const selectedCard = document.querySelector(`[data-category="${category}"][data-key="${packageKey}"]`);
      if (selectedCard) selectedCard.classList.add('selected');

      // Determine and set the service type from the category
      const mapping = categoryServiceMap[category] || { type: '', badgeText: '‚öôÔ∏è Service Selected' };
      activeServiceType = mapping.type;

      // Update the badge
      document.getElementById('serviceTypeBadge').textContent = mapping.badgeText;

      // Show customization panel
      document.getElementById('customizationPanel').style.display = 'block';
      document.getElementById('invoiceSection').style.display = 'block';

      // Hide all service-specific options, then show the right one
      document.querySelectorAll('.service-type-options').forEach(el => el.style.display = 'none');

      if (activeServiceType === 'app-design') {
        document.getElementById('appDesignOptions').style.display = 'block';
        document.getElementById('bizQuestionnaire').style.display = 'block';
      } else if (activeServiceType === 'web-design') {
        document.getElementById('webDesignOptions').style.display = 'block';
        document.getElementById('bizQuestionnaire').style.display = 'block';
        initPageCounter('numPages');
      } else if (activeServiceType === 'web-development') {
        document.getElementById('webDevOptions').style.display = 'block';
        document.getElementById('bizQuestionnaire').style.display = 'block';
        initPageCounter('numPagesdev');
      } else if (activeServiceType === 'ui-ux-design') {
        document.getElementById('uiuxOptions').style.display = 'block';
        document.getElementById('bizQuestionnaire').style.display = 'block';
      } else {
        // manager / renewal ‚Äî no biz questionnaire needed
        document.getElementById('bizQuestionnaire').style.display = 'none';
      }

      // Always show project details
      document.getElementById('projectDetailsSection').style.display = 'block';

      // Reset invoice flash tracking
      prevInvoiceKeys = new Set();

      updateInvoice();
      document.getElementById('customizationPanel').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // =================== EDITABLE CLIENT NAME ===================
    function syncClientName() { /* input is the direct source of truth */ }

    function syncInvoiceEmail() {
      const val = document.getElementById('invoiceEmailInput').value;
      const settingsEmail = document.getElementById('emailInput');
      if (settingsEmail && !settingsEmail.dataset.userEdited) {
        settingsEmail.value = val;
      }
    }

    function syncInvoiceEmailFromSettings() {
      const val = document.getElementById('emailInput').value;
      const invoiceEmail = document.getElementById('invoiceEmailInput');
      if (invoiceEmail) invoiceEmail.value = val;
      document.getElementById('emailInput').dataset.userEdited = 'true';
    }

    function syncInvoicePhone() {
      const code = document.getElementById('invoicePhoneCode').value;
      const num = document.getElementById('invoicePhoneNumber').value;
      const settingsCode = document.getElementById('phoneCode');
      const settingsNum = document.getElementById('phoneNumber');
      if (settingsCode) settingsCode.value = code;
      if (settingsNum) settingsNum.value = num;
    }

    function syncSettingsPhoneToInvoice() {
      const code = document.getElementById('phoneCode').value;
      const num = document.getElementById('phoneNumber').value;
      const invCode = document.getElementById('invoicePhoneCode');
      const invNum = document.getElementById('invoicePhoneNumber');
      if (invCode) invCode.value = code;
      if (invNum) invNum.value = num;
    }

    function getFullWhatsApp() {
      const code = document.getElementById('invoicePhoneCode')?.value || '';
      const num = document.getElementById('invoicePhoneNumber')?.value || '';
      return num ? `${code}${num.replace(/\s/g, '')}` : '';
    }

    // =================== COUNTRY PHONE CODES ===================
    const PHONE_COUNTRIES = [
      { code: '+1',    flag: 'üá∫üá∏', name: 'US/Canada',       abbr: 'US' },
      { code: '+44',   flag: 'üá¨üáß', name: 'United Kingdom',   abbr: 'GB' },
      { code: '+63',   flag: 'üáµüá≠', name: 'Philippines',      abbr: 'PH' },
      { code: '+39',   flag: 'üáÆüáπ', name: 'Italy',            abbr: 'IT' },
      { code: '+48',   flag: 'üáµüá±', name: 'Poland',           abbr: 'PL' },
      { code: '+61',   flag: 'üá¶üá∫', name: 'Australia',        abbr: 'AU' },
      { code: '+1',    flag: 'üá®üá¶', name: 'Canada',           abbr: 'CA' },
      { code: '+65',   flag: 'üá∏üá¨', name: 'Singapore',        abbr: 'SG' },
      { code: '+91',   flag: 'üáÆüá≥', name: 'India',            abbr: 'IN' },
      { code: '+86',   flag: 'üá®üá≥', name: 'China',            abbr: 'CN' },
      { code: '+81',   flag: 'üáØüáµ', name: 'Japan',            abbr: 'JP' },
      { code: '+82',   flag: 'üá∞üá∑', name: 'South Korea',      abbr: 'KR' },
      { code: '+49',   flag: 'üá©üá™', name: 'Germany',          abbr: 'DE' },
      { code: '+33',   flag: 'üá´üá∑', name: 'France',           abbr: 'FR' },
      { code: '+34',   flag: 'üá™üá∏', name: 'Spain',            abbr: 'ES' },
      { code: '+31',   flag: 'üá≥üá±', name: 'Netherlands',      abbr: 'NL' },
      { code: '+46',   flag: 'üá∏üá™', name: 'Sweden',           abbr: 'SE' },
      { code: '+47',   flag: 'üá≥üá¥', name: 'Norway',           abbr: 'NO' },
      { code: '+45',   flag: 'üá©üá∞', name: 'Denmark',          abbr: 'DK' },
      { code: '+358',  flag: 'üá´üáÆ', name: 'Finland',          abbr: 'FI' },
      { code: '+7',    flag: 'üá∑üá∫', name: 'Russia',           abbr: 'RU' },
      { code: '+55',   flag: 'üáßüá∑', name: 'Brazil',           abbr: 'BR' },
      { code: '+52',   flag: 'üá≤üáΩ', name: 'Mexico',           abbr: 'MX' },
      { code: '+54',   flag: 'üá¶üá∑', name: 'Argentina',        abbr: 'AR' },
      { code: '+56',   flag: 'üá®üá±', name: 'Chile',            abbr: 'CL' },
      { code: '+57',   flag: 'üá®üá¥', name: 'Colombia',         abbr: 'CO' },
      { code: '+971',  flag: 'üá¶üá™', name: 'UAE',              abbr: 'AE' },
      { code: '+966',  flag: 'üá∏üá¶', name: 'Saudi Arabia',     abbr: 'SA' },
      { code: '+20',   flag: 'üá™üá¨', name: 'Egypt',            abbr: 'EG' },
      { code: '+27',   flag: 'üáøüá¶', name: 'South Africa',     abbr: 'ZA' },
      { code: '+234',  flag: 'üá≥üá¨', name: 'Nigeria',          abbr: 'NG' },
      { code: '+254',  flag: 'üá∞üá™', name: 'Kenya',            abbr: 'KE' },
      { code: '+62',   flag: 'üáÆüá©', name: 'Indonesia',        abbr: 'ID' },
      { code: '+60',   flag: 'üá≤üáæ', name: 'Malaysia',         abbr: 'MY' },
      { code: '+66',   flag: 'üáπüá≠', name: 'Thailand',         abbr: 'TH' },
      { code: '+84',   flag: 'üáªüá≥', name: 'Vietnam',          abbr: 'VN' },
      { code: '+880',  flag: 'üáßüá©', name: 'Bangladesh',       abbr: 'BD' },
      { code: '+92',   flag: 'üáµüá∞', name: 'Pakistan',         abbr: 'PK' },
      { code: '+94',   flag: 'üá±üá∞', name: 'Sri Lanka',        abbr: 'LK' },
      { code: '+64',   flag: 'üá≥üáø', name: 'New Zealand',      abbr: 'NZ' },
      { code: '+41',   flag: 'üá®üá≠', name: 'Switzerland',      abbr: 'CH' },
      { code: '+43',   flag: 'üá¶üáπ', name: 'Austria',          abbr: 'AT' },
      { code: '+32',   flag: 'üáßüá™', name: 'Belgium',          abbr: 'BE' },
      { code: '+351',  flag: 'üáµüáπ', name: 'Portugal',         abbr: 'PT' },
      { code: '+30',   flag: 'üá¨üá∑', name: 'Greece',           abbr: 'GR' },
      { code: '+380',  flag: 'üá∫üá¶', name: 'Ukraine',          abbr: 'UA' },
      { code: '+90',   flag: 'üáπüá∑', name: 'Turkey',           abbr: 'TR' },
      { code: '+98',   flag: 'üáÆüá∑', name: 'Iran',             abbr: 'IR' },
      { code: '+972',  flag: 'üáÆüá±', name: 'Israel',           abbr: 'IL' },
      { code: '+852',  flag: 'üá≠üá∞', name: 'Hong Kong',        abbr: 'HK' },
      { code: '+886',  flag: 'üáπüáº', name: 'Taiwan',           abbr: 'TW' },
    ];

    function populatePhoneDropdowns() {
      const selects = ['invoicePhoneCode', 'phoneCode'];
      selects.forEach(id => {
        const el = document.getElementById(id);
        if (!el) return;
        el.innerHTML = PHONE_COUNTRIES.map(c =>
          `<option value="${c.code}" data-abbr="${c.abbr}">${c.flag} ${c.abbr} ${c.code}</option>`
        ).join('');
        // default to PH
        el.value = '+63';
      });
    }

    // =================== SERVICE TYPE CHANGE (kept for filter-tab pre-setting) ===================
    function onServiceTypeChange() {
      updateInvoice();
    }

    // =================== INVOICE GENERATION ===================
    function updateInvoice() {
      if (!selectedPackage || !selectedCategory) return;

      const pkg = servicePackages[selectedCategory][selectedPackage];
      const serviceType = activeServiceType;

      let total = pkg.price;
      const items = [];

      // Base package
      items.push({
        description: `${pkg.name}${pkg.basePages > 0 ? ` (${pkg.basePages} pages)` : ''}`,
        amount: pkg.price
      });

      // Manager/Renewal: no further customization
      if (selectedCategory === 'manager' || selectedCategory === 'renewal') {
        renderInvoice(items, total);
        return;
      }

      // Business profile notes (informational, ‚Ç±0)
      if (bizSelections.type.length > 0) {
        items.push({ description: `Business Type: ${bizSelections.type.join(', ')}`, amount: 0 });
      }
      if (bizSelections.goal.length > 0) {
        items.push({ description: `Goals: ${bizSelections.goal.join(', ')}`, amount: 0 });
      }
      if (bizSelections.stage.length > 0) {
        items.push({ description: `Stage: ${bizSelections.stage[0]}`, amount: 0 });
      }

      // ‚îÄ‚îÄ APP DESIGN ‚îÄ‚îÄ
      if (serviceType === 'app-design') {
        const platform = document.getElementById('appPlatform');
        if (platform && platform.value) {
          const extra = parseInt(platform.options[platform.selectedIndex].dataset.extra || 0);
          items.push({ description: `Platform: ${platform.value}`, amount: extra });
          total += extra;
        }
        const category = document.getElementById('appCategory');
        if (category && category.value) items.push({ description: `App Category: ${category.value}`, amount: 0 });
        const screens = document.getElementById('appScreens');
        if (screens && screens.value) items.push({ description: `Screens: ${screens.value}`, amount: 0 });
        const proto = document.getElementById('appPrototype');
        if (proto && proto.value && proto.value !== 'none') {
          const extra = parseInt(proto.options[proto.selectedIndex].dataset.extra || 0);
          if (extra > 0) { items.push({ description: `Prototype: ${proto.value}`, amount: extra }); total += extra; }
          else if (proto.value) { items.push({ description: `Prototype: ${proto.value}`, amount: 0 }); }
        }
        [['app-branding','Branding / Logo Integration'],['app-darkmode','Dark Mode Version'],['app-icon','App Icon Design'],['app-onboarding','Onboarding Screens'],['app-designsystem','Design System / Style Guide'],['app-splash','Splash Screen Design']].forEach(([id, label]) => {
          const cb = document.getElementById(id);
          if (cb && cb.checked) { const p = parseInt(cb.dataset.price||0); items.push({description:label,amount:p}); total+=p; }
        });

      // ‚îÄ‚îÄ WEB DESIGN ‚îÄ‚îÄ
      } else if (serviceType === 'web-design') {
        const wdType = document.getElementById('wdType');
        if (wdType && wdType.value) items.push({ description: `Website Type: ${wdType.value}`, amount: 0 });

        const numPages = parseInt(document.getElementById('numPages').value) || pkg.minPages || pkg.basePages;
        const maxPg = pkg.maxPages || pkg.basePages;
        const minPg = pkg.minPages || 1;

        if (numPages <= maxPg) {
          items.push({ description: `Pages: ${numPages} of ${maxPg} included`, amount: 0 });
        } else {
          const extra = numPages - maxPg;
          const extraCost = extra * pkg.pricePerPage;
          items.push({ description: `Pages: ${maxPg} included in package`, amount: 0 });
          items.push({ description: `Extra Pages: ${extra} √ó ‚Ç±${pkg.pricePerPage.toLocaleString()} (beyond package max)`, amount: extraCost });
          total += extraCost;
        }
        [['wd-responsive','Mobile Responsive Design'],['wd-illustrations','Custom Illustrations'],['wd-logo','Logo Design'],['wd-motion','Animated / Motion Elements'],['wd-brandguide','Brand Style Guide'],['wd-darkmode','Dark Mode Design'],['wd-prototype','Clickable Prototype'],['wd-socialmedia','Social Media Kit']].forEach(([id, label]) => {
          const cb = document.getElementById(id);
          if (cb && cb.checked) { const p = parseInt(cb.dataset.price||0); items.push({description:label,amount:p}); total+=p; }
        });

      // ‚îÄ‚îÄ WEB DEVELOPMENT ‚îÄ‚îÄ
      } else if (serviceType === 'web-development') {
        const stack = document.getElementById('devStack');
        if (stack && stack.value) {
          const extra = parseInt(stack.options[stack.selectedIndex].dataset.extra || 0);
          items.push({ description: `Tech Stack: ${stack.value}`, amount: extra });
          total += extra;
        }
        const numPagesdev = parseInt(document.getElementById('numPagesdev').value) || pkg.minPages || pkg.basePages;
        const maxPgDev = pkg.maxPages || pkg.basePages;

        if (numPagesdev <= maxPgDev) {
          items.push({ description: `Pages: ${numPagesdev} of ${maxPgDev} included`, amount: 0 });
        } else {
          const extra = numPagesdev - maxPgDev;
          const extraCost = extra * pkg.pricePerPage;
          items.push({ description: `Pages: ${maxPgDev} included in package`, amount: 0 });
          items.push({ description: `Extra Pages: ${extra} √ó ‚Ç±${pkg.pricePerPage.toLocaleString()} (beyond package max)`, amount: extraCost });
          total += extraCost;
        }
        const maint = document.getElementById('devMaintenance');
        if (maint && maint.value && maint.value !== 'none') {
          const extra = parseInt(maint.options[maint.selectedIndex].dataset.extra || 0);
          items.push({ description: `Maintenance Plan: ${maint.value}`, amount: extra });
          total += extra;
        }
        [['dev-ecommerce','E-Commerce / Online Store'],['dev-cms','CMS Integration'],['dev-forms','Contact Form / Email Setup'],['dev-seo','SEO Optimization'],['dev-analytics','Analytics Integration'],['dev-ssl','SSL Certificate'],['dev-backup','Automated Backups'],['dev-hosting','Hosting & Domain Setup'],['dev-livechat','Live Chat Integration'],['dev-social','Social Media Integration'],['dev-speed','Speed Optimization']].forEach(([id, label]) => {
          const cb = document.getElementById(id);
          if (cb && cb.checked) { const p = parseInt(cb.dataset.price||0); items.push({description:label,amount:p}); total+=p; }
        });

      // ‚îÄ‚îÄ UI/UX DESIGN ‚îÄ‚îÄ
      } else if (serviceType === 'ui-ux-design') {
        const projectType = document.getElementById('uxProjectType');
        if (projectType && projectType.value) items.push({ description: `Project Type: ${projectType.value}`, amount: 0 });
        const deliverable = document.getElementById('uxDeliverable');
        if (deliverable && deliverable.value) {
          const extra = parseInt(deliverable.options[deliverable.selectedIndex].dataset.extra || 0);
          items.push({ description: `Deliverable: ${deliverable.value}`, amount: extra });
          total += extra;
        }
        const fidelity = document.getElementById('uxFidelity');
        if (fidelity && fidelity.value) items.push({ description: `Fidelity: ${fidelity.value}`, amount: 0 });
        const screens = document.getElementById('uxScreens');
        if (screens && screens.value) items.push({ description: `Screens: ${screens.value}`, amount: 0 });
        [['ux-research','User Research & Personas'],['ux-journey','User Journey Mapping'],['ux-ia','Information Architecture'],['ux-usability','Usability Testing Plan'],['ux-accessibility','Accessibility Audit (WCAG)'],['ux-microinteraction','Micro-Interaction Design'],['ux-handoff','Developer Handoff / Specs'],['ux-brand','Brand Integration']].forEach(([id, label]) => {
          const cb = document.getElementById(id);
          if (cb && cb.checked) { const p = parseInt(cb.dataset.price||0); items.push({description:label,amount:p}); total+=p; }
        });

      // ‚îÄ‚îÄ GENERIC fallback ‚îÄ‚îÄ
      } else {
        const numPages = parseInt((document.getElementById('numPages') || {}).value || 0) || pkg.basePages;
        if (numPages > pkg.basePages) {
          const extra = (numPages - pkg.basePages) * pkg.pricePerPage;
          items.push({ description: `Additional Pages (${numPages - pkg.basePages} √ó ‚Ç±${pkg.pricePerPage.toLocaleString()})`, amount: extra });
          total += extra;
        }
      }

      renderInvoice(items, total);
    }

    function renderInvoice(items, total) {
      const invoiceItemsEl = document.getElementById('invoiceItems');
      const currentKeys = new Set(items.map(i => i.description));

      // Convert total from PHP to current currency
      const totalUSD = convertPHPToUSD(total);

      invoiceItemsEl.innerHTML = items.map(item => {
        const isNew = !prevInvoiceKeys.has(item.description);
        const rowClass = isNew ? 'invoice-row-new' : '';

        // Convert item amounts from PHP to current currency
        const itemAmountUSD = convertPHPToUSD(item.amount);

        return `
          <tr class="${rowClass}">
            <td>${item.description}</td>
            <td style="text-align: right; font-weight: 600; color: ${item.amount === 0 ? '#9ca3af' : '#fff'};">
              ${item.amount === 0 ? 'Included' : formatPrice(itemAmountUSD)}
            </td>
          </tr>
        `;
      }).join('');

      prevInvoiceKeys = currentKeys;

      // Pulse the total
      const totalEl = document.getElementById('totalAmount');
      totalEl.textContent = formatPrice(totalUSD);
      totalEl.classList.remove('total-updating');
      void totalEl.offsetWidth; // reflow to restart animation
      totalEl.classList.add('total-updating');

      document.getElementById('invoiceDate').textContent = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
      document.getElementById('invoiceNumber').textContent = 'NGCS-2026-' + String(Math.floor(Math.random() * 9000) + 1000);
    }

    // =================== ORDER SUBMISSION ===================
    async function submitOrder(event) {
      if (!selectedPackage || !selectedCategory) {
        alert('Please select a service package first.');
        return;
      }

      const isManagerOrRenewal = selectedCategory === 'manager' || selectedCategory === 'renewal';

      if (!isManagerOrRenewal && !activeServiceType) {
        alert('Please select a service package first.');
        return;
      }

      if (activeServiceType === 'web-design' && !document.getElementById('numPages').value) {
        alert('Please enter the Number of Pages for Web Design.');
        return;
      }

      if (activeServiceType === 'web-development' && !document.getElementById('numPagesdev').value) {
        alert('Please enter the Number of Pages for Web Development.');
        return;
      }

      // Collect order data
      const orderData = collectOrderData();

      // Show loading state
      const btn = document.getElementById('placeOrderBtn');
      btn.textContent = '‚è≥ Sending Order...';
      btn.disabled = true;

      const orderDate = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

      // Build a clean readable order summary for the message body
      const itemsList = (() => {
        const rows = document.querySelectorAll('#invoiceItems tr');
        let lines = '';
        rows.forEach(row => {
          const cols = row.querySelectorAll('td');
          if (cols.length === 2) lines += `  ‚Ä¢ ${cols[0].textContent.trim()} ‚Äî ${cols[1].textContent.trim()}\n`;
        });
        return lines;
      })();

      // 1) Notification email to NexGenix
      const adminEmailParams = {
        to_name: 'Nex Genix Creative Solutions',
        to_email: 'nexgenixcreativesolutions@gmail.com',
        from_name: orderData.clientName,
        reply_to: orderData.clientEmail || 'no-reply@example.com',
        subject: `New Order Received ‚Äî ${orderData.invoiceNumber}`,
        message:
`üì¶ NEW ORDER RECEIVED
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Invoice #:    ${orderData.invoiceNumber}
Date:         ${orderDate}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
CLIENT DETAILS
Name:         ${orderData.clientName}
Email:        ${orderData.clientEmail || 'N/A'}
WhatsApp:     ${orderData.clientPhone || 'N/A'}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
ORDER DETAILS
Package:      ${orderData.packageName}
Service Type: ${activeServiceType || 'N/A'}
Currency:     ${currentCurrency}

Items:
${itemsList}
TOTAL:        ${orderData.totalAmount}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Please follow up with the client to confirm and process payment.`
      };

      // 2) Confirmation email to client
      const clientEmailParams = {
        to_name: orderData.clientName,
        to_email: orderData.clientEmail,
        from_name: 'Nex Genix Creative Solutions',
        reply_to: 'nexgenixcreativesolutions@gmail.com',
        subject: `Order Confirmation ‚Äî ${orderData.invoiceNumber}`,
        message:
`Dear ${orderData.clientName},

Thank you for placing your order with Nex Genix Creative Solutions! üéâ
We have received your request and will be in touch shortly to confirm details and process payment.

ORDER SUMMARY
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Invoice #:    ${orderData.invoiceNumber}
Package:      ${orderData.packageName}
Service Type: ${activeServiceType || 'N/A'}
Currency:     ${currentCurrency}
Date:         ${orderDate}

Items:
${itemsList}
TOTAL AMOUNT DUE: ${orderData.totalAmount}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Payment Terms: 50% downpayment to start, 50% upon completion
Payment Methods: GCash, Bank Transfer, PayMaya

If you have any questions, feel free to reply to this email or reach us at nexgenixcreativesolutions@gmail.com.

Best regards,
Nex Genix Creative Solutions Team`
      };

      try {
        // Send notification to NexGenix using "Contact Us" template
        const adminResponse = await emailjs.send(
          EMAILJS_CONFIG.serviceID,
          EMAILJS_CONFIG.adminTemplateID,
          adminEmailParams
        );
        console.log('Admin notification sent:', adminResponse);

        // Send confirmation to client using "Order Confirmation" template
        if (orderData.clientEmail && orderData.clientEmail.includes('@')) {
          try {
            const clientResponse = await emailjs.send(
              EMAILJS_CONFIG.serviceID,
              EMAILJS_CONFIG.clientTemplateID,
              clientEmailParams
            );
            console.log('Client confirmation sent:', clientResponse);
          } catch (clientErr) {
            console.warn('Client confirmation email failed (order still submitted):', clientErr);
          }
        }

        // Show success state
        btn.textContent = '‚úÖ Order Placed!';
        btn.style.background = 'linear-gradient(135deg, rgba(57,255,20,0.3), rgba(57,255,20,0.15))';
        btn.style.borderColor = 'var(--neon)';
        btn.style.color = 'var(--neon)';
        btn.disabled = true;
        document.getElementById('orderSuccessBanner').style.display = 'block';
        document.getElementById('newPurchaseBtn').style.display = 'block';
        document.getElementById('orderSuccessBanner').scrollIntoView({ behavior: 'smooth', block: 'center' });

      } catch (error) {
        console.error('EmailJS Error:', error);

        // Fallback to mailto if EmailJS fails
        const subject = encodeURIComponent(`New Order - ${orderData.invoiceNumber}`);
        const body = encodeURIComponent(`
Order Details:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Client: ${orderData.clientName}
Package: ${orderData.packageName}
Total Amount: ${orderData.totalAmount}
Currency: ${currentCurrency}
Invoice #: ${orderData.invoiceNumber}
Date: ${new Date().toLocaleDateString()}

Please contact this client to process their order.

Full order details:
${JSON.stringify(orderData, null, 2)}
        `);

        const mailto = `mailto:nexgenixcreativesolutions@gmail.com?subject=${subject}&body=${body}`;
        window.open(mailto, '_blank');

        btn.textContent = '‚ö†Ô∏è Retry ‚Äî Send via Email';
        btn.disabled = false;
        btn.style.background = 'rgba(255,64,64,0.15)';
        btn.style.borderColor = 'var(--red)';
        btn.style.color = 'var(--red)';
      }
    }

    function startNewPurchase() {
      // Reset invoice section
      selectedPackage = null;
      selectedCategory = null;
      document.getElementById('invoiceSection').style.display = 'none';
      document.getElementById('orderSuccessBanner').style.display = 'none';
      document.getElementById('newPurchaseBtn').style.display = 'none';
      const btn = document.getElementById('placeOrderBtn');
      btn.textContent = 'üõí Place Order';
      btn.disabled = false;
      btn.style.background = '';
      btn.style.borderColor = '';
      btn.style.color = '';
      // Scroll to top of services
      document.querySelector('.main-content').scrollTo({ top: 0, behavior: 'smooth' });
      window.scrollTo({ top: 0, behavior: 'smooth' });
      // Re-highlight no package selected
      document.querySelectorAll('.package-card').forEach(c => c.classList.remove('selected'));
    }

    function collectOrderData() {
      const pkg = servicePackages[selectedCategory][selectedPackage];

      // Collect all invoice items
      const invoiceItems = [];
      const itemRows = document.querySelectorAll('#invoiceItems tr');
      itemRows.forEach(row => {
        const cols = row.querySelectorAll('td');
        if (cols.length === 2) {
          invoiceItems.push({
            description: cols[0].textContent.trim(),
            amount: cols[1].textContent.trim()
          });
        }
      });

      return {
        invoiceNumber: document.getElementById('invoiceNumber').textContent,
        clientName: document.getElementById('clientNameInput').value,
        clientEmail: document.getElementById('invoiceEmailInput').value || document.getElementById('emailInput').value,
        clientPhone: getFullWhatsApp(),
        packageName: pkg.name,
        packagePrice: formatPrice(convertPHPToUSD(pkg.price)),
        category: selectedCategory,
        serviceType: activeServiceType,
        totalAmount: document.getElementById('totalAmount').textContent,
        currency: currentCurrency,
        invoiceItems: invoiceItems,
        timestamp: new Date().toISOString()
      };
    }

    function downloadInvoice() {
      if (!selectedPackage || !selectedCategory) {
        alert('Please select a service package first to generate an invoice.');
        return;
      }

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ unit: 'mm', format: 'a4' });
      const W = 210; // page width mm

      // ‚îÄ‚îÄ Color palette (print-friendly) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      const black      = [15,  20,  30];
      const darkGray   = [55,  65,  81];
      const midGray    = [107, 114, 128];
      const lightGray  = [229, 231, 235];
      const veryLight  = [248, 249, 250];
      const accentGreen= [22,  163, 74];   // deep green ‚Äî readable on white
      const accentDark = [15,  118, 110];
      const white      = [255, 255, 255];

      const invoiceNum   = document.getElementById('invoiceNumber').textContent;
      const invoiceDate  = document.getElementById('invoiceDate').textContent;
      const clientName   = document.getElementById('clientNameInput').value || 'Valued Client';
      const clientEmail  = document.getElementById('invoiceEmailInput').value || document.getElementById('emailInput').value || '';
      const clientPhone  = getFullWhatsApp();
      const totalAmountText = document.getElementById('totalAmount').textContent;

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // HEADER BAND
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      doc.setFillColor(15, 20, 30);
      doc.rect(0, 0, W, 38, 'F');

      // Company name
      doc.setTextColor(...white);
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(20);
      doc.text('NEX GENIX', 16, 17);
      doc.setFont('helvetica', 'normal');
      doc.setFontSize(9);
      doc.setTextColor(156, 163, 175);
      doc.text('CREATIVE SOLUTIONS', 16, 23);

      // Green accent bar under tagline
      doc.setFillColor(...accentGreen);
      doc.rect(16, 25.5, 38, 1.2, 'F');

      // INVOICE label (right side)
      doc.setTextColor(...white);
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(26);
      doc.text('INVOICE', W - 16, 20, { align: 'right' });
      doc.setFontSize(8.5);
      doc.setFont('helvetica', 'normal');
      doc.setTextColor(156, 163, 175);
      doc.text(`# ${invoiceNum}`, W - 16, 27, { align: 'right' });

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // META ROW ‚Äî date + status badge
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      doc.setFillColor(...veryLight);
      doc.rect(0, 38, W, 14, 'F');
      doc.setTextColor(...midGray);
      doc.setFont('helvetica', 'normal');
      doc.setFontSize(8.5);
      doc.text(`Date Issued: ${invoiceDate}`, 16, 46);
      doc.text(`Currency: ${currencySymbols[currentCurrency]} ${currentCurrency}`, 85, 46);

      // Status badge
      doc.setFillColor(...accentGreen);
      doc.roundedRect(W - 46, 40, 30, 9, 2, 2, 'F');
      doc.setTextColor(...white);
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(8);
      doc.text('PENDING PAYMENT', W - 31, 45.5, { align: 'center' });

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // BILL TO / ISSUED BY ‚Äî two column cards
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      let y = 62;

      // Left card: Bill To
      doc.setFillColor(...veryLight);
      doc.roundedRect(14, y, 84, 34, 2, 2, 'F');
      doc.setFillColor(...accentGreen);
      doc.roundedRect(14, y, 84, 8, 2, 2, 'F');
      doc.rect(14, y + 4, 84, 4, 'F'); // square bottom corners on top band
      doc.setTextColor(...white);
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(7.5);
      doc.text('BILL TO', 21, y + 5.5);

      doc.setTextColor(...black);
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(10);
      doc.text(clientName, 21, y + 16);
      doc.setFont('helvetica', 'normal');
      doc.setFontSize(8.5);
      doc.setTextColor(...darkGray);
      if (clientEmail) { doc.text(clientEmail, 21, y + 22); }
      if (clientPhone) {
        doc.setTextColor(22, 163, 74);
        doc.text(`WhatsApp: ${clientPhone}`, 21, y + 28);
      }

      // Right card: Issued By
      doc.setFillColor(...veryLight);
      doc.roundedRect(112, y, 84, 34, 2, 2, 'F');
      doc.setFillColor(15, 20, 30);
      doc.roundedRect(112, y, 84, 8, 2, 2, 'F');
      doc.rect(112, y + 4, 84, 4, 'F');
      doc.setTextColor(...white);
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(7.5);
      doc.text('ISSUED BY', 119, y + 5.5);

      doc.setTextColor(...black);
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(10);
      doc.text('Nex Genix Creative Solutions', 119, y + 16);
      doc.setFont('helvetica', 'normal');
      doc.setFontSize(8.5);
      doc.setTextColor(...darkGray);
      doc.text('nexgenixcreativesolutions@gmail.com', 119, y + 22);
      doc.text('Philippines', 119, y + 28);

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // ITEMS TABLE
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      y += 42;

      // Table header
      doc.setFillColor(15, 20, 30);
      doc.rect(14, y, 182, 9, 'F');
      doc.setTextColor(...white);
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(8.5);
      doc.text('DESCRIPTION', 20, y + 6);
      doc.text('AMOUNT', W - 18, y + 6, { align: 'right' });

      y += 9;
      const items = document.querySelectorAll('#invoiceItems tr');
      let rowIndex = 0;

      items.forEach((row) => {
        const cols = row.querySelectorAll('td');
        if (cols.length !== 2) return;

        const desc   = cols[0].textContent.trim();
        const amount = cols[1].textContent.trim();

        // Alternate row shading
        if (rowIndex % 2 === 0) {
          doc.setFillColor(255, 255, 255);
        } else {
          doc.setFillColor(248, 250, 248);
        }

        const splitDesc = doc.splitTextToSize(desc, 140);
        const rowH = Math.max(8, splitDesc.length * 5 + 3);

        doc.rect(14, y, 182, rowH, 'F');

        // Left border accent
        doc.setFillColor(...accentGreen);
        doc.rect(14, y, 1.5, rowH, 'F');

        doc.setTextColor(...darkGray);
        doc.setFont('helvetica', 'normal');
        doc.setFontSize(8.5);
        doc.text(splitDesc, 20, y + 5.5);

        doc.setFont('helvetica', 'bold');
        doc.setTextColor(...black);
        doc.text(amount, W - 18, y + 5.5, { align: 'right' });

        // Bottom border line
        doc.setDrawColor(...lightGray);
        doc.setLineWidth(0.3);
        doc.line(14, y + rowH, 196, y + rowH);

        y += rowH;
        rowIndex++;
      });

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // TOTAL BOX
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      y += 6;

      // Outer total area
      doc.setFillColor(15, 20, 30);
      doc.roundedRect(112, y, 84, 22, 3, 3, 'F');

      doc.setTextColor(156, 163, 175);
      doc.setFont('helvetica', 'normal');
      doc.setFontSize(7.5);
      doc.text('TOTAL AMOUNT DUE', 196, y + 8, { align: 'right' });

      doc.setTextColor(...white);
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(18);
      doc.text(totalAmountText, 196, y + 18, { align: 'right' });

      // Subtotal label (left side of total row)
      doc.setTextColor(...midGray);
      doc.setFont('helvetica', 'normal');
      doc.setFontSize(8);
      doc.text(`Service: ${document.getElementById('clientNameInput').value || 'Valued Client'}`, 16, y + 10);
      doc.text(`Package: ${selectedPackage ? servicePackages[selectedCategory][selectedPackage].name : ''}`, 16, y + 16);

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // PAYMENT INFO BOX
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      y += 30;
      doc.setFillColor(240, 253, 244); // very light green
      doc.setDrawColor(...accentGreen);
      doc.setLineWidth(0.5);
      doc.roundedRect(14, y, 182, 22, 2, 2, 'FD');

      doc.setTextColor(...accentDark);
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(8.5);
      doc.text('PAYMENT INFORMATION', 20, y + 7);

      doc.setFont('helvetica', 'normal');
      doc.setTextColor(...darkGray);
      doc.setFontSize(8);
      doc.text('Terms: 50% downpayment to start ¬∑ 50% upon project completion', 20, y + 13);
      doc.text('Methods: GCash  ¬∑  Bank Transfer  ¬∑  PayMaya', 20, y + 18.5);

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // FOOTER
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      const footerY = 278;
      doc.setFillColor(...lightGray);
      doc.rect(0, footerY - 2, W, 0.4, 'F');

      doc.setTextColor(...midGray);
      doc.setFont('helvetica', 'normal');
      doc.setFontSize(7.5);
      doc.text('Thank you for choosing Nex Genix Creative Solutions!', W / 2, footerY + 4, { align: 'center' });
      doc.text('nexgenixcreativesolutions@gmail.com  ¬∑  Philippines', W / 2, footerY + 9, { align: 'center' });
      doc.setFontSize(7);
      doc.text(`¬© ${new Date().getFullYear()} Nex Genix Creative Solutions. All Rights Reserved.`, W / 2, footerY + 14, { align: 'center' });

      // Save
      const filename = `NexGenix_Invoice_${invoiceNum.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`;
      doc.save(filename);
    }

    // =================== USER PROFILE ===================
    async function saveProfile() {
      const displayName = document.getElementById('displayNameInput').value;
      const username = document.getElementById('usernameInput').value;
      const phoneCode = document.getElementById('phoneCode').value;
      const phoneNum = document.getElementById('phoneNumber').value;
      const fullPhone = phoneNum ? `${phoneCode}${phoneNum.replace(/\s/g,'')}`  : '';

      // Sync to invoice
      syncSettingsPhoneToInvoice();

      alert('Profile updated successfully!' + (fullPhone ? `\nWhatsApp: ${fullPhone}` : ''));
    }

    async function updatePassword() {
      const newPassword = document.getElementById('passwordInput').value;
      if (!newPassword || newPassword.length < 6) {
        alert('Password must be at least 6 characters.');
        return;
      }

      alert('Password updated successfully!');
      document.getElementById('passwordInput').value = '';
    }

    function logout() {
      window.location.href = 'https://nexgenixcreativesolutions.github.io/login-signup';
    }

    // =================== BOTTOM NAV ACTIVE STATE ===================
    function setBottomActive(el) {
      document.querySelectorAll('.bottom-nav-item').forEach(btn => btn.classList.remove('active'));
      el.classList.add('active');
    }



    // =================== INITIALIZE ===================
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
      document.querySelector('.main-content')?.scrollTo({ top: 0, behavior: 'smooth' });
    }

    document.addEventListener('DOMContentLoaded', function() {
      createFloatingCodeBackground();
      loadServices();
      populatePhoneDropdowns();

      // Go to top button visibility
      window.addEventListener('scroll', () => {
        document.getElementById('goTopBtn').style.display = window.scrollY > 300 ? 'block' : 'none';
      });
      const mainContent = document.querySelector('.main-content');
      if (mainContent) {
        mainContent.addEventListener('scroll', () => {
          document.getElementById('goTopBtn').style.display = mainContent.scrollTop > 300 ? 'block' : 'none';
        });
      }

      // Set user info
      document.getElementById('clientNameInput').value = 'Valued Client';
      document.getElementById('displayNameInput').value = 'Valued Client';
      document.getElementById('emailInput').value = 'client@example.com';
      document.getElementById('invoiceEmailInput').value = 'client@example.com';

      // Sync settings phone to invoice whenever settings phone changes
      document.getElementById('phoneCode').addEventListener('change', syncSettingsPhoneToInvoice);
      document.getElementById('phoneNumber').addEventListener('input', syncSettingsPhoneToInvoice);
    });
  </script>
  <!-- Go to Top Button -->
  <button id="goTopBtn" onclick="scrollToTop()" title="Back to top" style="
    display:none; position:fixed; bottom:80px; right:1rem; z-index:999;
    width:42px; height:42px; border-radius:50%;
    background:linear-gradient(135deg,rgba(57,255,20,0.25),rgba(57,255,20,0.08));
    border:1.5px solid var(--neon); color:var(--neon);
    font-size:1.1rem; cursor:pointer; box-shadow:0 0 14px rgba(57,255,20,0.25);
    transition:all 0.2s; backdrop-filter:blur(6px);
  ">‚ñ≤</button>

</body>
</html>