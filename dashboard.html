<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Service Dashboard | Nex Genix Creative Solutions</title>
  <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&family=Orbitron:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    /* =================== GLOBAL RESET & BASE =================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Montserrat Alternates', sans-serif;
      background-color: #000;
      color: #fff;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* =================== FLOATING CODE BACKGROUND =================== */
    .floating-code-container {
      position: fixed;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
      z-index: 0;
    }

    .code-line {
      position: absolute;
      white-space: nowrap;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      color: rgba(57, 255, 20, 0.4);
      text-shadow: 0 0 10px rgba(57, 255, 20, 0.3);
      animation: floatCode linear infinite;
      opacity: 0;
    }

    @keyframes floatCode {
      0% {
        transform: translateX(100vw);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateX(-100%);
        opacity: 0;
      }
    }

    /* =================== LAYOUT =================== */
    .dashboard-wrapper {
      display: flex;
      min-height: 100vh;
    }

    /* =================== SIDEBAR =================== */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 280px;
      height: 100vh;
      background: linear-gradient(180deg, #0a0a0a 0%, #000000 100%);
      border-right: 2px solid #39FF14;
      box-shadow: 5px 0 25px rgba(57, 255, 20, 0.15);
      padding: 2rem 1.5rem;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      z-index: 100;
      overflow-y: auto;
      transition: transform 0.3s ease;
    }

    .sidebar-logo {
      width: 140px;
      margin-bottom: 2.5rem;
    }

    .sidebar-menu {
      list-style: none;
      flex: 1;
    }

    .sidebar-menu li {
      padding: 0.875rem 1rem;
      margin-bottom: 0.5rem;
      border-radius: 0.75rem;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.95rem;
      font-weight: 500;
      border: 1px solid transparent;
    }

    .sidebar-menu li:hover {
      background: rgba(57, 255, 20, 0.1);
      border-color: #39FF14;
      transform: translateX(5px);
    }

    .sidebar-menu li.active {
      background: rgba(57, 255, 20, 0.15);
      border-color: #39FF14;
      color: #39FF14;
    }

    .sidebar-footer {
      font-size: 0.7rem;
      color: #666;
      text-align: center;
      padding-top: 1rem;
      border-top: 1px solid #1f2937;
      font-family: 'Courier New', monospace;
    }

    /* =================== MAIN CONTENT =================== */
    .main-content {
      margin-left: 280px;
      flex: 1;
      padding: 2rem;
      position: relative;
      z-index: 1;
      width: 100%;
      max-width: 100vw;
    }

    /* =================== TOP NAVIGATION =================== */
    .top-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2.5rem;
      padding: 1.25rem 1.5rem;
      background: linear-gradient(135deg, rgba(17, 24, 39, 0.5), rgba(0, 0, 0, 0.7));
      border: 1px solid #39FF14;
      border-radius: 1rem;
      box-shadow: 0 10px 30px rgba(57, 255, 20, 0.1);
      flex-wrap: wrap;
      gap: 1rem;
    }

    .datetime {
      font-size: 0.9rem;
      color: #9ca3af;
      font-family: 'Courier New', monospace;
    }

    .top-nav-buttons {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .nav-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      border-radius: 0.75rem;
      border: 1px solid;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Montserrat Alternates', sans-serif;
      font-size: 0.9rem;
      text-decoration: none;
      white-space: nowrap;
    }

    .home-btn {
      position: relative;
      border-color: #ffff00;
      color: #ffff00;
      background: transparent;
    }

    .home-btn:hover {
      background: #ffff00;
      color: #000;
      box-shadow: 0 5px 20px rgba(255, 255, 0, 0.3);
    }

    .logout-btn {
      border-color: #ff0000;
      color: #ff0000;
      background: transparent;
    }

    .logout-btn:hover {
      background: #ff0000;
      color: #fff;
      box-shadow: 0 5px 20px rgba(255, 0, 0, 0.3);
    }

    .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown-menu {
      position: absolute;
      top: 110%;
      right: 0;
      min-width: 280px;
      background: #0a0a0a;
      border: 1px solid #ffff00;
      border-radius: 0.75rem;
      padding: 0.5rem;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .dropdown:hover .dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .dropdown-menu a {
      display: block;
      padding: 0.875rem 1.25rem;
      color: #fff;
      text-decoration: none;
      border-radius: 0.5rem;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .dropdown-menu a:hover {
      background: rgba(255, 255, 0, 0.1);
      color: #ffff00;
    }

    /* =================== CONTENT SECTIONS =================== */
    .content-section {
      display: none;
    }

    .content-section.active {
      display: block;
    }

    .welcome-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 2rem;
      background: linear-gradient(to right, #ff0000, #ffff00, #39FF14);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-align: center;
    }

    .content-box {
      background: linear-gradient(135deg, rgba(17, 24, 39, 0.5), rgba(0, 0, 0, 0.7));
      border: 1px solid #1f2937;
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      margin-bottom: 2rem;
    }

    .content-box h2 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      color: #39FF14;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    /* =================== ORDER TYPE SELECTOR =================== */
    .order-type-selector {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 3rem;
      flex-wrap: wrap;
    }

    .order-type-btn {
      padding: 1rem 2rem;
      border-radius: 0.75rem;
      border: 2px solid #444;
      background: rgba(0, 0, 0, 0.5);
      color: #fff;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Orbitron', sans-serif;
      min-width: 200px;
    }

    .order-type-btn:hover {
      border-color: #39FF14;
      background: rgba(57, 255, 20, 0.1);
    }

    .order-type-btn.active {
      border-color: #39FF14;
      background: rgba(57, 255, 20, 0.2);
      color: #39FF14;
      box-shadow: 0 0 20px rgba(57, 255, 20, 0.3);
    }

    /* =================== PACKAGE CATEGORIES =================== */
    .package-category {
      margin-bottom: 3rem;
    }

    .category-header {
      background: linear-gradient(135deg, rgba(57, 255, 20, 0.2), rgba(0, 0, 0, 0.5));
      border: 2px solid #39FF14;
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .category-header h3 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.8rem;
      color: #39FF14;
      text-shadow: 0 0 15px rgba(57, 255, 20, 0.6);
      margin-bottom: 0.5rem;
    }

    .category-header p {
      color: #d1d5db;
      font-size: 0.95rem;
    }

    /* =================== SERVICE SELECTION =================== */
    .service-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .service-card {
      background: linear-gradient(135deg, rgba(17, 24, 39, 0.8), rgba(0, 0, 0, 0.9));
      border: 2px solid #1f2937;
      border-radius: 1rem;
      padding: 1.5rem;
      transition: all 0.3s ease;
      position: relative;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .service-card:hover {
      border-color: #39FF14;
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(57, 255, 20, 0.2);
    }

    .service-card.selected {
      border-color: #39FF14;
      background: linear-gradient(135deg, rgba(57, 255, 20, 0.15), rgba(0, 0, 0, 0.9));
      box-shadow: 0 0 30px rgba(57, 255, 20, 0.3);
    }

    .service-card h3 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.2rem;
      color: #39FF14;
      margin-bottom: 0.5rem;
      line-height: 1.3;
    }

    .service-card .price {
      font-size: 1.8rem;
      font-weight: 700;
      color: #ffff00;
      margin: 1rem 0;
      font-family: 'Orbitron', sans-serif;
    }

    .service-card .price-info {
      color: #9ca3af;
      font-size: 0.85rem;
      margin-bottom: 1rem;
      line-height: 1.4;
    }

    .service-card ul {
      list-style: none;
      margin-top: 1rem;
      flex-grow: 1;
    }

    .service-card ul li {
      padding: 0.5rem 0;
      font-size: 0.9rem;
      color: #d1d5db;
      line-height: 1.4;
    }

    .service-card ul li:before {
      content: "‚úì ";
      color: #39FF14;
      font-weight: bold;
      margin-right: 0.5rem;
    }

    .service-card ul li.excluded:before {
      content: "‚úó ";
      color: #ff0000;
    }

    .service-card .best-for {
      color: #ffff00;
      font-size: 0.85rem;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid #333;
    }

    .service-card .select-btn {
      width: 100%;
      background: #39FF14;
      color: #000;
      padding: 0.875rem 1.5rem;
      border: none;
      border-radius: 0.75rem;
      font-weight: 700;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Montserrat Alternates', sans-serif;
      text-transform: uppercase;
      margin-top: 1rem;
    }

    .service-card .select-btn:hover {
      background: #2ee80f;
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(57, 255, 20, 0.4);
    }

    .service-card.selected .select-btn {
      background: #ffff00;
      color: #000;
    }

    /* =================== CUSTOMIZATION PANEL =================== */
    .customization-panel {
      background: linear-gradient(135deg, rgba(17, 24, 39, 0.5), rgba(0, 0, 0, 0.7));
      border: 1px solid #39FF14;
      border-radius: 1rem;
      padding: 2rem;
      margin-bottom: 2rem;
    }

    .customization-panel h2 {
      color: #39FF14;
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 1.5rem;
      text-align: center;
      font-size: 1.5rem;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #39FF14;
      font-size: 0.9rem;
    }

    .input, .select, textarea {
      width: 100%;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid #444;
      border-radius: 0.75rem;
      color: #fff;
      font-family: 'Montserrat Alternates', sans-serif;
      font-size: 0.95rem;
      transition: all 0.3s ease;
    }

    textarea {
      resize: vertical;
      min-height: 100px;
    }

    .input:focus, .select:focus, textarea:focus {
      outline: none;
      border-color: #39FF14;
      box-shadow: 0 0 0 3px rgba(57, 255, 20, 0.2);
    }

    .checkbox-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 0.5rem;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid #444;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .checkbox-item:hover {
      border-color: #39FF14;
      background: rgba(57, 255, 20, 0.1);
    }

    .checkbox-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: #39FF14;
    }

    .checkbox-item label {
      color: #fff;
      cursor: pointer;
      margin: 0;
      font-size: 0.9rem;
    }

    /* =================== INVOICE PREVIEW =================== */
    .invoice-preview {
      background: #000;
      border: 2px solid #39FF14;
      border-radius: 1rem;
      padding: 2rem;
      box-shadow: 0 0 40px rgba(57, 255, 20, 0.2);
    }

    .invoice-header {
      border-bottom: 2px solid #39FF14;
      padding-bottom: 1.5rem;
      margin-bottom: 2rem;
    }

    .invoice-header h2 {
      font-family: 'Orbitron', sans-serif;
      font-size: 2rem;
      color: #39FF14;
      text-shadow: 0 0 10px rgba(57, 255, 20, 0.5);
      text-align: center;
    }

    .invoice-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin: 1.5rem 0;
      font-size: 0.95rem;
    }

    .invoice-info div {
      padding: 0.5rem;
    }

    .invoice-info strong {
      color: #ffff00;
    }

    .invoice-table {
      width: 100%;
      margin-bottom: 2rem;
      border-collapse: collapse;
      overflow-x: auto;
      display: block;
    }

    .invoice-table table {
      width: 100%;
      min-width: 500px;
    }

    .invoice-table thead {
      background: rgba(57, 255, 20, 0.1);
      border-bottom: 2px solid #39FF14;
    }

    .invoice-table th {
      padding: 1rem;
      text-align: left;
      font-family: 'Orbitron', sans-serif;
      color: #39FF14;
      font-size: 0.9rem;
    }

    .invoice-table td {
      padding: 1rem;
      border-bottom: 1px solid #333;
      font-size: 0.9rem;
    }

    .invoice-table tr:hover {
      background: rgba(57, 255, 20, 0.05);
    }

    .invoice-total {
      text-align: center;
      padding: 2rem 1.5rem;
      background: linear-gradient(135deg, rgba(57, 255, 20, 0.15), rgba(0, 0, 0, 0.5));
      border-radius: 0.75rem;
      border: 2px solid #39FF14;
      margin-bottom: 2rem;
    }

    .invoice-total .total-label {
      font-size: 1.2rem;
      color: #ffff00;
      font-weight: 700;
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 1rem;
    }

    .invoice-total .total-amount {
      font-size: 2.5rem;
      color: #39FF14;
      font-weight: 800;
      font-family: 'Orbitron', sans-serif;
      text-shadow: 0 0 20px rgba(57, 255, 20, 0.5);
    }

    /* =================== BUTTONS =================== */
    .button {
      width: 100%;
      background: #39FF14;
      color: #000;
      padding: 1rem 1.5rem;
      border: none;
      border-radius: 0.75rem;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Montserrat Alternates', sans-serif;
      text-transform: uppercase;
    }

    .button:hover:not(:disabled) {
      background: #2ee80f;
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(57, 255, 20, 0.4);
    }

    .button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .button-secondary {
      background: transparent;
      border: 2px solid #ffff00;
      color: #ffff00;
    }

    .button-secondary:hover:not(:disabled) {
      background: #ffff00;
      color: #000;
      box-shadow: 0 5px 20px rgba(255, 255, 0, 0.4);
    }

    .button-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 2rem;
    }

    .divider {
      border: none;
      height: 1px;
      background: #333;
      margin: 2rem 0;
    }

    /* =================== SETTINGS =================== */
    .input:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* =================== SMART PAGE COUNTER =================== */
    .page-counter-wrap {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .page-counter {
      display: flex;
      align-items: center;
      gap: 0;
      background: rgba(0,0,0,0.5);
      border: 1px solid #444;
      border-radius: 0.75rem;
      overflow: hidden;
      transition: border-color 0.2s;
    }

    .page-counter:focus-within {
      border-color: #39FF14;
      box-shadow: 0 0 0 3px rgba(57,255,20,0.2);
    }

    .page-counter.at-max {
      border-color: #ffff00;
    }

    .page-counter.over-max {
      border-color: #ff6600;
    }

    .page-counter-btn {
      background: rgba(57,255,20,0.1);
      border: none;
      color: #39FF14;
      font-size: 1.3rem;
      font-weight: 700;
      width: 44px;
      height: 48px;
      cursor: pointer;
      transition: background 0.15s;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .page-counter-btn:hover:not(:disabled) {
      background: rgba(57,255,20,0.25);
    }

    .page-counter-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .page-counter-input {
      flex: 1;
      background: transparent;
      border: none;
      color: #fff;
      font-family: 'Orbitron', sans-serif;
      font-size: 1.1rem;
      font-weight: 700;
      text-align: center;
      outline: none;
      padding: 0;
      min-width: 0;
    }

    .page-counter-hint {
      font-size: 0.78rem;
      color: #6b7280;
      padding-left: 0.25rem;
      transition: color 0.2s;
    }

    .page-counter-hint.hint-included {
      color: #39FF14;
    }

    .page-counter-hint.hint-extra {
      color: #ffff00;
    }

    .page-counter-hint.hint-overage {
      color: #ff6600;
    }

    .page-counter-hint.hint-fixed {
      color: #9ca3af;
      font-style: italic;
    }

    /* =================== SERVICE TYPE BADGE (auto-detected) =================== */
    .service-type-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1.2rem;
      background: rgba(57, 255, 20, 0.12);
      border: 1.5px solid #39FF14;
      border-radius: 999px;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.8rem;
      color: #39FF14;
      margin-bottom: 1.5rem;
      letter-spacing: 0.05em;
    }

    /* =================== BUSINESS QUESTIONNAIRE =================== */
    .biz-questionnaire {
      background: linear-gradient(135deg, rgba(57,255,20,0.05), rgba(0,0,0,0.3));
      border: 1px solid rgba(57,255,20,0.3);
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .biz-questionnaire h3 {
      font-family: 'Orbitron', sans-serif;
      font-size: 0.95rem;
      color: #ffff00;
      margin-bottom: 1.2rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .biz-tags-label {
      display: block;
      font-size: 0.82rem;
      color: #9ca3af;
      margin-bottom: 0.75rem;
      font-weight: 600;
    }

    .biz-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1.2rem;
    }

    .biz-tag {
      padding: 0.45rem 1rem;
      border-radius: 999px;
      border: 1.5px solid #333;
      background: rgba(0,0,0,0.4);
      color: #9ca3af;
      font-size: 0.82rem;
      cursor: pointer;
      transition: all 0.2s ease;
      user-select: none;
    }

    .biz-tag:hover {
      border-color: #39FF14;
      color: #fff;
    }

    .biz-tag.selected {
      border-color: #39FF14;
      background: rgba(57,255,20,0.15);
      color: #39FF14;
      font-weight: 600;
    }

    .biz-tag.selected::before {
      content: '‚úì ';
    }

    /* =================== IMPROVED MULTI-SELECT TOGGLES =================== */
    .toggle-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 0.75rem;
      margin-top: 0.5rem;
    }

    .toggle-item {
      position: relative;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      padding: 0.875rem 1rem;
      background: rgba(0, 0, 0, 0.5);
      border: 1.5px solid #333;
      border-radius: 0.75rem;
      cursor: pointer;
      transition: all 0.2s ease;
      user-select: none;
    }

    .toggle-item:hover {
      border-color: #39FF14;
      background: rgba(57, 255, 20, 0.06);
    }

    .toggle-item.selected {
      border-color: #39FF14;
      background: rgba(57, 255, 20, 0.12);
    }

    .toggle-item input[type="checkbox"] {
      display: none;
    }

    .toggle-check {
      width: 20px;
      height: 20px;
      min-width: 20px;
      border-radius: 5px;
      border: 2px solid #444;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      margin-top: 1px;
    }

    .toggle-item.selected .toggle-check {
      background: #39FF14;
      border-color: #39FF14;
    }

    .toggle-check::after {
      content: '';
      display: none;
    }

    .toggle-item.selected .toggle-check::after {
      content: '‚úì';
      display: block;
      color: #000;
      font-size: 12px;
      font-weight: 800;
      line-height: 1;
    }

    .toggle-text {
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }

    .toggle-name {
      font-size: 0.88rem;
      color: #e5e7eb;
      font-weight: 500;
      line-height: 1.3;
    }

    .toggle-item.selected .toggle-name {
      color: #fff;
    }

    .toggle-price {
      font-size: 0.78rem;
      color: #39FF14;
      font-weight: 700;
    }

    /* section divider inside customization panel */
    .panel-section-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 0.78rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #6b7280;
      padding: 0.5rem 0 0.75rem;
      border-bottom: 1px solid #1f2937;
      margin-bottom: 1.25rem;
    }

    /* =================== SERVICE TYPE FILTER TABS =================== */
    .service-filter-bar {
      display: flex;
      gap: 0.75rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 2.5rem;
      padding: 1.25rem 1.5rem;
      background: linear-gradient(135deg, rgba(17, 24, 39, 0.6), rgba(0, 0, 0, 0.8));
      border: 1px solid #1f2937;
      border-radius: 1rem;
    }

    .service-filter-bar .filter-label {
      width: 100%;
      text-align: center;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.75rem;
      color: #6b7280;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      margin-bottom: 0.5rem;
    }

    .filter-tab {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.65rem 1.4rem;
      border-radius: 999px;
      border: 2px solid #333;
      background: rgba(0,0,0,0.5);
      color: #9ca3af;
      font-size: 0.88rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s ease;
      font-family: 'Montserrat Alternates', sans-serif;
      white-space: nowrap;
    }

    .filter-tab:hover {
      border-color: #39FF14;
      color: #fff;
      background: rgba(57, 255, 20, 0.08);
    }

    .filter-tab.active {
      border-color: #39FF14;
      background: rgba(57, 255, 20, 0.18);
      color: #39FF14;
      box-shadow: 0 0 16px rgba(57, 255, 20, 0.3);
    }

    .filter-tab .tab-icon {
      font-size: 1rem;
    }

    /* =================== PACKAGE CATEGORY VISIBILITY =================== */
    .package-category {
      transition: opacity 0.25s ease;
    }
    .package-category.hidden {
      display: none;
    }

    /* =================== INVOICE ENHANCEMENTS =================== */
    .invoice-client-edit {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .invoice-client-edit input {
      background: rgba(57, 255, 20, 0.06);
      border: 1px solid #39FF14;
      border-radius: 0.4rem;
      color: #fff;
      font-family: 'Montserrat Alternates', sans-serif;
      font-size: 0.95rem;
      padding: 0.3rem 0.6rem;
      width: 180px;
      outline: none;
      transition: box-shadow 0.2s;
    }

    .invoice-client-edit input:focus {
      box-shadow: 0 0 0 2px rgba(57, 255, 20, 0.3);
    }

    .edit-icon {
      color: #39FF14;
      font-size: 0.85rem;
      cursor: default;
      opacity: 0.7;
    }

    /* Row highlight animation when added */
    @keyframes rowFlash {
      0%   { background: rgba(57, 255, 20, 0.22); }
      100% { background: transparent; }
    }

    .invoice-row-new {
      animation: rowFlash 0.8s ease-out forwards;
    }

    /* Live total pulse */
    @keyframes totalPulse {
      0%   { text-shadow: 0 0 8px rgba(57, 255, 20, 0.8); }
      100% { text-shadow: 0 0 20px rgba(57, 255, 20, 0.5); }
    }

    .total-updating {
      animation: totalPulse 0.4s ease-out;
    }

    /* =================== MOBILE MENU TOGGLE =================== */
    .menu-toggle {
      display: none;
      position: fixed;
      top: 1rem;
      left: 1rem;
      z-index: 150;
      background: #39FF14;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      cursor: pointer;
      font-size: 1.2rem;
      color: #000;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(57, 255, 20, 0.4);
    }

    .sidebar-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      z-index: 99;
    }

    /* =================== RESPONSIVE DESIGN =================== */
    @media (max-width: 1024px) {
      .sidebar {
        width: 240px;
      }

      .main-content {
        margin-left: 240px;
      }

      .service-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      }
    }

    @media (max-width: 768px) {
      .menu-toggle {
        display: block;
      }

      .sidebar {
        transform: translateX(-100%);
        width: 280px;
      }

      .sidebar.active {
        transform: translateX(0);
      }

      .sidebar-overlay.active {
        display: block;
      }

      .main-content {
        margin-left: 0;
        padding: 1rem;
        padding-top: 5rem;
      }

      .welcome-title {
        font-size: 1.8rem;
        margin-top: 1rem;
      }

      .service-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .checkbox-group {
        grid-template-columns: 1fr;
      }

      .invoice-info {
        grid-template-columns: 1fr;
      }

      .button-group {
        grid-template-columns: 1fr;
      }

      .order-type-selector {
        flex-direction: column;
      }

      .order-type-btn {
        width: 100%;
      }

      .top-nav {
        padding: 1rem;
      }

      .datetime {
        font-size: 0.75rem;
        width: 100%;
        text-align: center;
      }

      .top-nav-buttons {
        width: 100%;
        justify-content: center;
      }

      .nav-btn {
        padding: 0.6rem 1rem;
        font-size: 0.85rem;
      }

      .category-header h3 {
        font-size: 1.4rem;
      }

      .service-card h3 {
        font-size: 1.1rem;
      }

      .service-card .price {
        font-size: 1.5rem;
      }

      .invoice-header h2 {
        font-size: 1.5rem;
      }

      .invoice-total .total-amount {
        font-size: 2rem;
      }

      .content-box {
        padding: 1.5rem;
      }

      .customization-panel {
        padding: 1.5rem;
      }

      .invoice-preview {
        padding: 1.5rem;
      }
    }

    @media (max-width: 480px) {
      .welcome-title {
        font-size: 1.5rem;
      }

      .category-header {
        padding: 1rem;
      }

      .category-header h3 {
        font-size: 1.2rem;
      }

      .service-card {
        padding: 1rem;
      }

      .service-card .price {
        font-size: 1.3rem;
      }

      .invoice-total .total-amount {
        font-size: 1.8rem;
      }

      .button {
        padding: 0.875rem 1rem;
        font-size: 0.9rem;
      }
    }
  </style>
</head>

<body>
  <!-- Floating Code Background -->
  <div class="floating-code-container" id="floatingCodeContainer"></div>

  <!-- Mobile Menu Toggle -->
  <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞ Menu</button>

  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

  <div class="dashboard-wrapper">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div>
        <img src="assets/images/dashboard-logo-no-bg.png" class="sidebar-logo" alt="Nex Genix">
        <ul class="sidebar-menu">
          <li onclick="showSection('order')" class="active">Order Service</li>
          <li onclick="showSection('my-orders')">My Orders</li>
          <li onclick="showSection('settings')">Account Settings</li>
        </ul>
      </div>
      <p class="sidebar-footer">&copy; 2026 NEX GENIX Creative Solutions</p>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Top Navigation -->
      <nav class="top-nav">
        <div id="datetime" class="datetime"></div>

        <div class="top-nav-buttons">
          <div class="dropdown">
            <button class="nav-btn home-btn">
              <span>üè†</span>
              <span>Home</span>
            </button>
            <div class="dropdown-menu">
              <a href="https://nexgenixbusinessschool.github.io" target="_blank">Nex Genix Business School</a>
              <a href="https://nexgenixcreativesolutions.github.io" target="_blank">Nex Genix Creative Solutions</a>
            </div>
          </div>

          <button onclick="logout()" class="nav-btn logout-btn">
            <span>üö™</span>
            <span>Logout</span>
          </button>
        </div>
      </nav>

      <!-- Order Service Section -->
      <div id="order" class="content-section active">
        <h1 class="welcome-title">Order Your Service</h1>

        <!-- Order Type Selector -->
        <div class="order-type-selector">
          <button class="order-type-btn active" id="newWebsiteBtn" onclick="selectOrderType('new')">
            üÜï New Website Order
          </button>
          <button class="order-type-btn" id="renewalBtn" onclick="selectOrderType('renewal')">
            üîÑ Renewal Service
          </button>
        </div>

        <!-- ‚òÖ SERVICE TYPE FILTER BAR (only for new orders) -->
        <div class="service-filter-bar" id="serviceFilterBar">
          <div class="filter-label">Filter packages by service type</div>
          <button class="filter-tab active" id="tab-all" onclick="filterByServiceType('all', this)">
            <span class="tab-icon">üóÇÔ∏è</span> All Packages
          </button>
          <button class="filter-tab" id="tab-app-design" onclick="filterByServiceType('app-design', this)">
            <span class="tab-icon">üì±</span> App Design
          </button>
          <button class="filter-tab" id="tab-web-design" onclick="filterByServiceType('web-design', this)">
            <span class="tab-icon">üé®</span> Web Design
          </button>
          <button class="filter-tab" id="tab-web-development" onclick="filterByServiceType('web-development', this)">
            <span class="tab-icon">üåê</span> Web Development
          </button>
          <button class="filter-tab" id="tab-ui-ux" onclick="filterByServiceType('ui-ux-design', this)">
            <span class="tab-icon">üß©</span> UI/UX Design
          </button>
        </div>

        <!-- NEW WEBSITE PACKAGES -->
        <div id="newWebsitePackages">
          <!-- MULTI-PAGE WEBSITES WITH MAINTENANCE -->
          <div class="package-category" id="cat-maintenance" data-service-types="web-design web-development">
            <div class="category-header">
              <h3>üì± Multi-Page Websites (With Maintenance)</h3>
              <p>Professional websites with ongoing support and maintenance - Perfect for growing businesses</p>
            </div>
            <div class="content-box">
              <div class="service-grid" id="serviceGridMaintenance">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>

          <!-- TWO-PAGE WEBSITES -->
          <div class="package-category" id="cat-onepage" data-service-types="web-design web-development">
            <div class="category-header">
              <h3>‚ö° Two-Page Websites (Fast Launch)</h3>
              <p>Quick and efficient single-page solutions - Best for new businesses, promos, and landing pages</p>
            </div>
            <div class="content-box">
              <div class="service-grid" id="serviceGridOnePage">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>

          <!-- MULTI-PAGE WEBSITES WITHOUT MAINTENANCE -->
          <div class="package-category" id="cat-nomaintenance" data-service-types="web-design web-development">
            <div class="category-header">
              <h3>üåê Multi-Page Websites (No Maintenance)</h3>
              <p>One-time development with no ongoing costs - For businesses wanting a simple online presence</p>
            </div>
            <div class="content-box">
              <div class="service-grid" id="serviceGridNoMaintenance">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>

          <!-- APP DESIGN PACKAGES (shown only when App Design is filtered) -->
          <div class="package-category hidden" id="cat-app-design" data-service-types="app-design">
            <div class="category-header">
              <h3>üì± App Design Packages</h3>
              <p>Mobile app UI/UX design for iOS, Android, and cross-platform applications</p>
            </div>
            <div class="content-box">
              <div class="service-grid" id="serviceGridAppDesign">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>

          <!-- UI/UX DESIGN PACKAGES (shown only when UI/UX is filtered) -->
          <div class="package-category hidden" id="cat-uiux" data-service-types="ui-ux-design">
            <div class="category-header">
              <h3>üß© UI/UX Design Packages</h3>
              <p>Wireframes, prototypes, user research, and full design systems</p>
            </div>
            <div class="content-box">
              <div class="service-grid" id="serviceGridUiux">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>
        </div>

        <!-- RENEWAL SERVICES -->
        <div id="renewalPackages" style="display: none;">
          <!-- WEBSITE MANAGER SERVICES -->
          <div class="package-category">
            <div class="category-header">
              <h3>üîß Website Manager Services</h3>
              <p>Monthly or annual website maintenance and support</p>
            </div>
            <div class="content-box">
              <div style="background: rgba(57, 255, 20, 0.1); border: 1px solid #39FF14; border-radius: 0.75rem; padding: 1.5rem; margin-bottom: 2rem;">
                <h4 style="color: #39FF14; font-size: 1.1rem; margin-bottom: 1rem; font-family: 'Orbitron', sans-serif;">Website Manager Includes:</h4>
                <ul style="list-style: none; padding: 0;">
                  <li style="padding: 0.5rem 0; color: #d1d5db;">‚úì Content updates (text/images)</li>
                  <li style="padding: 0.5rem 0; color: #d1d5db;">‚úì Minor design changes</li>
                  <li style="padding: 0.5rem 0; color: #d1d5db;">‚úì Plugin & security checks</li>
                  <li style="padding: 0.5rem 0; color: #d1d5db;">‚úì Backup monitoring</li>
                  <li style="padding: 0.5rem 0; color: #d1d5db;">‚úì Basic performance checks</li>
                </ul>
              </div>
              <div class="service-grid" id="serviceGridManager">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>

          <!-- ANNUAL RENEWAL INVOICE -->
          <div class="package-category">
            <div class="category-header">
              <h3>üìÖ Annual Website Renewal</h3>
              <p>Keep your website running with hosting, domain, and essential services</p>
            </div>
            <div class="content-box">
              <div class="service-grid" id="serviceGridRenewal">
                <!-- Loaded dynamically -->
              </div>
            </div>
          </div>
        </div>

        <!-- Customization Panel -->
        <div class="customization-panel" id="customizationPanel" style="display: none;">
          <h2>Customize Your Order</h2>

          <!-- AUTO-DETECTED SERVICE TYPE BADGE -->
          <div style="text-align:center; margin-bottom:1.5rem;">
            <span class="service-type-badge" id="serviceTypeBadge">‚öôÔ∏è Select a package above</span>
          </div>

          <!-- ‚òÖ BUSINESS QUESTIONNAIRE (universal, always shown first) -->
          <div class="biz-questionnaire" id="bizQuestionnaire">
            <h3>üè¢ Tell us about your business</h3>

            <span class="biz-tags-label">What type of business or project is this for? <em style="color:#6b7280;">(select all that apply)</em></span>
            <div class="biz-tags" id="bizTypeTagsEl">
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Startup')">üöÄ Startup</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Small Business')">üè™ Small Business</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Corporate / Enterprise')">üè¢ Corporate / Enterprise</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Freelancer / Personal')">üë§ Freelancer / Personal</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Non-Profit / Organization')">ü§ù Non-Profit / Organization</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','E-Commerce / Online Store')">üõí E-Commerce / Online Store</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Restaurant / Food & Beverage')">üçΩÔ∏è Restaurant / F&B</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Health & Wellness')">üíä Health & Wellness</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Education / E-Learning')">üìö Education / E-Learning</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Real Estate')">üè† Real Estate</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Events / Entertainment')">üéâ Events / Entertainment</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'type','Technology / SaaS')">üíª Technology / SaaS</span>
            </div>

            <span class="biz-tags-label">What is your goal with this project? <em style="color:#6b7280;">(select all that apply)</em></span>
            <div class="biz-tags" id="bizGoalTagsEl">
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Generate Leads / Inquiries')">üì© Generate Leads</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Sell Products / Services Online')">üí≥ Sell Online</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Build Brand Awareness')">‚ú® Brand Awareness</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Showcase Portfolio / Work')">üñºÔ∏è Showcase Portfolio</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Provide Information / Blog')">üì∞ Information / Blog</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','User Login & Dashboard')">üîê User Login / Dashboard</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Booking / Appointments')">üìÖ Booking / Appointments</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'goal','Community / Social')">üë• Community / Social</span>
            </div>

            <span class="biz-tags-label">What stage is your business/project currently in?</span>
            <div class="biz-tags" id="bizStageTagsEl" data-single="true">
              <span class="biz-tag" onclick="toggleBizTag(this,'stage','Just Starting Out')">üå± Just Starting Out</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'stage','Already Operating')">üîÑ Already Operating</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'stage','Rebranding / Redesign')">üîÅ Rebranding / Redesign</span>
              <span class="biz-tag" onclick="toggleBizTag(this,'stage','Scaling Up')">üìà Scaling Up</span>
            </div>
          </div>

          <!-- ===== APP DESIGN OPTIONS ===== -->
          <div id="appDesignOptions" class="service-type-options" style="display:none;">
            <div class="panel-section-title">üì± App Design Configuration</div>
            <div class="form-row">
              <div class="form-group">
                <label>Platform *</label>
                <select id="appPlatform" class="select" onchange="updateInvoice()">
                  <option value="">Select platform</option>
                  <option value="iOS">iOS Only</option>
                  <option value="Android">Android Only</option>
                  <option value="Cross-Platform" data-extra="500">Cross-Platform (iOS + Android) +‚Ç±500</option>
                </select>
              </div>
              <div class="form-group">
                <label>App Category *</label>
                <select id="appCategory" class="select" onchange="updateInvoice()">
                  <option value="">Select category</option>
                  <option value="Business / Corporate">Business / Corporate</option>
                  <option value="E-Commerce / Shopping">E-Commerce / Shopping</option>
                  <option value="Social / Community">Social / Community</option>
                  <option value="Utility / Productivity">Utility / Productivity</option>
                  <option value="Food & Delivery">Food & Delivery</option>
                  <option value="Health & Fitness">Health & Fitness</option>
                  <option value="Education / E-Learning">Education / E-Learning</option>
                  <option value="Entertainment / Media">Entertainment / Media</option>
                  <option value="Finance / Banking">Finance / Banking</option>
                  <option value="Travel & Booking">Travel & Booking</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Number of Screens *</label>
                <select id="appScreens" class="select" onchange="updateInvoice()">
                  <option value="">Select range</option>
                  <option value="1‚Äì5 Screens">1‚Äì5 Screens</option>
                  <option value="6‚Äì10 Screens">6‚Äì10 Screens</option>
                  <option value="11‚Äì20 Screens">11‚Äì20 Screens</option>
                  <option value="20+ Screens">20+ Screens</option>
                </select>
              </div>
              <div class="form-group">
                <label>Prototype Type</label>
                <select id="appPrototype" class="select" onchange="updateInvoice()">
                  <option value="none">No prototype needed</option>
                  <option value="Static Mockup">Static Mockup (Figma Frames)</option>
                  <option value="Clickable Prototype" data-extra="800">Clickable Prototype +‚Ç±800</option>
                  <option value="Animated Prototype" data-extra="1500">Animated / Motion Prototype +‚Ç±1,500</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Design Tool Preference</label>
                <select id="appTool" class="select">
                  <option value="Figma">Figma (Recommended)</option>
                  <option value="Adobe XD">Adobe XD</option>
                  <option value="Sketch">Sketch</option>
                  <option value="No Preference">No Preference</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label>Additional App Features <span style="color:#6b7280;font-size:0.8rem;">(select multiple)</span></label>
              <div class="toggle-group">
                <div class="toggle-item" onclick="toggleFeature(this,'app-branding')"><input type="checkbox" id="app-branding" data-price="500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Branding / Logo Integration</span><span class="toggle-price">+‚Ç±500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'app-darkmode')"><input type="checkbox" id="app-darkmode" data-price="400" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Dark Mode Version</span><span class="toggle-price">+‚Ç±400</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'app-icon')"><input type="checkbox" id="app-icon" data-price="300" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">App Icon Design</span><span class="toggle-price">+‚Ç±300</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'app-onboarding')"><input type="checkbox" id="app-onboarding" data-price="600" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Onboarding Screens</span><span class="toggle-price">+‚Ç±600</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'app-designsystem')"><input type="checkbox" id="app-designsystem" data-price="900" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Design System / Style Guide</span><span class="toggle-price">+‚Ç±900</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'app-splash')"><input type="checkbox" id="app-splash" data-price="250" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Splash Screen Design</span><span class="toggle-price">+‚Ç±250</span></div></div>
              </div>
            </div>
          </div>

          <!-- ===== WEB DESIGN OPTIONS ===== -->
          <div id="webDesignOptions" class="service-type-options" style="display:none;">
            <div class="panel-section-title">üé® Web Design Configuration</div>
            <div class="form-row">
              <div class="form-group">
                <label>Website Type *</label>
                <select id="wdType" class="select" onchange="updateInvoice()">
                  <option value="">Select type</option>
                  <option value="Portfolio / Personal">Portfolio / Personal</option>
                  <option value="Corporate / Company">Corporate / Company</option>
                  <option value="Landing Page">Landing Page</option>
                  <option value="Blog / Magazine">Blog / Magazine</option>
                  <option value="E-Commerce">E-Commerce</option>
                  <option value="Non-Profit / Organization">Non-Profit / Organization</option>
                  <option value="Restaurant / Food">Restaurant / Food</option>
                  <option value="Event / Promo Site">Event / Promo Site</option>
                </select>
              </div>
              <div class="form-group">
                <label for="numPages">Number of Pages *</label>
                <div class="page-counter-wrap">
                  <div class="page-counter" id="numPagesCounter">
                    <button type="button" class="page-counter-btn" id="numPagesMinus" onclick="adjustPages('numPages',-1)">‚àí</button>
                    <input type="number" id="numPages" class="page-counter-input" min="1" readonly onchange="updateInvoice()">
                    <button type="button" class="page-counter-btn" id="numPagesPlus" onclick="adjustPages('numPages',1)">+</button>
                  </div>
                  <span class="page-counter-hint" id="numPagesHint">Select a package first</span>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Design Tool Preference</label>
                <select id="wdTool" class="select">
                  <option value="Figma">Figma (Recommended)</option>
                  <option value="Adobe XD">Adobe XD</option>
                  <option value="Photoshop">Photoshop</option>
                  <option value="No Preference">No Preference</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label>Additional Design Features <span style="color:#6b7280;font-size:0.8rem;">(select multiple)</span></label>
              <div class="toggle-group">
                <div class="toggle-item" onclick="toggleFeature(this,'wd-responsive')"><input type="checkbox" id="wd-responsive" data-price="500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Mobile Responsive Design</span><span class="toggle-price">+‚Ç±500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-illustrations')"><input type="checkbox" id="wd-illustrations" data-price="800" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Custom Illustrations</span><span class="toggle-price">+‚Ç±800</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-logo')"><input type="checkbox" id="wd-logo" data-price="600" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Logo Design</span><span class="toggle-price">+‚Ç±600</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-motion')"><input type="checkbox" id="wd-motion" data-price="700" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Animated / Motion Elements</span><span class="toggle-price">+‚Ç±700</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-brandguide')"><input type="checkbox" id="wd-brandguide" data-price="900" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Brand Style Guide</span><span class="toggle-price">+‚Ç±900</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-darkmode')"><input type="checkbox" id="wd-darkmode" data-price="400" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Dark Mode Design</span><span class="toggle-price">+‚Ç±400</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-prototype')"><input type="checkbox" id="wd-prototype" data-price="800" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Clickable Prototype</span><span class="toggle-price">+‚Ç±800</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'wd-socialmedia')"><input type="checkbox" id="wd-socialmedia" data-price="500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Social Media Kit</span><span class="toggle-price">+‚Ç±500</span></div></div>
              </div>
            </div>
          </div>

          <!-- ===== WEB DEVELOPMENT OPTIONS ===== -->
          <div id="webDevOptions" class="service-type-options" style="display:none;">
            <div class="panel-section-title">üåê Web Development Configuration</div>
            <div class="form-row">
              <div class="form-group">
                <label>Tech Stack / Platform *</label>
                <select id="devStack" class="select" onchange="updateInvoice()">
                  <option value="">Select stack</option>
                  <option value="Custom HTML/CSS/JS">Custom HTML / CSS / JS</option>
                  <option value="WordPress" data-extra="500">WordPress +‚Ç±500</option>
                  <option value="React / Next.js" data-extra="1500">React / Next.js +‚Ç±1,500</option>
                  <option value="Vue.js / Nuxt" data-extra="1500">Vue.js / Nuxt +‚Ç±1,500</option>
                  <option value="Webflow" data-extra="800">Webflow +‚Ç±800</option>
                  <option value="Shopify" data-extra="2000">Shopify +‚Ç±2,000</option>
                  <option value="Laravel / PHP" data-extra="2000">Laravel / PHP Backend +‚Ç±2,000</option>
                </select>
              </div>
              <div class="form-group">
                <label for="numPagesdev">Number of Pages *</label>
                <div class="page-counter-wrap">
                  <div class="page-counter" id="numPagesdevCounter">
                    <button type="button" class="page-counter-btn" id="numPagesdevMinus" onclick="adjustPages('numPagesdev',-1)">‚àí</button>
                    <input type="number" id="numPagesdev" class="page-counter-input" min="1" readonly onchange="updateInvoice()">
                    <button type="button" class="page-counter-btn" id="numPagesdevPlus" onclick="adjustPages('numPagesdev',1)">+</button>
                  </div>
                  <span class="page-counter-hint" id="numPagesdevHint">Select a package first</span>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Maintenance Plan</label>
                <select id="devMaintenance" class="select" onchange="updateInvoice()">
                  <option value="none">No maintenance needed</option>
                  <option value="Monthly" data-extra="1500">Monthly Plan +‚Ç±1,500/mo</option>
                  <option value="Annual" data-extra="15000">Annual Plan +‚Ç±15,000/yr</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label>Additional Development Features <span style="color:#6b7280;font-size:0.8rem;">(select multiple)</span></label>
              <div class="toggle-group">
                <div class="toggle-item" onclick="toggleFeature(this,'dev-ecommerce')"><input type="checkbox" id="dev-ecommerce" data-price="3000" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">E-Commerce / Online Store</span><span class="toggle-price">+‚Ç±3,000</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-cms')"><input type="checkbox" id="dev-cms" data-price="1500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">CMS Integration</span><span class="toggle-price">+‚Ç±1,500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-forms')"><input type="checkbox" id="dev-forms" data-price="500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Contact Form / Email Setup</span><span class="toggle-price">+‚Ç±500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-seo')"><input type="checkbox" id="dev-seo" data-price="3000" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">SEO Optimization</span><span class="toggle-price">+‚Ç±3,000</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-analytics')"><input type="checkbox" id="dev-analytics" data-price="2000" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Analytics Integration</span><span class="toggle-price">+‚Ç±2,000</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-ssl')"><input type="checkbox" id="dev-ssl" data-price="1500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">SSL Certificate</span><span class="toggle-price">+‚Ç±1,500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-backup')"><input type="checkbox" id="dev-backup" data-price="2500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Automated Backups</span><span class="toggle-price">+‚Ç±2,500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-hosting')"><input type="checkbox" id="dev-hosting" data-price="1000" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Hosting & Domain Setup</span><span class="toggle-price">+‚Ç±1,000</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-livechat')"><input type="checkbox" id="dev-livechat" data-price="400" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Live Chat Integration</span><span class="toggle-price">+‚Ç±400</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-social')"><input type="checkbox" id="dev-social" data-price="350" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Social Media Integration</span><span class="toggle-price">+‚Ç±350</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'dev-speed')"><input type="checkbox" id="dev-speed" data-price="600" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Speed Optimization</span><span class="toggle-price">+‚Ç±600</span></div></div>
              </div>
            </div>
          </div>

          <!-- ===== UI/UX DESIGN OPTIONS ===== -->
          <div id="uiuxOptions" class="service-type-options" style="display:none;">
            <div class="panel-section-title">üß© UI/UX Design Configuration</div>
            <div class="form-row">
              <div class="form-group">
                <label>Project Type *</label>
                <select id="uxProjectType" class="select" onchange="updateInvoice()">
                  <option value="">Select type</option>
                  <option value="Web App">Web App</option>
                  <option value="Mobile App">Mobile App</option>
                  <option value="Desktop Software">Desktop Software</option>
                  <option value="Dashboard / Admin Panel">Dashboard / Admin Panel</option>
                  <option value="SaaS Product">SaaS Product</option>
                </select>
              </div>
              <div class="form-group">
                <label>Deliverable Type *</label>
                <select id="uxDeliverable" class="select" onchange="updateInvoice()">
                  <option value="">Select deliverable</option>
                  <option value="Wireframes Only" data-extra="2000">Wireframes Only +‚Ç±2,000</option>
                  <option value="Wireframes + Hi-Fi Design" data-extra="5000">Wireframes + Hi-Fi Design +‚Ç±5,000</option>
                  <option value="Full Clickable Prototype" data-extra="7500">Full Clickable Prototype +‚Ç±7,500</option>
                  <option value="Design System" data-extra="9000">Design System / Component Library +‚Ç±9,000</option>
                  <option value="Complete UX Package" data-extra="12000">Complete UX Package +‚Ç±12,000</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Wireframe Fidelity</label>
                <select id="uxFidelity" class="select" onchange="updateInvoice()">
                  <option value="">Select fidelity</option>
                  <option value="Low-Fidelity (Sketch)">Low-Fidelity (Sketch)</option>
                  <option value="Mid-Fidelity (Greyscale)">Mid-Fidelity (Greyscale)</option>
                  <option value="High-Fidelity (Full Color)">High-Fidelity (Full Color)</option>
                </select>
              </div>
              <div class="form-group">
                <label>Number of Screens / Views *</label>
                <select id="uxScreens" class="select" onchange="updateInvoice()">
                  <option value="">Select range</option>
                  <option value="1‚Äì5 Screens">1‚Äì5 Screens</option>
                  <option value="6‚Äì15 Screens">6‚Äì15 Screens</option>
                  <option value="16‚Äì30 Screens">16‚Äì30 Screens</option>
                  <option value="30+ Screens">30+ Screens</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Design Tool Preference</label>
                <select id="uxTool" class="select">
                  <option value="Figma">Figma (Recommended)</option>
                  <option value="Adobe XD">Adobe XD</option>
                  <option value="Sketch">Sketch</option>
                  <option value="No Preference">No Preference</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label>Additional UI/UX Features <span style="color:#6b7280;font-size:0.8rem;">(select multiple)</span></label>
              <div class="toggle-group">
                <div class="toggle-item" onclick="toggleFeature(this,'ux-research')"><input type="checkbox" id="ux-research" data-price="2000" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">User Research & Personas</span><span class="toggle-price">+‚Ç±2,000</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-journey')"><input type="checkbox" id="ux-journey" data-price="1500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">User Journey Mapping</span><span class="toggle-price">+‚Ç±1,500</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-ia')"><input type="checkbox" id="ux-ia" data-price="1000" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Information Architecture</span><span class="toggle-price">+‚Ç±1,000</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-usability')"><input type="checkbox" id="ux-usability" data-price="1800" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Usability Testing Plan</span><span class="toggle-price">+‚Ç±1,800</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-accessibility')"><input type="checkbox" id="ux-accessibility" data-price="1200" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Accessibility Audit (WCAG)</span><span class="toggle-price">+‚Ç±1,200</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-microinteraction')"><input type="checkbox" id="ux-microinteraction" data-price="900" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Micro-Interaction Design</span><span class="toggle-price">+‚Ç±900</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-handoff')"><input type="checkbox" id="ux-handoff" data-price="600" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Developer Handoff / Specs</span><span class="toggle-price">+‚Ç±600</span></div></div>
                <div class="toggle-item" onclick="toggleFeature(this,'ux-brand')"><input type="checkbox" id="ux-brand" data-price="500" onchange="updateInvoice()"><div class="toggle-check"></div><div class="toggle-text"><span class="toggle-name">Brand Integration</span><span class="toggle-price">+‚Ç±500</span></div></div>
              </div>
            </div>
          </div>

          <!-- PROJECT DETAILS (always shown) -->
          <div id="projectDetailsSection" style="display:none;">
            <div class="panel-section-title">üìã Project Details</div>
            <div class="form-row">
              <div class="form-group">
                <label for="projectName">Project Name</label>
                <input type="text" id="projectName" class="input" placeholder="Enter project name">
              </div>
              <div class="form-group">
                <label for="deadline">Preferred Deadline</label>
                <input type="date" id="deadline" class="input">
              </div>
            </div>
            <div class="form-group">
              <label for="specialRequests">Special Requests / Notes</label>
              <textarea id="specialRequests" class="input" placeholder="Any special requirements or notes..."></textarea>
            </div>
          </div>
        </div>

        <!-- Invoice Preview -->
        <div class="content-box" id="invoiceSection" style="display: none;">
          <div class="invoice-preview">
            <div class="invoice-header">
              <h2>INVOICE PREVIEW</h2>
              <div class="invoice-info">
                <div><strong>Invoice No:</strong> <span id="invoiceNumber">NGCS-2026-001</span></div>
                <div><strong>Date:</strong> <span id="invoiceDate"></span></div>
                <div>
                  <strong>Client: </strong>
                  <span class="invoice-client-edit">
                    <input type="text" id="clientNameInput" value="Valued Client" placeholder="Enter client name" oninput="syncClientName()" />
                    <span class="edit-icon">‚úèÔ∏è</span>
                  </span>
                </div>
                <div><strong>Issued By:</strong> Nex Genix Creative Solutions</div>
              </div>
            </div>

            <div class="invoice-table">
              <table>
                <thead>
                  <tr>
                    <th>Description</th>
                    <th style="text-align: right;">Amount (PHP)</th>
                  </tr>
                </thead>
                <tbody id="invoiceItems">
                  <!-- Dynamic invoice items -->
                </tbody>
              </table>
            </div>

            <div class="invoice-total">
              <div class="total-label">TOTAL AMOUNT DUE</div>
              <div class="total-amount" id="totalAmount">‚Ç±0.00</div>
            </div>

            <div class="button-group">
              <button class="button" onclick="submitOrder()">Proceed to Payment</button>
              <button class="button button-secondary" onclick="downloadInvoice()">Download Invoice</button>
            </div>
          </div>
        </div>
      </div>

      <!-- My Orders Section -->
      <div id="my-orders" class="content-section">
        <h1 class="welcome-title">My Orders</h1>
        <div class="content-box">
          <div id="ordersContent">
            <p style="color: #9ca3af; text-align: center; padding: 2rem;">No orders yet. Start by ordering a service!</p>
          </div>
        </div>
      </div>

      <!-- Settings Section -->
      <div id="settings" class="content-section">
        <h1 class="welcome-title">Account Settings</h1>
        <div class="content-box">
          <div class="form-group">
            <label for="displayNameInput">Display Name</label>
            <input id="displayNameInput" class="input" placeholder="Display Name" type="text">
          </div>
          <div class="form-group">
            <label for="usernameInput">Username</label>
            <input id="usernameInput" class="input" placeholder="Username" type="text">
          </div>
          <div class="form-group">
            <label for="phoneInput">Phone Number</label>
            <input id="phoneInput" class="input" placeholder="Phone Number" type="tel">
          </div>
          <div class="form-group">
            <label for="emailInput">Email</label>
            <input id="emailInput" class="input" placeholder="Email" type="email" disabled>
          </div>

          <hr class="divider">

          <div class="form-group">
            <label for="passwordInput">New Password</label>
            <input id="passwordInput" class="input" type="password" placeholder="New Password">
          </div>
          <button class="button" onclick="updatePassword()">Update Password</button>

          <div style="margin-top: 1rem;">
            <button class="button button-secondary" onclick="saveProfile()">Save Profile</button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    // =================== SERVICE PACKAGES DATA (CATEGORIZED) ===================
    const servicePackages = {
      // CATEGORY 1: MULTI-PAGE WITH MAINTENANCE
      maintenance: {
        basic: {
          name: 'BASIC - Starter Business',
          price: 18000,
          basePages: 5,
          minPages: 3,
          maxPages: 5,
          pricePerPage: 1500,
          features: [
            '3-5 page website',
            'Mobile responsive',
            'Free domain (1 year)',
            'Hosting (1 year)',
            '1 professional email'
          ],
          excluded: [],
          bestFor: 'sari-sari, caf√©s, freelancers, startups'
        },
        pro: {
          name: 'PRO - Growing Business',
          price: 26000,
          basePages: 8,
          minPages: 5,
          maxPages: 8,
          pricePerPage: 2000,
          features: [
            '5-8 pages',
            'SQL database',
            'Contact forms',
            'Speed optimization',
            'Website Manager (1 month FREE)'
          ],
          excluded: [],
          bestFor: 'clinics, restaurants, agencies'
        },
        premium: {
          name: 'PREMIUM - Established/Corporate',
          price: 52500,
          basePages: 12,
          minPages: 8,
          maxPages: 12,
          pricePerPage: 3500,
          features: [
            'Custom UI/UX',
            'Advanced SQL & admin panel',
            'Multiple emails',
            'Priority support',
            'Dedicated Website Manager'
          ],
          excluded: [],
          bestFor: 'corporations, franchises, e-commerce'
        }
      },

      // CATEGORY 2: TWO-PAGE WEBSITES
      onePage: {
        starter: {
          name: 'TWO-PAGE Starter',
          price: 6500,
          basePages: 2,
          minPages: 2,
          maxPages: 2,
          pricePerPage: 1000,
          features: [
            '2 pages',
            'Mobile responsive',
            'Basic UI design',
            'Contact form (email notification)',
            'Hosted online',
            'FREE domain (1 year)',
            'Hosting (1 year)'
          ],
          excluded: ['No maintenance', 'No business email'],
          bestFor: 'freelancers, home-based sellers, promos'
        },
        pro: {
          name: 'TWO-PAGE Pro',
          price: 9500,
          basePages: 2,
          minPages: 2,
          maxPages: 2,
          pricePerPage: 1500,
          features: [
            'Everything in Starter',
            'Custom layout & branding',
            'SEO-ready structure',
            'Faster loading optimization',
            'Priority setup'
          ],
          excluded: ['No maintenance', 'No business email'],
          bestFor: 'caf√©s, startups, marketing campaigns'
        },
        premium: {
          name: 'TWO-PAGE Premium',
          price: 14000,
          basePages: 2,
          minPages: 2,
          maxPages: 2,
          pricePerPage: 2000,
          features: [
            'Custom-designed landing page',
            'Conversion-focused layout',
            'Call-to-action sections',
            'Google Map integration',
            'Analytics setup'
          ],
          excluded: ['No maintenance', 'No business email'],
          bestFor: 'product launches, agencies, corporate promos'
        }
      },

      // CATEGORY 3: MULTI-PAGE WITHOUT MAINTENANCE
      noMaintenance: {
        basic: {
          name: 'MULTI-PAGE Basic',
          price: 12000,
          basePages: 4,
          minPages: 3,
          maxPages: 4,
          pricePerPage: 1200,
          features: [
            '3-4 pages',
            'Mobile responsive',
            'FREE domain (1 year)',
            'Hosting (1 year)',
            'Contact form'
          ],
          excluded: ['No maintenance', 'No business email', 'No updates after turnover'],
          bestFor: 'small shops, sari-sari, service providers'
        },
        standard: {
          name: 'MULTI-PAGE Standard',
          price: 17000,
          basePages: 7,
          minPages: 5,
          maxPages: 7,
          pricePerPage: 1700,
          features: [
            '5-7 pages',
            'Improved UI design',
            'Speed optimization',
            'FREE domain (1 year)',
            'Hosting (1 year)'
          ],
          excluded: ['No maintenance', 'No business email'],
          bestFor: 'restaurants, clinics, schools'
        },
        advanced: {
          name: 'MULTI-PAGE Advanced',
          price: 25000,
          basePages: 12,
          minPages: 8,
          maxPages: 12,
          pricePerPage: 2500,
          features: [
            '8-12 pages',
            'Custom layout',
            'SQL database (if needed)',
            'FREE domain (1 year)',
            'Hosting (1 year)'
          ],
          excluded: ['No maintenance', 'No business email'],
          bestFor: 'large local businesses, organizations'
        }
      },

      // CATEGORY 4: WEBSITE MANAGER SERVICES
      manager: {
        monthly: {
          name: 'Website Manager (Monthly)',
          price: 800,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Content updates (text/images)',
            'Minor design changes',
            'Plugin & security checks',
            'Backup monitoring',
            'Basic performance checks',
            'Startup-friendly pricing'
          ],
          excluded: [],
          bestFor: 'businesses wanting flexible monthly support'
        },
        annual: {
          name: 'Website Manager (Annual)',
          price: 8000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'All monthly features',
            '2 months FREE',
            'Priority support',
            'Discounted rate',
            'Better value for long-term'
          ],
          excluded: [],
          bestFor: 'businesses committed to ongoing maintenance'
        }
      },

      // CATEGORY 5: ANNUAL RENEWAL
      renewal: {
        standard: {
          name: 'Annual Website Renewal',
          price: 20000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Hosting Renewal: ‚Ç±1,800',
            'Domain Renewal: ‚Ç±900',
            'Google Workspace Email Renewal (1 user): ‚Ç±6,800',
            'Website Manager Service (Annual): ‚Ç±8,000',
            'Technical Support & Vendor Handling Fee: ‚Ç±2,500'
          ],
          excluded: [],
          bestFor: 'existing clients renewing annual services'
        }
      },

      // CATEGORY 6: APP DESIGN
      appDesign: {
        starter: {
          name: 'APP DESIGN - Starter',
          price: 8000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Up to 8 screens',
            'iOS or Android',
            'Static Figma mockups',
            'Basic UI design',
            'Mobile-first layout'
          ],
          excluded: ['No prototype', 'No branding'],
          bestFor: 'small apps, MVPs, simple utilities'
        },
        pro: {
          name: 'APP DESIGN - Pro',
          price: 18000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Up to 20 screens',
            'iOS & Android',
            'Clickable prototype',
            'Custom branding & icon',
            'Onboarding screens'
          ],
          excluded: [],
          bestFor: 'startups, e-commerce apps, service apps'
        },
        premium: {
          name: 'APP DESIGN - Premium',
          price: 35000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Unlimited screens',
            'Cross-platform design',
            'Animated prototype',
            'Full design system',
            'Dark & light mode',
            'Developer handoff'
          ],
          excluded: [],
          bestFor: 'funded startups, enterprise apps, SaaS'
        }
      },

      // CATEGORY 7: UI/UX DESIGN
      uiuxDesign: {
        wireframe: {
          name: 'UI/UX - Wireframes',
          price: 5000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Up to 10 screens',
            'Low to mid-fidelity',
            'User flow diagrams',
            'Figma deliverables',
            'Revision rounds included'
          ],
          excluded: ['No visual design', 'No prototype'],
          bestFor: 'early-stage planning, concept validation'
        },
        prototype: {
          name: 'UI/UX - Full Prototype',
          price: 14000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Up to 25 screens',
            'High-fidelity design',
            'Clickable prototype',
            'User journey mapping',
            'Information architecture'
          ],
          excluded: [],
          bestFor: 'investor demos, usability testing, pitches'
        },
        system: {
          name: 'UI/UX - Design System',
          price: 28000,
          basePages: 0,
          pricePerPage: 0,
          features: [
            'Complete component library',
            'Design tokens & variables',
            'Accessibility audit (WCAG)',
            'Developer handoff specs',
            'Documentation included'
          ],
          excluded: [],
          bestFor: 'product teams, SaaS platforms, enterprises'
        }
      }
    };

    // =================== FLOATING CODE BACKGROUND ===================
    const codeSnippets = [
      'const nexgenix = () => {',
      'function createSolution() {',
      'import { Innovation } from "future"',
      '<div className="digital">',
      'async function buildDreams() {',
      'export default Excellence;',
      'return <Success />;',
      'const vision = await design();',
      'npm install creativity',
      'git commit -m "launch"',
      'SELECT * FROM solutions;',
      'CREATE TABLE success;',
      '{ transform: "ideas" }',
      '.future { display: flex; }',
      'onClick={() => innovate()}',
      'useState(creativity);',
      'useEffect(() => grow());',
      'class Digital extends Tech {',
      'interface Vision { }',
      'type Success = Promise<Growth>;'
    ];

    function createFloatingCodeBackground() {
      const container = document.getElementById('floatingCodeContainer');
      for (let i = 0; i < 15; i++) {
        const codeLine = document.createElement('div');
        codeLine.className = 'code-line';
        const randomSnippet = codeSnippets[Math.floor(Math.random() * codeSnippets.length)];
        codeLine.textContent = randomSnippet;
        const yPosition = 5 + (i * 6);
        const duration = 15 + Math.random() * 10;
        const delay = Math.random() * 20;
        codeLine.style.top = `${yPosition}%`;
        codeLine.style.animationDuration = `${duration}s`;
        codeLine.style.animationDelay = `${delay}s`;
        container.appendChild(codeLine);
      }
    }

    // =================== DATE TIME UPDATE ===================
    function updateDateTime() {
      const now = new Date();
      const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      };
      document.getElementById('datetime').textContent = now.toLocaleDateString('en-US', options);
    }

    setInterval(updateDateTime, 1000);
    updateDateTime();

    // =================== SERVICE TYPE FILTER ===================
    let activeServiceFilter = 'all';

    function filterByServiceType(type, btn) {
      activeServiceFilter = type;

      // Update tab active states
      document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
      btn.classList.add('active');

      // Show/hide package categories based on data-service-types attribute
      document.querySelectorAll('#newWebsitePackages .package-category').forEach(cat => {
        const types = (cat.dataset.serviceTypes || '').split(' ');
        if (type === 'all' || types.includes(type)) {
          cat.classList.remove('hidden');
        } else {
          cat.classList.add('hidden');
        }
      });

      // Reset any selected package when filter changes
      if (selectedPackage) {
        selectedPackage = null;
        selectedCategory = null;
        document.querySelectorAll('.service-card').forEach(c => c.classList.remove('selected'));
        document.getElementById('customizationPanel').style.display = 'none';
        document.getElementById('invoiceSection').style.display = 'none';
      }

      // Pre-set activeServiceType to match the filter tab so when a card is clicked it's consistent
      const serviceTypeMap = {
        'app-design': 'app-design',
        'web-design': 'web-design',
        'web-development': 'web-development',
        'ui-ux-design': 'ui-ux-design'
      };
      if (type !== 'all' && serviceTypeMap[type]) {
        activeServiceType = serviceTypeMap[type];
      } else {
        activeServiceType = '';
      }
    }

    // =================== ORDER TYPE SELECTION ===================
    let currentOrderType = 'new';

    function selectOrderType(type) {
      currentOrderType = type;

      // Update button states
      document.getElementById('newWebsiteBtn').classList.toggle('active', type === 'new');
      document.getElementById('renewalBtn').classList.toggle('active', type === 'renewal');

      // Show/hide package sections
      document.getElementById('newWebsitePackages').style.display = type === 'new' ? 'block' : 'none';
      document.getElementById('renewalPackages').style.display = type === 'renewal' ? 'block' : 'none';
      document.getElementById('serviceFilterBar').style.display = type === 'new' ? 'flex' : 'none';

      // Hide customization and invoice
      document.getElementById('customizationPanel').style.display = 'none';
      document.getElementById('invoiceSection').style.display = 'none';

      // Clear selection
      selectedPackage = null;
      selectedCategory = null;
      document.querySelectorAll('.service-card').forEach(card => {
        card.classList.remove('selected');
      });
    }

    // =================== NAVIGATION ===================
    function showSection(sectionId) {
      const sections = document.querySelectorAll('.content-section');
      sections.forEach(section => {
        section.classList.remove('active');
      });

      const menuItems = document.querySelectorAll('.sidebar-menu li');
      menuItems.forEach(item => {
        item.classList.remove('active');
      });

      const section = document.getElementById(sectionId);
      if (section) {
        section.classList.add('active');
      }

      event.target.classList.add('active');

      // Close sidebar on mobile after selection
      if (window.innerWidth <= 768) {
        toggleSidebar();
      }
    }

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
      document.getElementById('sidebarOverlay').classList.toggle('active');
    }

    // =================== LOAD SERVICES BY CATEGORY ===================
    function loadServices() {
      // Load maintenance packages
      loadServiceCategory('serviceGridMaintenance', servicePackages.maintenance, 'maintenance');

      // Load one-page packages
      loadServiceCategory('serviceGridOnePage', servicePackages.onePage, 'onePage');

      // Load no maintenance packages
      loadServiceCategory('serviceGridNoMaintenance', servicePackages.noMaintenance, 'noMaintenance');

      // Load website manager packages
      loadServiceCategory('serviceGridManager', servicePackages.manager, 'manager');

      // Load renewal packages
      loadServiceCategory('serviceGridRenewal', servicePackages.renewal, 'renewal');

      // Load app design packages
      loadServiceCategory('serviceGridAppDesign', servicePackages.appDesign, 'appDesign');

      // Load UI/UX packages
      loadServiceCategory('serviceGridUiux', servicePackages.uiuxDesign, 'uiuxDesign');
    }

    function loadServiceCategory(gridId, packages, category) {
      const grid = document.getElementById(gridId);
      if (!grid) return;

      grid.innerHTML = '';

      for (const [key, pkg] of Object.entries(packages)) {
        const card = document.createElement('div');
        card.className = 'service-card';
        card.setAttribute('data-category', category);
        card.setAttribute('data-key', key);

        const featuresHTML = pkg.features.map(f => `<li>${f}</li>`).join('');
        const excludedHTML = pkg.excluded.map(f => `<li class="excluded">${f}</li>`).join('');

        card.innerHTML = `
          <h3>${pkg.name}</h3>
          <div class="price">‚Ç±${pkg.price.toLocaleString()}</div>
          ${pkg.basePages > 0 ? `
            <p class="price-info">
              ${pkg.basePages} pages included<br>
              ‚Ç±${pkg.pricePerPage.toLocaleString()} per additional page
            </p>
          ` : ''}
          <ul>
            ${featuresHTML}
            ${excludedHTML}
          </ul>
          <p class="best-for">
            üí° Best for: ${pkg.bestFor}
          </p>
          <button class="select-btn" onclick="selectService('${category}', '${key}')">Select Package</button>
        `;

        grid.appendChild(card);
      }
    }

    let selectedPackage = null;
    let selectedCategory = null;
    let prevInvoiceKeys = new Set();
    let activeServiceType = '';

    // Business questionnaire tag state
    const bizSelections = { type: [], goal: [], stage: [] };

    function toggleBizTag(el, group, value) {
      const container = el.closest('.biz-tags');
      const isSingle = container.dataset.single === 'true';

      if (isSingle) {
        // Deselect all siblings first
        container.querySelectorAll('.biz-tag').forEach(t => t.classList.remove('selected'));
        bizSelections[group] = [value];
        el.classList.add('selected');
      } else {
        if (el.classList.contains('selected')) {
          el.classList.remove('selected');
          bizSelections[group] = bizSelections[group].filter(v => v !== value);
        } else {
          el.classList.add('selected');
          bizSelections[group].push(value);
        }
      }
      updateInvoice();
    }

    // Toggle feature checkboxes (multi-select card toggles)
    function toggleFeature(toggleEl, checkboxId) {
      const cb = document.getElementById(checkboxId);
      if (!cb) return;
      cb.checked = !cb.checked;
      toggleEl.classList.toggle('selected', cb.checked);
      updateInvoice();
    }

    // =================== SMART PAGE COUNTER ===================
    function initPageCounter(inputId) {
      if (!selectedPackage || !selectedCategory) return;
      const pkg = servicePackages[selectedCategory][selectedPackage];

      const min = pkg.minPages || 1;
      const max = pkg.maxPages || 999;
      const fixed = (min === max);
      const input = document.getElementById(inputId);
      const hint  = document.getElementById(inputId + 'Hint');
      const wrap  = document.getElementById(inputId + 'Counter');
      const btnMinus = document.getElementById(inputId + 'Minus');
      const btnPlus  = document.getElementById(inputId + 'Plus');

      if (!input) return;

      // Set value to minimum (or fixed value)
      input.value = min;
      input.min = min;

      if (fixed) {
        // Locked ‚Äî two-page packages
        if (btnMinus) btnMinus.disabled = true;
        if (btnPlus)  btnPlus.disabled  = true;
        if (hint) {
          hint.textContent = `Fixed at ${min} page${min > 1 ? 's' : ''} ‚Äî included in package`;
          hint.className = 'page-counter-hint hint-fixed';
        }
        if (wrap) wrap.className = 'page-counter';
      } else {
        if (btnMinus) btnMinus.disabled = (min <= min); // starts at min so minus is disabled
        if (btnPlus)  btnPlus.disabled  = false;
        if (hint) {
          hint.textContent = `${min}‚Äì${max} pages included ‚Ä¢ beyond ${max}: +‚Ç±${pkg.pricePerPage.toLocaleString()}/page`;
          hint.className = 'page-counter-hint hint-included';
        }
        if (wrap) wrap.className = 'page-counter';
      }

      updateInvoice();
    }

    function adjustPages(inputId, delta) {
      if (!selectedPackage || !selectedCategory) return;
      const pkg = servicePackages[selectedCategory][selectedPackage];

      const min = pkg.minPages || 1;
      const max = pkg.maxPages || 999;
      const input = document.getElementById(inputId);
      const hint  = document.getElementById(inputId + 'Hint');
      const wrap  = document.getElementById(inputId + 'Counter');
      const btnMinus = document.getElementById(inputId + 'Minus');
      const btnPlus  = document.getElementById(inputId + 'Plus');

      if (!input) return;

      let current = parseInt(input.value) || min;
      current = Math.max(min, current + delta);  // never go below min

      input.value = current;

      // Update minus button state
      if (btnMinus) btnMinus.disabled = (current <= min);

      // Update hint and border colour
      if (current < min) {
        // shouldn't happen but safety
        if (hint) { hint.textContent = `Minimum is ${min} pages`; hint.className = 'page-counter-hint hint-extra'; }
        if (wrap) wrap.className = 'page-counter';
      } else if (current <= max) {
        const remaining = max - current;
        if (remaining === 0) {
          if (hint) { hint.textContent = `At package maximum (${max} pages) ‚Äî extra pages cost ‚Ç±${pkg.pricePerPage.toLocaleString()}/page`; hint.className = 'page-counter-hint hint-extra'; }
          if (wrap) wrap.className = 'page-counter at-max';
        } else {
          if (hint) { hint.textContent = `${current} page${current>1?'s':''} ‚Ä¢ ${remaining} more included free`; hint.className = 'page-counter-hint hint-included'; }
          if (wrap) wrap.className = 'page-counter';
        }
      } else {
        const over = current - max;
        const overCost = over * pkg.pricePerPage;
        if (hint) { hint.textContent = `${over} extra page${over>1?'s':''} beyond package ‚Üí +‚Ç±${overCost.toLocaleString()} added to invoice`; hint.className = 'page-counter-hint hint-overage'; }
        if (wrap) wrap.className = 'page-counter over-max';
      }

      updateInvoice();
    }

    // Map category ‚Üí service type label and icon
    const categoryServiceMap = {
      maintenance:    { type: 'web-development', label: 'üåê Web Development', badgeText: 'üåê WEB DEVELOPMENT' },
      onePage:        { type: 'web-development', label: 'üåê Web Development', badgeText: 'üåê WEB DEVELOPMENT' },
      noMaintenance:  { type: 'web-development', label: 'üåê Web Development', badgeText: 'üåê WEB DEVELOPMENT' },
      appDesign:      { type: 'app-design',       label: 'üì± App Design',      badgeText: 'üì± APP DESIGN' },
      uiuxDesign:     { type: 'ui-ux-design',     label: 'üß© UI/UX Design',    badgeText: 'üß© UI/UX DESIGN' },
      manager:        { type: '',                 label: 'üîß Maintenance',     badgeText: 'üîß WEBSITE MANAGER' },
      renewal:        { type: '',                 label: 'üìÖ Renewal',         badgeText: 'üìÖ ANNUAL RENEWAL' }
    };

    function selectService(category, packageKey) {
      selectedCategory = category;
      selectedPackage = packageKey;

      // Update visual selection on cards
      document.querySelectorAll('.service-card').forEach(card => card.classList.remove('selected'));
      const selectedCard = document.querySelector(`[data-category="${category}"][data-key="${packageKey}"]`);
      if (selectedCard) selectedCard.classList.add('selected');

      // Determine and set the service type from the category
      const mapping = categoryServiceMap[category] || { type: '', badgeText: '‚öôÔ∏è Service Selected' };
      activeServiceType = mapping.type;

      // Update the badge
      document.getElementById('serviceTypeBadge').textContent = mapping.badgeText;

      // Show customization panel
      document.getElementById('customizationPanel').style.display = 'block';
      document.getElementById('invoiceSection').style.display = 'block';

      // Hide all service-specific options, then show the right one
      document.querySelectorAll('.service-type-options').forEach(el => el.style.display = 'none');

      if (activeServiceType === 'app-design') {
        document.getElementById('appDesignOptions').style.display = 'block';
        document.getElementById('bizQuestionnaire').style.display = 'block';
      } else if (activeServiceType === 'web-design') {
        document.getElementById('webDesignOptions').style.display = 'block';
        document.getElementById('bizQuestionnaire').style.display = 'block';
        initPageCounter('numPages');
      } else if (activeServiceType === 'web-development') {
        document.getElementById('webDevOptions').style.display = 'block';
        document.getElementById('bizQuestionnaire').style.display = 'block';
        initPageCounter('numPagesdev');
      } else if (activeServiceType === 'ui-ux-design') {
        document.getElementById('uiuxOptions').style.display = 'block';
        document.getElementById('bizQuestionnaire').style.display = 'block';
      } else {
        // manager / renewal ‚Äî no biz questionnaire needed
        document.getElementById('bizQuestionnaire').style.display = 'none';
      }

      // Always show project details
      document.getElementById('projectDetailsSection').style.display = 'block';

      // Reset invoice flash tracking
      prevInvoiceKeys = new Set();

      updateInvoice();
      document.getElementById('customizationPanel').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // =================== EDITABLE CLIENT NAME ===================
    function syncClientName() { /* input is the direct source of truth */ }

    // =================== SERVICE TYPE CHANGE (kept for filter-tab pre-setting) ===================
    function onServiceTypeChange() {
      updateInvoice();
    }

    // =================== INVOICE GENERATION ===================
    function updateInvoice() {
      if (!selectedPackage || !selectedCategory) return;

      const pkg = servicePackages[selectedCategory][selectedPackage];
      const serviceType = activeServiceType;

      let total = pkg.price;
      const items = [];

      // Base package
      items.push({
        description: `${pkg.name}${pkg.basePages > 0 ? ` (${pkg.basePages} pages)` : ''}`,
        amount: pkg.price
      });

      // Manager/Renewal: no further customization
      if (selectedCategory === 'manager' || selectedCategory === 'renewal') {
        renderInvoice(items, total);
        return;
      }

      // Business profile notes (informational, ‚Ç±0)
      if (bizSelections.type.length > 0) {
        items.push({ description: `Business Type: ${bizSelections.type.join(', ')}`, amount: 0 });
      }
      if (bizSelections.goal.length > 0) {
        items.push({ description: `Goals: ${bizSelections.goal.join(', ')}`, amount: 0 });
      }
      if (bizSelections.stage.length > 0) {
        items.push({ description: `Stage: ${bizSelections.stage[0]}`, amount: 0 });
      }

      // ‚îÄ‚îÄ APP DESIGN ‚îÄ‚îÄ
      if (serviceType === 'app-design') {
        const platform = document.getElementById('appPlatform');
        if (platform && platform.value) {
          const extra = parseInt(platform.options[platform.selectedIndex].dataset.extra || 0);
          items.push({ description: `Platform: ${platform.value}`, amount: extra });
          total += extra;
        }
        const category = document.getElementById('appCategory');
        if (category && category.value) items.push({ description: `App Category: ${category.value}`, amount: 0 });
        const screens = document.getElementById('appScreens');
        if (screens && screens.value) items.push({ description: `Screens: ${screens.value}`, amount: 0 });
        const proto = document.getElementById('appPrototype');
        if (proto && proto.value && proto.value !== 'none') {
          const extra = parseInt(proto.options[proto.selectedIndex].dataset.extra || 0);
          if (extra > 0) { items.push({ description: `Prototype: ${proto.value}`, amount: extra }); total += extra; }
          else if (proto.value) { items.push({ description: `Prototype: ${proto.value}`, amount: 0 }); }
        }
        [['app-branding','Branding / Logo Integration'],['app-darkmode','Dark Mode Version'],['app-icon','App Icon Design'],['app-onboarding','Onboarding Screens'],['app-designsystem','Design System / Style Guide'],['app-splash','Splash Screen Design']].forEach(([id, label]) => {
          const cb = document.getElementById(id);
          if (cb && cb.checked) { const p = parseInt(cb.dataset.price||0); items.push({description:label,amount:p}); total+=p; }
        });

      // ‚îÄ‚îÄ WEB DESIGN ‚îÄ‚îÄ
      } else if (serviceType === 'web-design') {
        const wdType = document.getElementById('wdType');
        if (wdType && wdType.value) items.push({ description: `Website Type: ${wdType.value}`, amount: 0 });

        const numPages = parseInt(document.getElementById('numPages').value) || pkg.minPages || pkg.basePages;
        const maxPg = pkg.maxPages || pkg.basePages;
        const minPg = pkg.minPages || 1;

        if (numPages <= maxPg) {
          items.push({ description: `Pages: ${numPages} of ${maxPg} included`, amount: 0 });
        } else {
          const extra = numPages - maxPg;
          const extraCost = extra * pkg.pricePerPage;
          items.push({ description: `Pages: ${maxPg} included in package`, amount: 0 });
          items.push({ description: `Extra Pages: ${extra} √ó ‚Ç±${pkg.pricePerPage.toLocaleString()} (beyond package max)`, amount: extraCost });
          total += extraCost;
        }
        [['wd-responsive','Mobile Responsive Design'],['wd-illustrations','Custom Illustrations'],['wd-logo','Logo Design'],['wd-motion','Animated / Motion Elements'],['wd-brandguide','Brand Style Guide'],['wd-darkmode','Dark Mode Design'],['wd-prototype','Clickable Prototype'],['wd-socialmedia','Social Media Kit']].forEach(([id, label]) => {
          const cb = document.getElementById(id);
          if (cb && cb.checked) { const p = parseInt(cb.dataset.price||0); items.push({description:label,amount:p}); total+=p; }
        });

      // ‚îÄ‚îÄ WEB DEVELOPMENT ‚îÄ‚îÄ
      } else if (serviceType === 'web-development') {
        const stack = document.getElementById('devStack');
        if (stack && stack.value) {
          const extra = parseInt(stack.options[stack.selectedIndex].dataset.extra || 0);
          items.push({ description: `Tech Stack: ${stack.value}`, amount: extra });
          total += extra;
        }
        const numPagesdev = parseInt(document.getElementById('numPagesdev').value) || pkg.minPages || pkg.basePages;
        const maxPgDev = pkg.maxPages || pkg.basePages;

        if (numPagesdev <= maxPgDev) {
          items.push({ description: `Pages: ${numPagesdev} of ${maxPgDev} included`, amount: 0 });
        } else {
          const extra = numPagesdev - maxPgDev;
          const extraCost = extra * pkg.pricePerPage;
          items.push({ description: `Pages: ${maxPgDev} included in package`, amount: 0 });
          items.push({ description: `Extra Pages: ${extra} √ó ‚Ç±${pkg.pricePerPage.toLocaleString()} (beyond package max)`, amount: extraCost });
          total += extraCost;
        }
        const maint = document.getElementById('devMaintenance');
        if (maint && maint.value && maint.value !== 'none') {
          const extra = parseInt(maint.options[maint.selectedIndex].dataset.extra || 0);
          items.push({ description: `Maintenance Plan: ${maint.value}`, amount: extra });
          total += extra;
        }
        [['dev-ecommerce','E-Commerce / Online Store'],['dev-cms','CMS Integration'],['dev-forms','Contact Form / Email Setup'],['dev-seo','SEO Optimization'],['dev-analytics','Analytics Integration'],['dev-ssl','SSL Certificate'],['dev-backup','Automated Backups'],['dev-hosting','Hosting & Domain Setup'],['dev-livechat','Live Chat Integration'],['dev-social','Social Media Integration'],['dev-speed','Speed Optimization']].forEach(([id, label]) => {
          const cb = document.getElementById(id);
          if (cb && cb.checked) { const p = parseInt(cb.dataset.price||0); items.push({description:label,amount:p}); total+=p; }
        });

      // ‚îÄ‚îÄ UI/UX DESIGN ‚îÄ‚îÄ
      } else if (serviceType === 'ui-ux-design') {
        const projectType = document.getElementById('uxProjectType');
        if (projectType && projectType.value) items.push({ description: `Project Type: ${projectType.value}`, amount: 0 });
        const deliverable = document.getElementById('uxDeliverable');
        if (deliverable && deliverable.value) {
          const extra = parseInt(deliverable.options[deliverable.selectedIndex].dataset.extra || 0);
          items.push({ description: `Deliverable: ${deliverable.value}`, amount: extra });
          total += extra;
        }
        const fidelity = document.getElementById('uxFidelity');
        if (fidelity && fidelity.value) items.push({ description: `Fidelity: ${fidelity.value}`, amount: 0 });
        const screens = document.getElementById('uxScreens');
        if (screens && screens.value) items.push({ description: `Screens: ${screens.value}`, amount: 0 });
        [['ux-research','User Research & Personas'],['ux-journey','User Journey Mapping'],['ux-ia','Information Architecture'],['ux-usability','Usability Testing Plan'],['ux-accessibility','Accessibility Audit (WCAG)'],['ux-microinteraction','Micro-Interaction Design'],['ux-handoff','Developer Handoff / Specs'],['ux-brand','Brand Integration']].forEach(([id, label]) => {
          const cb = document.getElementById(id);
          if (cb && cb.checked) { const p = parseInt(cb.dataset.price||0); items.push({description:label,amount:p}); total+=p; }
        });

      // ‚îÄ‚îÄ GENERIC fallback ‚îÄ‚îÄ
      } else {
        const numPages = parseInt((document.getElementById('numPages') || {}).value || 0) || pkg.basePages;
        if (numPages > pkg.basePages) {
          const extra = (numPages - pkg.basePages) * pkg.pricePerPage;
          items.push({ description: `Additional Pages (${numPages - pkg.basePages} √ó ‚Ç±${pkg.pricePerPage.toLocaleString()})`, amount: extra });
          total += extra;
        }
      }

      renderInvoice(items, total);
    }

    function renderInvoice(items, total) {
      const invoiceItemsEl = document.getElementById('invoiceItems');
      const currentKeys = new Set(items.map(i => i.description));

      invoiceItemsEl.innerHTML = items.map(item => {
        const isNew = !prevInvoiceKeys.has(item.description);
        const rowClass = isNew ? 'invoice-row-new' : '';
        return `
          <tr class="${rowClass}">
            <td>${item.description}</td>
            <td style="text-align: right; font-weight: 600; color: ${item.amount === 0 ? '#9ca3af' : '#fff'};">
              ${item.amount === 0 ? 'Included' : '‚Ç±' + item.amount.toLocaleString()}
            </td>
          </tr>
        `;
      }).join('');

      prevInvoiceKeys = currentKeys;

      // Pulse the total
      const totalEl = document.getElementById('totalAmount');
      totalEl.textContent = '‚Ç±' + total.toLocaleString();
      totalEl.classList.remove('total-updating');
      void totalEl.offsetWidth; // reflow to restart animation
      totalEl.classList.add('total-updating');

      document.getElementById('invoiceDate').textContent = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
      document.getElementById('invoiceNumber').textContent = 'NGCS-2026-' + String(Math.floor(Math.random() * 9000) + 1000);
    }

    // =================== ORDER SUBMISSION ===================
    function submitOrder() {
      if (!selectedPackage || !selectedCategory) {
        alert('Please select a service package first.');
        return;
      }

      const isManagerOrRenewal = selectedCategory === 'manager' || selectedCategory === 'renewal';

      if (!isManagerOrRenewal && !activeServiceType) {
        alert('Please select a service package first.');
        return;
      }

      if (activeServiceType === 'web-design' && !document.getElementById('numPages').value) {
        alert('Please enter the Number of Pages for Web Design.');
        return;
      }

      if (activeServiceType === 'web-development' && !document.getElementById('numPagesdev').value) {
        alert('Please enter the Number of Pages for Web Development.');
        return;
      }

      alert('Order submitted successfully! Payment integration will be added soon.\n\nYour invoice has been generated and is ready for download.');
    }

    function downloadInvoice() {
      alert('Invoice download functionality will be implemented with PDF generation.\n\nFor now, please take a screenshot of your invoice.');
    }

    // =================== USER PROFILE ===================
    async function saveProfile() {
      const displayName = document.getElementById('displayNameInput').value;
      const username = document.getElementById('usernameInput').value;
      const phone = document.getElementById('phoneInput').value;

      alert('Profile updated successfully!');
    }

    async function updatePassword() {
      const newPassword = document.getElementById('passwordInput').value;
      if (!newPassword || newPassword.length < 6) {
        alert('Password must be at least 6 characters.');
        return;
      }

      alert('Password updated successfully!');
      document.getElementById('passwordInput').value = '';
    }

    function logout() {
      window.location.href = 'https://nexgenixcreativesolutions.github.io/login-signup';
    }

    // =================== INITIALIZE ===================
    document.addEventListener('DOMContentLoaded', function() {
      createFloatingCodeBackground();
      loadServices();

      // Set user info
      document.getElementById('clientNameInput').value = 'Valued Client';
      document.getElementById('displayNameInput').value = 'Valued Client';
      document.getElementById('emailInput').value = 'client@example.com';
    });
  </script>
</body>
</html>